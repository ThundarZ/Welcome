--[[
	⣿⣿⣿⣿⣿ SIGMA SPY ⣿⣿⣿⣿⣿
	⣿⣿⣯⡉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉
	⠉⠻⣿⣿⣦⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠈⠻⣿⣿⣷⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⠙⢿⣿⣿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⠀⠀⣉⣿⣿⣿⠆⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⠀⠀⠀⣠⣾⣿⣿⠟⠁⠀⠀⠀⠀⠀⠀⠀⠀
	⠀⠀⢀⣴⣿⣿⡿⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⣀⣴⣿⣿⠟⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
	⣿⣿⣟⣁⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀⣀
	⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿

	@author depso (depthso)
	@repo https://github.com/depthso
	@license MIT
	@description Sigma Remote Spy for Roblox
    
	This file is COMPILED, check /src folder for the source
	Build scripts are available in /build
]]

local a,b={UseWorkspace=false,NoActors=false,FolderName='Sigma Spy',RepoUrl=
[[https://raw.githubusercontent.com/depthso/Sigma-Spy/refs/heads/main]],
ParserUrl=
[[https://raw.githubusercontent.com/depthso/Roblox-parser/refs/heads/main/dist/Main.luau]]
},{...}local c=b[1]if typeof(c)=='table'then for d,e in c do a[d]=e end end
local d=setmetatable({},{__index=function(d,e)local f=game:GetService(e)return
cloneref(f)end})local e=(function()local e,f={UseWorkspace=false,Folder=
'Sigma spy',RepoUrl=nil,FolderStructure={['Sigma Spy']={'assets'}}}function e:
Init(g)local h,i=self.FolderStructure,g.Services f=i.HttpService self:
CheckFolders(h)end function e:PushConfig(g)for h,i in next,g do self[h]=i end
end function e:UrlFetch(g)local h={Url=g:gsub(' ','%%20'),Method='GET'}local i,j
=pcall(request,h)if not i then warn'[!] HTTP request error! Check console (F9)'
warn('> Url:',g)error(j)return''end local k,l=j.Body,j.StatusCode if l==404 then
warn'[!] The file requested has moved or been deleted.'warn(' >',g)return''end
return k,j end function e:MakePath(g)local h=self.Folder return`{h}/{g}`end
function e:LoadCustomasset(g)if not getcustomasset then return end if not g then
return end local h=readfile(g)if#h<=0 then return end local i,j=pcall(
getcustomasset,g)if not i then return end if not j or#j<=0 then return end
return j end function e:GetFile(g,h)local i,j,k,l=self.RepoUrl,self.UseWorkspace
,self:MakePath(g),''if j then l=readfile(k)else l=self:UrlFetch(`{i}/{g}`)end if
h then self:FileCheck(k,function()return l end)return self:LoadCustomasset(k)end
return l end function e:GetTemplate(g)return self:GetFile(`templates/{g}.lua`)
end function e:FileCheck(g,h)if isfile(g)then return end local i=h()writefile(g,
i)end function e:FolderCheck(g)if isfolder(g)then return end makefolder(g)end
function e:CheckPath(g,h)return g and`{g}/{h}`or h end function e:CheckFolders(g
,h)for i,j in next,g do if typeof(j)=='table'then local k=self:CheckPath(h,i)
self:FolderCheck(k)self:CheckFolders(j,k)continue end local k=self:CheckPath(h,j
)self:FolderCheck(k)end end function e:TemplateCheck(g,h)self:FileCheck(g,
function()return self:GetTemplate(h)end)end function e:GetAsset(g,h)return self:
GetFile(`assets/{g}`,h)end function e:GetModule(g,h)local i=`{g}.lua`if h then
self:TemplateCheck(i,h)return readfile(i)end return self:GetFile(i)end function
e:LoadLibraries(g,...)local h={}for i,j in next,g do local k=typeof(j)=='table'
and j[1]=='base64'j=k and j[2]or j if typeof(j)~='string'and not k then h[i]=j
continue end if k then j=crypt.base64decode(j)g[i]=j end local l=loadstring(j,i)
assert(l,`Failed to load {i}`)h[i]=l(...)end return h end function e:LoadModules
(g,h)for i,j in next,g do local k=j.Init if not k then continue end j:Init(h)end
end function e:CreateFont(g,h)if not h then return end local i=`assets/{g}.json`
local j,k=self:MakePath(i),{name=g,faces={{name='Regular',weight=400,style=
'Normal',assetId=h}}}local l=f:JSONEncode(k)writefile(j,l)return j end function
e:CompileModule(g)local h='local Libraries = {'for i,j in g do if typeof(j)~=
'string'then continue end h..=`\t{i} = (function()\n{j}\nend)(),\n`end h..='}'
return h end function e:MakeActorScript(g,h)local i=e:CompileModule(g)i..=
'\r\n\tlocal ExtraData = {\r\n\t\tIsActor = true\r\n\t}\r\n\t'i..=`Libraries.Hook:BeginService(Libraries, ExtraData, {
h})`return i end return e end)()e:PushConfig(a)e:Init{Services=d}local f=e.
FolderName local g,h={Config=e:GetModule(`{f}/Config`,'Config'),ReturnSpoofs=e:
GetModule(`{f}/Return spoofs`,'Return Spoofs'),Configuration=a,Files=e,Process={
'base64',
[[dHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCnR5cGUgUmVtb3RlRGF0YSA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KCUlzUmVjZWl2ZTogYm9vbGVhbj8sDQoJQXJnczogdGFibGUsDQogICAgSWQ6IHN0cmluZywNCglNZXRob2Q6IHN0cmluZywNCiAgICBUcmFuc2ZlclR5cGU6IHN0cmluZywNCglWYWx1ZVJlcGxhY2VtZW50czogdGFibGUsDQogICAgUmV0dXJuVmFsdWVzOiB0YWJsZSwNCiAgICBPcmlnaW5hbEZ1bmM6IChJbnN0YW5jZSwgLi4uYW55KSAtPiAuLi5hbnkNCn0NCg0KLS0vLyBNb2R1bGUNCmxvY2FsIFByb2Nlc3MgPSB7DQogICAgLS0vLyBSZW1vdGUgY2xhc3Nlcw0KICAgIFJlbW90ZUNsYXNzRGF0YSA9IHsNCiAgICAgICAgWyJSZW1vdGVFdmVudCJdID0gew0KICAgICAgICAgICAgU2VuZCA9IHsNCiAgICAgICAgICAgICAgICAiRmlyZVNlcnZlciIsDQogICAgICAgICAgICAgICAgImZpcmVTZXJ2ZXIiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIFJlY2VpdmUgPSB7DQogICAgICAgICAgICAgICAgIk9uQ2xpZW50RXZlbnQiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBbIlJlbW90ZUZ1bmN0aW9uIl0gPSB7DQogICAgICAgICAgICBJc1JlbW90ZUZ1bmN0aW9uID0gdHJ1ZSwNCiAgICAgICAgICAgIFNlbmQgPSB7DQogICAgICAgICAgICAgICAgIkludm9rZVNlcnZlciIsDQogICAgICAgICAgICAgICAgImludm9rZVNlcnZlciIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgUmVjZWl2ZSA9IHsNCiAgICAgICAgICAgICAgICAiT25DbGllbnRJbnZva2UiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBbIlVucmVsaWFibGVSZW1vdGVFdmVudCJdID0gew0KICAgICAgICAgICAgU2VuZCA9IHsNCiAgICAgICAgICAgICAgICAiRmlyZVNlcnZlciIsDQogICAgICAgICAgICAgICAgImZpcmVTZXJ2ZXIiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIFJlY2VpdmUgPSB7DQogICAgICAgICAgICAgICAgIk9uQ2xpZW50RXZlbnQiLA0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBbIkJpbmRhYmxlRXZlbnQiXSA9IHsNCiAgICAgICAgICAgIE5vUmVjaXZlSG9vayA9IHRydWUsDQogICAgICAgICAgICBTZW5kID0gew0KICAgICAgICAgICAgICAgICJGaXJlIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBSZWNlaXZlID0gew0KICAgICAgICAgICAgICAgICJFdmVudCIsDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIFsiQmluZGFibGVGdW5jdGlvbiJdID0gew0KICAgICAgICAgICAgSXNSZW1vdGVGdW5jdGlvbiA9IHRydWUsDQogICAgICAgICAgICBOb1JlY2l2ZUhvb2sgPSB0cnVlLA0KICAgICAgICAgICAgU2VuZCA9IHsNCiAgICAgICAgICAgICAgICAiSW52b2tlIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBSZWNlaXZlID0gew0KICAgICAgICAgICAgICAgICJPbkludm9rZSIsDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KICAgIFJlbW90ZU9wdGlvbnMgPSB7fSwNCiAgICBMb29waW5nUmVtb3RlcyA9IHt9LA0KICAgIENvbmZpZ092ZXJ3cml0ZXMgPSB7DQogICAgICAgIFt7InNpcmh1cnQiLCAicG90YXNzaXVtIiwgIndhdmUifV0gPSB7DQogICAgICAgICAgICBGb3JjZVVzZUN1c3RvbUNvbW0gPSB0cnVlDQogICAgICAgIH0NCiAgICB9DQp9DQoNCi0tLy8gTW9kdWxlcw0KbG9jYWwgSG9vaw0KbG9jYWwgQ29tbXVuaWNhdGlvbg0KbG9jYWwgUmV0dXJuU3Bvb2ZzDQpsb2NhbCBVaQ0KbG9jYWwgQ29uZmlnDQoNCi0tLy8gQ29tbXVuaWNhdGlvbiBjaGFubmVsDQpsb2NhbCBDaGFubmVsDQpsb2NhbCBDaGFubmVsV3JhcHBlZCA9IGZhbHNlDQoNCmxvY2FsIFNpZ21hRU5WID0gZ2V0ZmVudigxKQ0KDQpsb2NhbCBmdW5jdGlvbiBNZXJnZShCYXNlOiB0YWJsZSwgTmV3OiB0YWJsZSkNCglmb3IgS2V5LCBWYWx1ZSBpbiBuZXh0LCBOZXcgZG8NCgkJQmFzZVtLZXldID0gVmFsdWUNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkluaXQoRGF0YSkNCiAgICBsb2NhbCBNb2R1bGVzID0gRGF0YS5Nb2R1bGVzDQoNCiAgICAtLS8vIE1vZHVsZXMNCiAgICBDb25maWcgPSBNb2R1bGVzLkNvbmZpZw0KICAgIFVpID0gTW9kdWxlcy5VaQ0KICAgIEhvb2sgPSBNb2R1bGVzLkhvb2sNCiAgICBDb21tdW5pY2F0aW9uID0gTW9kdWxlcy5Db21tdW5pY2F0aW9uDQogICAgUmV0dXJuU3Bvb2ZzID0gTW9kdWxlcy5SZXR1cm5TcG9vZnMNCmVuZA0KDQotLS8vIENvbW11bmljYXRpb24NCmZ1bmN0aW9uIFByb2Nlc3M6U2V0Q2hhbm5lbChOZXdDaGFubmVsOiBCaW5kYWJsZUV2ZW50LCBJc1dyYXBwZWQ6IGJvb2xlYW4pDQogICAgQ2hhbm5lbCA9IE5ld0NoYW5uZWwNCiAgICBDaGFubmVsV3JhcHBlZCA9IElzV3JhcHBlZA0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6R2V0Q29uZmlnT3ZlcndyaXRlcyhOYW1lOiBzdHJpbmcpDQogICAgbG9jYWwgQ29uZmlnT3ZlcndyaXRlcyA9IHNlbGYuQ29uZmlnT3ZlcndyaXRlcw0KDQogICAgZm9yIExpc3QsIE92ZXJ3cml0ZXMgaW4gbmV4dCwgQ29uZmlnT3ZlcndyaXRlcyBkbw0KICAgICAgICBpZiBub3QgdGFibGUuZmluZChMaXN0LCBOYW1lKSB0aGVuIGNvbnRpbnVlIGVuZA0KICAgICAgICByZXR1cm4gT3ZlcndyaXRlcw0KICAgIGVuZA0KICAgIHJldHVybg0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q2hlY2tDb25maWcoQ29uZmlnOiB0YWJsZSkNCiAgICBsb2NhbCBOYW1lID0gaWRlbnRpZnlleGVjdXRvcigpOmxvd2VyKCkNCg0KICAgIC0tLy8gRm9yY2UgY29uZmlndXJhdGlvbiBvdmVyd3JpdGVzIGZvciBzcGVjaWZpYyBleGVjdXRvcnMNCiAgICBsb2NhbCBPdmVyd3JpdGVzID0gc2VsZjpHZXRDb25maWdPdmVyd3JpdGVzKE5hbWUpDQogICAgaWYgbm90IE92ZXJ3cml0ZXMgdGhlbiByZXR1cm4gZW5kDQoNCiAgICBNZXJnZShDb25maWcsIE92ZXJ3cml0ZXMpDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDbGVhbkNFcnJvcihFcnJvcjogc3RyaW5nKTogc3RyaW5nDQogICAgRXJyb3IgPSBFcnJvcjpnc3ViKCI6JWQrOiAiLCAiIikNCiAgICBFcnJvciA9IEVycm9yOmdzdWIoIiwgZ290ICVhKyIsICIiKQ0KICAgIEVycm9yID0gRXJyb3I6Z3N1YigiaW52YWxpZCBhcmd1bWVudCIsICJtaXNzaW5nIGFyZ3VtZW50IikNCiAgICByZXR1cm4gRXJyb3INCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNvdW50TWF0Y2hlcyhTdHJpbmc6IHN0cmluZywgTWF0Y2g6IHN0cmluZyk6IG51bWJlcg0KCWxvY2FsIENvdW50ID0gMA0KCWZvciBfIGluIFN0cmluZzpnbWF0Y2goTWF0Y2gpIGRvDQoJCUNvdW50ICs9MSANCgllbmQNCg0KCXJldHVybiBDb3VudA0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6RGVlcENsb25lVGFibGUoVGFibGUsIElnbm9yZTogdGFibGU/KQ0KCWxvY2FsIE5ldyA9IHt9DQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgVGFibGUgZG8NCiAgICAgICAgLS0vLyBDaGVjayBpZiB0aGUgdmFsdWUgaXMgaWdub3JlZA0KICAgICAgICBpZiBJZ25vcmUgYW5kIHRhYmxlLmZpbmQoSWdub3JlLCBWYWx1ZSkgdGhlbiBjb250aW51ZSBlbmQNCg0KCQlOZXdbS2V5XSA9IHR5cGVvZihWYWx1ZSkgPT0gInRhYmxlIiBhbmQgc2VsZjpEZWVwQ2xvbmVUYWJsZShWYWx1ZSkgb3IgVmFsdWUNCgllbmQNCglyZXR1cm4gTmV3DQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpVbnBhY2soVGFibGU6IHRhYmxlKQ0KCWxvY2FsIExlbmd0aCA9IHRhYmxlLm1heG4oVGFibGUpDQoJcmV0dXJuIHVucGFjayhUYWJsZSwgMSwgTGVuZ3RoKQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6UHVzaENvbmZpZyhPdmVyd3JpdGVzKQ0KICAgIE1lcmdlKHNlbGYsIE92ZXJ3cml0ZXMpDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpGdW5jRXhpc3RzKE5hbWU6IHN0cmluZykNCglyZXR1cm4gZ2V0ZmVudigxKVtOYW1lXQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q2hlY2tFeGVjdXRvcigpOiBib29sZWFuDQogICAgbG9jYWwgQmxhY2tsaXN0ZWQgPSB7DQogICAgICAgICJ4ZW5vIiwNCiAgICAgICAgInNvbGFyYSIsDQogICAgICAgICJqanNwbG9pdCINCiAgICB9DQoNCiAgICBsb2NhbCBOYW1lID0gaWRlbnRpZnlleGVjdXRvcigpOmxvd2VyKCkNCiAgICBsb2NhbCBJc0JsYWNrbGlzdGVkID0gdGFibGUuZmluZChCbGFja2xpc3RlZCwgTmFtZSkNCg0KICAgIC0tLy8gU29tZSBleGVjdXRvcnMgaGF2ZSBicm9rZW4gZnVuY3Rpb25hbGl0eQ0KICAgIGlmIElzQmxhY2tsaXN0ZWQgdGhlbg0KICAgICAgICBVaTpTaG93VW5zdXBwb3J0ZWRFeGVjdXRvcihOYW1lKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCg0KICAgIHJldHVybiB0cnVlDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDaGVja0Z1bmN0aW9ucygpOiBib29sZWFuDQogICAgbG9jYWwgQ29yZUZ1bmN0aW9ucyA9IHsNCiAgICAgICAgImhvb2ttZXRhbWV0aG9kIiwNCiAgICAgICAgImhvb2tmdW5jdGlvbiIsDQogICAgICAgICJnZXRyYXdtZXRhdGFibGUiLA0KICAgICAgICAic2V0cmVhZG9ubHkiDQogICAgfQ0KDQogICAgLS0vLyBDaGVjayBpZiB0aGUgZnVuY3Rpb25zIGV4aXN0IGluIHRoZSBFTlYNCiAgICBmb3IgXywgTmFtZSBpbiBDb3JlRnVuY3Rpb25zIGRvDQogICAgICAgIGxvY2FsIEZ1bmMgPSBzZWxmOkZ1bmNFeGlzdHMoTmFtZSkNCiAgICAgICAgaWYgRnVuYyB0aGVuIGNvbnRpbnVlIGVuZA0KDQogICAgICAgIC0tLy8gRnVuY3Rpb24gbWlzc2luZyENCiAgICAgICAgVWk6U2hvd1Vuc3VwcG9ydGVkKE5hbWUpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KDQogICAgcmV0dXJuIHRydWUNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkNoZWNrSXNTdXBwb3J0ZWQoKTogYm9vbGVhbg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIGV4ZWN1dG9yIGlzIGJsYWNrbGlzdGVkDQogICAgbG9jYWwgRXhlY3V0b3JTdXBwb3J0ZWQgPSBzZWxmOkNoZWNrRXhlY3V0b3IoKQ0KICAgIGlmIG5vdCBFeGVjdXRvclN1cHBvcnRlZCB0aGVuDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KDQogICAgLS0vLyBDaGVjayBpZiB0aGUgY29yZSBmdW5jdGlvbnMgZXhpc3QNCiAgICBsb2NhbCBGdW5jdGlvbnNTdXBwb3J0ZWQgPSBzZWxmOkNoZWNrRnVuY3Rpb25zKCkNCiAgICBpZiBub3QgRnVuY3Rpb25zU3VwcG9ydGVkIHRoZW4NCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgZW5kDQoNCiAgICByZXR1cm4gdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6R2V0Q2xhc3NEYXRhKFJlbW90ZTogSW5zdGFuY2UpOiB0YWJsZT8NCiAgICBsb2NhbCBSZW1vdGVDbGFzc0RhdGEgPSBzZWxmLlJlbW90ZUNsYXNzRGF0YQ0KICAgIGxvY2FsIENsYXNzTmFtZSA9IEhvb2s6SW5kZXgoUmVtb3RlLCAiQ2xhc3NOYW1lIikNCg0KICAgIHJldHVybiBSZW1vdGVDbGFzc0RhdGFbQ2xhc3NOYW1lXQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6SXNQcm90ZWN0ZWRSZW1vdGUoUmVtb3RlOiBJbnN0YW5jZSk6IGJvb2xlYW4NCiAgICBsb2NhbCBJc0RlYnVnID0gUmVtb3RlID09IENvbW11bmljYXRpb24uRGVidWdJZFJlbW90ZQ0KICAgIGxvY2FsIElzQ2hhbm5lbCA9IFJlbW90ZSA9PSAoQ2hhbm5lbFdyYXBwZWQgYW5kIENoYW5uZWwuQ2hhbm5lbCBvciBDaGFubmVsKQ0KDQogICAgcmV0dXJuIElzRGVidWcgb3IgSXNDaGFubmVsDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpSZW1vdGVBbGxvd2VkKFJlbW90ZTogSW5zdGFuY2UsIFRyYW5zZmVyVHlwZTogc3RyaW5nLCBNZXRob2Q6IHN0cmluZz8pOiBib29sZWFuPw0KICAgIGlmIHR5cGVvZihSZW1vdGUpIH49ICdJbnN0YW5jZScgdGhlbiByZXR1cm4gZW5kDQogICAgDQogICAgLS0vLyBDaGVjayBpZiB0aGUgUmVtb3RlIGlzIHByb3RlY3RlZA0KICAgIGlmIHNlbGY6SXNQcm90ZWN0ZWRSZW1vdGUoUmVtb3RlKSB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gRmV0Y2ggY2xhc3MgdGFibGUNCglsb2NhbCBDbGFzc0RhdGEgPSBzZWxmOkdldENsYXNzRGF0YShSZW1vdGUpDQoJaWYgbm90IENsYXNzRGF0YSB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIHRyYW5zZmVyIHR5cGUgaGFzIGRhdGENCglsb2NhbCBBbGxvd2VkID0gQ2xhc3NEYXRhW1RyYW5zZmVyVHlwZV0NCglpZiBub3QgQWxsb3dlZCB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIG1ldGhvZCBpcyBhbGxvd2VkDQoJaWYgTWV0aG9kIHRoZW4NCgkJcmV0dXJuIHRhYmxlLmZpbmQoQWxsb3dlZCwgTWV0aG9kKSB+PSBuaWwNCgllbmQNCg0KCXJldHVybiB0cnVlDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpTZXRFeHRyYURhdGEoRGF0YTogdGFibGUpDQogICAgaWYgbm90IERhdGEgdGhlbiByZXR1cm4gZW5kDQogICAgc2VsZi5FeHRyYURhdGEgPSBEYXRhDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpHZXRSZW1vdGVTcG9vZihSZW1vdGU6IEluc3RhbmNlLCBNZXRob2Q6IHN0cmluZywgLi4uKTogdGFibGU/DQogICAgbG9jYWwgU3Bvb2YgPSBSZXR1cm5TcG9vZnNbUmVtb3RlXQ0KDQogICAgaWYgbm90IFNwb29mIHRoZW4gcmV0dXJuIGVuZA0KICAgIGlmIFNwb29mLk1ldGhvZCB+PSBNZXRob2QgdGhlbiByZXR1cm4gZW5kDQoNCiAgICBsb2NhbCBSZXR1cm5WYWx1ZXMgPSBTcG9vZi5SZXR1cm4NCg0KICAgIC0tLy8gQ2FsbCB0aGUgUmV0dXJuVmFsdWVzIGZ1bmN0aW9uIHR5cGUNCiAgICBpZiB0eXBlb2YoUmV0dXJuVmFsdWVzKSA9PSAiZnVuY3Rpb24iIHRoZW4NCiAgICAgICAgUmV0dXJuVmFsdWVzID0gUmV0dXJuVmFsdWVzKC4uLikNCiAgICBlbmQNCg0KCS0tQ29tbXVuaWNhdGlvbjpXYXJuKCJTcG9vZmVkIiwgTWV0aG9kKQ0KCXJldHVybiBSZXR1cm5WYWx1ZXMNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlNldE5ld1JldHVyblNwb29mcyhOZXdSZXR1cm5TcG9vZnM6IHRhYmxlKQ0KICAgIFJldHVyblNwb29mcyA9IE5ld1JldHVyblNwb29mcw0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6RmluZENhbGxpbmdMQ2xvc3VyZShPZmZzZXQ6IG51bWJlcikNCiAgICBPZmZzZXQgKz0gMQ0KDQogICAgd2hpbGUgdHJ1ZSBkbw0KICAgICAgICBPZmZzZXQgKz0gMQ0KDQogICAgICAgIC0tLy8gQ2hlY2sgaWYgdGhlIHN0YWNrIGxldmVsIGlzIHZhbGlkDQogICAgICAgIGxvY2FsIElzVmFsaWQgPSBkZWJ1Zy5pbmZvKE9mZnNldCwgImwiKSB+PSAtMQ0KICAgICAgICBpZiBub3QgSXNWYWxpZCB0aGVuIGNvbnRpbnVlIGVuZA0KDQogICAgICAgIC0tLy8gQ2hlY2sgaWYgdGhlIGZ1bmN0aW9uIGlzIHZhbGlkDQogICAgICAgIGxvY2FsIEZ1bmN0aW9uID0gZGVidWcuaW5mbyhPZmZzZXQsICJmIikNCiAgICAgICAgaWYgbm90IEZ1bmN0aW9uIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgICAgIHJldHVybiBGdW5jdGlvbg0KICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6Q2FsbGJhY2soRGF0YTogUmVtb3RlRGF0YSwgLi4uKTogdGFibGU/DQogICAgLS0vLyBVbnBhY2sgRGF0YQ0KICAgIGxvY2FsIE9yaWdpbmFsRnVuYyA9IERhdGEuT3JpZ2luYWxGdW5jDQogICAgbG9jYWwgSWQgPSBEYXRhLklkDQogICAgbG9jYWwgTWV0aG9kID0gRGF0YS5NZXRob2QNCiAgICBsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KDQogICAgbG9jYWwgUmVtb3RlRGF0YSA9IHNlbGY6R2V0UmVtb3RlRGF0YShJZCkNCg0KICAgIC0tLy8gQ2hlY2sgaWYgdGhlIFJlbW90ZSBpcyBCbG9ja2VkDQogICAgaWYgUmVtb3RlRGF0YS5CbG9ja2VkIHRoZW4gcmV0dXJuIHt9IGVuZA0KDQogICAgLS0vLyBDaGVjayBmb3IgYSBzcG9vZg0KICAgIGxvY2FsIFNwb29mID0gc2VsZjpHZXRSZW1vdGVTcG9vZihSZW1vdGUsIE1ldGhvZCwgT3JpZ2luYWxGdW5jLCAuLi4pDQogICAgaWYgU3Bvb2YgdGhlbiByZXR1cm4gU3Bvb2YgZW5kDQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZSBvcmlnbmFsIGZ1bmN0aW9uIHdhcyBwYXNzZWQNCiAgICBpZiBub3QgT3JpZ2luYWxGdW5jIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgLS0vLyBJbnZva2Ugb3JpZ25hbCBmdW5jdGlvbg0KICAgIHJldHVybiB7DQogICAgICAgIE9yaWdpbmFsRnVuYyhSZW1vdGUsIC4uLikNCiAgICB9DQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpEZWNvbXBpbGUoU2NyaXB0OiBTY3JpcHQpOiBzdHJpbmcNCiAgICBsb2NhbCBLb25zdGFudEFQSSA9ICJodHRwOi8vYXBpLnBsdXNnaWFudDUuY29tL2tvbnN0YW50L2RlY29tcGlsZSINCiAgICBsb2NhbCBGb3JjZUtvbnN0YW50ID0gQ29uZmlnLkZvcmNlS29uc3RhbnREZWNvbXBpbGVyDQoNCiAgICAtLS8vIFVzZSBidWlsdC1pbiBkZWNvbXBpbGVyIGlmIHRoZSBleGVjdXRvciBzdXBwb3J0cyBpdA0KICAgIGlmIGRlY29tcGlsZSBhbmQgbm90IEZvcmNlS29uc3RhbnQgdGhlbiANCiAgICAgICAgcmV0dXJuIGRlY29tcGlsZShTY3JpcHQpDQogICAgZW5kDQoNCiAgICAtLS8vIGdldHNjcmlwdGJ5dGVjb2RlDQogICAgbG9jYWwgU3VjY2VzcywgQnl0ZWNvZGUgPSBwY2FsbChnZXRzY3JpcHRieXRlY29kZSwgU2NyaXB0KQ0KICAgIGlmIG5vdCBTdWNjZXNzIHRoZW4NCiAgICAgICAgbG9jYWwgRXJyb3IgPSBgLS1GYWlsZWQgdG8gZ2V0IHNjcmlwdCBieXRlY29kZSwgZXJyb3I6XG5gDQogICAgICAgIEVycm9yIC4uPSBgXG4tLVtbXG57Qnl0ZWNvZGV9XG5dXWANCiAgICAgICAgcmV0dXJuIEVycm9yLCB0cnVlDQogICAgZW5kDQogICAgDQogICAgLS0vLyBTZW5kIFBPU1QgcmVxdWVzdCB0byB0aGUgQVBJDQogICAgbG9jYWwgUmVzcG9uY2UgPSByZXF1ZXN0KHsNCiAgICAgICAgVXJsID0gS29uc3RhbnRBUEksDQogICAgICAgIEJvZHkgPSBCeXRlY29kZSwNCiAgICAgICAgTWV0aG9kID0gIlBPU1QiLA0KICAgICAgICBIZWFkZXJzID0gew0KICAgICAgICAgICAgWyJDb250ZW50LVR5cGUiXSA9ICJ0ZXh0L3BsYWluIg0KICAgICAgICB9LA0KICAgIH0pDQoNCiAgICAtLS8vIEVycm9yIGNoZWNrDQogICAgaWYgUmVzcG9uY2UuU3RhdHVzQ29kZSB+PSAyMDAgdGhlbg0KICAgICAgICBsb2NhbCBFcnJvciA9IGAtLVtLT05TVEFOVF0gRXJyb3Igb2NjdXJlZCB3aGlsZSByZXF1ZXN0aW5nIHRoZSBBUEksIGVycm9yOlxuYA0KICAgICAgICBFcnJvciAuLj0gYFxuLS1bW1xue1Jlc3BvbmNlLkJvZHl9XG5dXWANCiAgICAgICAgcmV0dXJuIEVycm9yLCB0cnVlDQogICAgZW5kDQoNCiAgICByZXR1cm4gUmVzcG9uY2UuQm9keQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6R2V0U2NyaXB0RnJvbUZ1bmMoRnVuYzogKC4uLmFueSkgLT4gLi4uYW55KQ0KICAgIGxvY2FsIEVOViA9IGdldGZlbnYoRnVuYykNCiAgICBpZiBzZWxmOklzU2lnbWFTcHlFTlYoRU5WKSB0aGVuIA0KICAgICAgICByZXR1cm4gDQogICAgZW5kDQoNCiAgICByZXR1cm4gcmF3Z2V0KEVOViwgInNjcmlwdCIpDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpDb25uZWN0aW9uSXNWYWxpZChDb25uZWN0aW9uOiB0YWJsZSk6IGJvb2xlYW4NCiAgICBsb2NhbCBWYWx1ZVJlcGxhY2VtZW50cyA9IHsNCgkJWyJTY3JpcHQiXSA9IGZ1bmN0aW9uKENvbm5lY3Rpb246IHRhYmxlKTogc2NyaXB0Pw0KCQkJbG9jYWwgRnVuY3Rpb24gPSBDb25uZWN0aW9uLkZ1bmN0aW9uDQoJCQlpZiBub3QgRnVuY3Rpb24gdGhlbiByZXR1cm4gZW5kDQoNCgkJCXJldHVybiBzZWxmOkdldFNjcmlwdEZyb21GdW5jKEZ1bmN0aW9uKQ0KCQllbmQNCgl9DQoNCiAgICAtLS8vIENoZWNrIGlmIHRoZXNlIHByb3BlcnRpZXMgYXJlIHZhbGlkDQogICAgbG9jYWwgVG9DaGVjayA9IHsNCiAgICAgICAgIlNjcmlwdCINCiAgICB9DQoNCiAgICBmb3IgXywgUHJvcGVydHkgaW4gVG9DaGVjayBkbw0KICAgICAgICBsb2NhbCBSZXBsYWNlbWVudCA9IFZhbHVlUmVwbGFjZW1lbnRzW1Byb3BlcnR5XQ0KDQogICAgICAgIC0tLy8gQ2hlY2sgaWYgdGhlcmUncyBhIGZ1bmN0aW9uIGZvciBhIHByb3BlcnR5DQogICAgICAgIGlmIFJlcGxhY2VtZW50IHRoZW4NCiAgICAgICAgICAgIFZhbHVlID0gUmVwbGFjZW1lbnQoQ29ubmVjdGlvbikNCiAgICAgICAgZW5kDQoNCiAgICAgICAgLS0vLyBDaGVjayBpZiB0aGUgcHJvcGVydHkgaGFzIGEgdmFsdWUNCiAgICAgICAgaWYgVmFsdWUgPT0gbmlsIHRoZW4gDQogICAgICAgICAgICByZXR1cm4gZmFsc2UgDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgcmV0dXJuIHRydWUNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOkZpbHRlckNvbm5lY3Rpb25zKFNpZ25hbDogUkJYU2NyaXB0Q29ubmVjdGlvbik6IHRhYmxlDQogICAgbG9jYWwgUHJvY2Vzc2VkID0ge30NCg0KICAgIC0tLy8gRmlsdGVyIGVhY2ggY29ubmVjdGlvbg0KICAgIGZvciBfLCBDb25uZWN0aW9uIGluIGdldGNvbm5lY3Rpb25zKFNpZ25hbCkgZG8NCiAgICAgICAgaWYgbm90IHNlbGY6Q29ubmVjdGlvbklzVmFsaWQoQ29ubmVjdGlvbikgdGhlbiBjb250aW51ZSBlbmQNCiAgICAgICAgdGFibGUuaW5zZXJ0KFByb2Nlc3NlZCwgQ29ubmVjdGlvbikNCiAgICBlbmQNCg0KICAgIHJldHVybiBQcm9jZXNzZWQNCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOklzU2lnbWFTcHlFTlYoRW52OiB0YWJsZSk6IGJvb2xlYW4NCiAgICByZXR1cm4gRU5WID09IFNpZ21hRU5WDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpQcm9jZXNzUmVtb3RlKERhdGE6IFJlbW90ZURhdGEsIC4uLik6IHRhYmxlPw0KICAgIC0tLy8gVW5wYWNrIERhdGENCiAgICBsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KCWxvY2FsIE1ldGhvZCA9IERhdGEuTWV0aG9kDQogICAgbG9jYWwgVHJhbnNmZXJUeXBlID0gRGF0YS5UcmFuc2ZlclR5cGUNCg0KCS0tLy8gQ2hlY2sgaWYgdGhlIHRyYW5zZmVydHlwZSBtZXRob2QgaXMgYWxsb3dlZA0KCWlmIFRyYW5zZmVyVHlwZSBhbmQgbm90IHNlbGY6UmVtb3RlQWxsb3dlZChSZW1vdGUsIFRyYW5zZmVyVHlwZSwgTWV0aG9kKSB0aGVuIHJldHVybiBlbmQNCg0KICAgIC0tLy8gRmV0Y2ggZGV0YWlscw0KICAgIGxvY2FsIElkID0gQ29tbXVuaWNhdGlvbjpHZXREZWJ1Z0lkKFJlbW90ZSkNCiAgICBsb2NhbCBDbGFzc0RhdGEgPSBzZWxmOkdldENsYXNzRGF0YShSZW1vdGUpDQogICAgbG9jYWwgVGltZXN0YW1wID0gdGljaygpDQoNCiAgICAtLS8vIEFkZCBleHRyYSBkYXRhIGludG8gdGhlIGxvZyBpZiBuZWVkZWQNCiAgICBsb2NhbCBFeHRyYURhdGEgPSBzZWxmLkV4dHJhRGF0YQ0KICAgIGlmIEV4dHJhRGF0YSB0aGVuDQogICAgICAgIE1lcmdlKERhdGEsIEV4dHJhRGF0YSkNCiAgICBlbmQNCg0KICAgIC0tLy8gR2V0IGNhbGxlciBpbmZvcm1hdGlvbg0KICAgIGxvY2FsIENhbGxpbmdGdW5jdGlvbiA9IHNlbGY6RmluZENhbGxpbmdMQ2xvc3VyZSg2KQ0KICAgIGxvY2FsIFNvdXJjZVNjcmlwdA0KICAgIGlmIENhbGxpbmdGdW5jdGlvbiB0aGVuDQogICAgICAgIFNvdXJjZVNjcmlwdCA9IHNlbGY6R2V0U2NyaXB0RnJvbUZ1bmMoQ2FsbGluZ0Z1bmN0aW9uKQ0KICAgIGVuZA0KDQogICAgLS0vLyBBZGQgdG8gcXVldWUNCiAgICBNZXJnZShEYXRhLCB7DQoJCUNhbGxpbmdTY3JpcHQgPSBnZXRjYWxsaW5nc2NyaXB0KCksDQogICAgICAgIFNvdXJjZVNjcmlwdCA9IFNvdXJjZVNjcmlwdCwNCgkJQ2FsbGluZ0Z1bmN0aW9uID0gQ2FsbGluZ0Z1bmN0aW9uLA0KICAgICAgICBJZCA9IElkLA0KCQlDbGFzc0RhdGEgPSBDbGFzc0RhdGEsDQogICAgICAgIFRpbWVzdGFtcCA9IFRpbWVzdGFtcCwNCiAgICAgICAgQXJncyA9IENvbW11bmljYXRpb246U2VyaWFsaXplVGFibGUoey4uLn0pDQogICAgfSkNCg0KICAgIC0tLy8gSW52b2tlIHRoZSBSZW1vdGUgYW5kIGxvZyByZXR1cm4gdmFsdWVzDQogICAgbG9jYWwgUmV0dXJuVmFsdWVzID0gc2VsZjpDYWxsYmFjayhEYXRhLCAuLi4pDQogICAgRGF0YS5SZXR1cm5WYWx1ZXMgPSBSZXR1cm5WYWx1ZXMNCg0KICAgIC0tLy8gUXVldWUgbG9nDQogICAgQ29tbXVuaWNhdGlvbjpRdWV1ZUxvZyhEYXRhKQ0KDQogICAgcmV0dXJuIFJldHVyblZhbHVlcw0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6U2V0QWxsUmVtb3RlRGF0YShLZXk6IHN0cmluZywgVmFsdWUpDQogICAgbG9jYWwgUmVtb3RlT3B0aW9ucyA9IHNlbGYuUmVtb3RlT3B0aW9ucw0KCWZvciBSZW1vdGVJRCwgRGF0YSBpbiBuZXh0LCBSZW1vdGVPcHRpb25zIGRvDQoJCURhdGFbS2V5XSA9IFZhbHVlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gUHJvY2VzczpHZXRSZW1vdGVEYXRhKElkOiBzdHJpbmcpDQogICAgbG9jYWwgUmVtb3RlT3B0aW9ucyA9IHNlbGYuUmVtb3RlT3B0aW9ucw0KDQogICAgLS0vLyBDaGVjayBmb3IgZXhpc3RpbmcgcmVtb3RlIGRhdGENCglsb2NhbCBFeGlzdGluZyA9IFJlbW90ZU9wdGlvbnNbSWRdDQoJaWYgRXhpc3RpbmcgdGhlbiByZXR1cm4gRXhpc3RpbmcgZW5kDQoJDQogICAgLS0vLyBCYXNlIHJlbW90ZSBkYXRhDQoJbG9jYWwgRGF0YSA9IHsNCgkJRXhjbHVkZWQgPSBmYWxzZSwNCgkJQmxvY2tlZCA9IGZhbHNlDQoJfQ0KDQoJUmVtb3RlT3B0aW9uc1tJZF0gPSBEYXRhDQoJcmV0dXJuIERhdGENCmVuZA0KDQotLS8vIFRoZSBjb21tdW5pY2F0aW9uIGNyZWF0ZXMgYSBkaWZmZXJlbnQgdGFibGUgYWRkcmVzcw0KLS0vLyBSZWNpdmVkIHRhYmxlcyB3aWxsIG5vdCBiZSB0aGUgc2FtZQ0KZnVuY3Rpb24gUHJvY2VzczpTZXRSZW1vdGVEYXRhKElkOiBzdHJpbmcsIFJlbW90ZURhdGE6IHRhYmxlKQ0KICAgIGxvY2FsIFJlbW90ZU9wdGlvbnMgPSBzZWxmLlJlbW90ZU9wdGlvbnMNCiAgICBSZW1vdGVPcHRpb25zW0lkXSA9IFJlbW90ZURhdGENCmVuZA0KDQpmdW5jdGlvbiBQcm9jZXNzOlVwZGF0ZVJlbW90ZURhdGEoSWQ6IHN0cmluZywgUmVtb3RlRGF0YTogdGFibGUpDQogICAgQ29tbXVuaWNhdGlvbjpDb21tdW5pY2F0ZSgiUmVtb3RlRGF0YSIsIElkLCBSZW1vdGVEYXRhKQ0KZW5kDQoNCmZ1bmN0aW9uIFByb2Nlc3M6VXBkYXRlQWxsUmVtb3RlRGF0YShLZXk6IHN0cmluZywgVmFsdWUpDQogICAgQ29tbXVuaWNhdGlvbjpDb21tdW5pY2F0ZSgiQWxsUmVtb3RlRGF0YSIsIEtleSwgVmFsdWUpDQplbmQNCg0KcmV0dXJuIFByb2Nlc3M=]]
},Hook={'base64',
[[bG9jYWwgSG9vayA9IHsNCglPcmlnbmFsTmFtZWNhbGwgPSBuaWwsDQoJT3JpZ25hbEluZGV4ID0gbmlsLA0KfQ0KDQp0eXBlIHRhYmxlID0gew0KCVthbnldOiBhbnkNCn0NCg0KdHlwZSBNZXRhQ2FsbGJhY2sgPSAoSW5zdGFuY2UsIC4uLmFueSkgLT4gLi4uYW55DQoNCi0tLy8gTW9kdWxlcw0KbG9jYWwgTW9kdWxlcw0KbG9jYWwgUHJvY2Vzcw0KbG9jYWwgQ29uZmlndXJhdGlvbg0KbG9jYWwgQ29uZmlnDQoNCmxvY2FsIEV4ZUVOViA9IGdldGZlbnYoMSkNCg0KZnVuY3Rpb24gSG9vazpJbml0KERhdGEpDQogICAgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KDQoJUHJvY2VzcyA9IE1vZHVsZXMuUHJvY2Vzcw0KCUNvbmZpZyA9IE1vZHVsZXMuQ29uZmlnIG9yIENvbmZpZw0KCUNvbmZpZ3VyYXRpb24gPSBNb2R1bGVzLkNvbmZpZ3VyYXRpb24gb3IgQ29uZmlndXJhdGlvbg0KZW5kDQoNCi0tLy8gVGhlIGNhbGxiYWNrIGlzIGV4cGVjdGVkIHRvIHJldHVybiBhIG5pbCB2YWx1ZSBzb21ldGltZXMgd2hpY2ggc2hvdWxkIGJlIGluZ29yZWQNCmxvY2FsIEhvb2tNaWRkbGUgPSBuZXdjY2xvc3VyZShmdW5jdGlvbihPcmlnaW5hbEZ1bmMsIENhbGxiYWNrLCAuLi4pDQoJLS0vLyBJbnZva2UgY2FsbGJhY2sgYW5kIGNoZWNrIGZvciBhIHJlcG9uY2Ugb3RoZXJ3aXNlIGlnbm9yZWQNCglsb2NhbCBSZXR1cm5WYWx1ZXMgPSBDYWxsYmFjayguLi4pDQoJaWYgUmV0dXJuVmFsdWVzIHRoZW4NCgkJcmV0dXJuIFByb2Nlc3M6VW5wYWNrKFJldHVyblZhbHVlcykNCgllbmQNCg0KCS0tLy8gSW52b2tlIG9yaWduYWwgZnVuY3Rpb24NCglyZXR1cm4gT3JpZ2luYWxGdW5jKC4uLikNCmVuZCkNCg0KLS0vLyBnZXRyYXdtZXRhdGFibGUNCmZ1bmN0aW9uIEhvb2s6UmVwbGFjZU1ldGFNZXRob2QoT2JqZWN0OiBJbnN0YW5jZSwgQ2FsbDogc3RyaW5nLCBDYWxsYmFjazogTWV0YUNhbGxiYWNrKTogTWV0YUNhbGxiYWNrDQoJbG9jYWwgTWV0YXRhYmxlID0gZ2V0cmF3bWV0YXRhYmxlKE9iamVjdCkNCglsb2NhbCBPcmlnaW5hbEZ1bmMgPSByYXdnZXQoTWV0YXRhYmxlLCBDYWxsKQ0KCQ0KCS0tLy8gUmVwbGFjZSBmdW5jdGlvbg0KCXNldHJlYWRvbmx5KE1ldGF0YWJsZSwgZmFsc2UpDQoJcmF3c2V0KE1ldGF0YWJsZSwgQ2FsbCwgbmV3Y2Nsb3N1cmUoZnVuY3Rpb24oLi4uKQ0KCQlyZXR1cm4gSG9va01pZGRsZShPcmlnaW5hbEZ1bmMsIENhbGxiYWNrLCAuLi4pDQoJZW5kKSkNCglzZXRyZWFkb25seShNZXRhdGFibGUsIHRydWUpDQoNCglyZXR1cm4gT3JpZ2luYWxGdW5jDQplbmQNCg0KLS0vLyBob29rZnVuY3Rpb24NCmZ1bmN0aW9uIEhvb2s6SG9va0Z1bmN0aW9uKEZ1bmM6ICguLi5hbnkpIC0+IC4uLmFueSwgQ2FsbGJhY2s6ICguLi5hbnkpIC0+IC4uLmFueSkNCglsb2NhbCBPcmlnaW5hbEZ1bmMNCglPcmlnaW5hbEZ1bmMgPSBob29rZnVuY3Rpb24oRnVuYywgZnVuY3Rpb24oLi4uKQ0KCQlyZXR1cm4gSG9va01pZGRsZShPcmlnaW5hbEZ1bmMsIENhbGxiYWNrLCAuLi4pDQoJZW5kKQ0KCXJldHVybiBPcmlnaW5hbEZ1bmMNCmVuZA0KDQotLS8vIGhvb2ttZXRhbWV0aG9kDQpmdW5jdGlvbiBIb29rOkhvb2tNZXRhQ2FsbChPYmplY3Q6IEluc3RhbmNlLCBDYWxsOiBzdHJpbmcsIENhbGxiYWNrOiBNZXRhQ2FsbGJhY2spOiBNZXRhQ2FsbGJhY2sNCglsb2NhbCBPcmlnaW5hbEZ1bmMNCglPcmlnaW5hbEZ1bmMgPSBob29rbWV0YW1ldGhvZChPYmplY3QsIENhbGwsIG5ld2NjbG9zdXJlKGZ1bmN0aW9uKC4uLikNCgkJcmV0dXJuIEhvb2tNaWRkbGUoT3JpZ2luYWxGdW5jLCBDYWxsYmFjaywgLi4uKQ0KCWVuZCkpDQoJcmV0dXJuIE9yaWdpbmFsRnVuYw0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SG9va01ldGFNZXRob2QoT2JqZWN0OiBJbnN0YW5jZSwgQ2FsbDogc3RyaW5nLCBDYWxsYmFjazogTWV0YUNhbGxiYWNrKTogTWV0YUNhbGxiYWNrDQoJLS0vLyBHZXRyYXdtZXRhdGFibGUNCglpZiBDb25maWcuUmVwbGFjZU1ldGFDYWxsRnVuYyB0aGVuDQoJCXJldHVybiBzZWxmOlJlcGxhY2VNZXRhTWV0aG9kKE9iamVjdCwgQ2FsbCwgQ2FsbGJhY2spDQoJZW5kDQoJDQoJLS0vLyBIb29rbWV0YW1ldGhvZA0KCXJldHVybiBzZWxmOkhvb2tNZXRhQ2FsbChPYmplY3QsIENhbGwsIENhbGxiYWNrKQ0KZW5kDQoNCi0tLy8gVGhpcyBpbmNsdWRlcyBhIGZldyBwYXRjaGVzIGZvciBleGVjdXRvciBmdW5jdGlvbnMgdGhhdCByZXN1bHQgaW4gZGV0ZWN0aW9uDQotLS8vIFRoaXMgaXNuJ3QgYnVsbGV0cHJvb2Ygc2luY2Ugc29tZSBmdW5jdGlvbnMgbGlrZSBob29rZnVuY3Rpb24gSSBjYW4ndCBwYXRjaA0KLS0vLyBCeSB0aGUgd2F5LCB0aGFua3MgZm9yIGNvcHlpbmcgdGhpcyBndXlzISBTdXBlciBhcHByZWNpYXRlIHRoZSBjb3B5Y2F0DQpmdW5jdGlvbiBIb29rOlBhdGNoRnVuY3Rpb25zKCkNCgktLS8vIENoZWNrIGlmIHRoaXMgZnVuY3Rpb24gaXMgZGlzYWJsZWQgaW4gdGhlIGNvbmZpZ3VyYXRpb24NCglpZiBDb25maWcuTm9GdW5jdGlvblBhdGNoaW5nIHRoZW4gcmV0dXJuIGVuZA0KDQoJbG9jYWwgUGF0Y2hlcyA9IHsNCgkJLS0vLyBFcnJvciBkZXRlY3Rpb24gcGF0Y2gNCgkJLS0vLyBob29rZnVuY3Rpb24gbWF5IHN0aWxsIGJlIGRldGVjdGVkIGRlcGVuZGluZyBvbiB0aGUgZXhlY3V0b3INCgkJW3BjYWxsXSA9ICBmdW5jdGlvbihPbGRGdW5jLCBGdW5jLCAuLi4pDQoJCQlsb2NhbCBSZXNwb25jZSA9IHtPbGRGdW5jKEZ1bmMsIC4uLil9DQoJCQlsb2NhbCBTdWNjZXNzLCBFcnJvciA9IFJlc3BvbmNlWzFdLCBSZXNwb25jZVsyXQ0KCQkJbG9jYWwgSXNDID0gaXNjY2xvc3VyZShGdW5jKQ0KDQoJCQktLS8vIFBhdGNoIGMtY2xvc3VyZSBlcnJvciBkZXRlY3Rpb24NCgkJCWlmIFN1Y2Nlc3MgPT0gZmFsc2UgYW5kIElzQyB0aGVuDQoJCQkJbG9jYWwgTmV3RXJyb3IgPSBQcm9jZXNzOkNsZWFuQ0Vycm9yKEVycm9yKQ0KCQkJCVJlc3BvbmNlWzJdID0gTmV3RXJyb3INCgkJCWVuZA0KDQoJCQktLS8vIFN0YWNrLW92ZXJmbG93IGRldGVjdGlvbiBwYXRjaA0KCQkJaWYgU3VjY2VzcyA9PSBmYWxzZSBhbmQgbm90IElzQyBhbmQgRXJyb3I6ZmluZCgiQyBzdGFjayBvdmVyZmxvdyIpIHRoZW4NCgkJCQlsb2NhbCBUcmFjZXRhYmxlID0gRXJyb3I6c3BsaXQoIjoiKQ0KCQkJCWxvY2FsIENhbGxlciwgTGluZSA9IFRyYWNldGFibGVbMV0sIFRyYWNldGFibGVbMl0NCg0KCQkJCWxvY2FsIENvdW50ID0gUHJvY2VzczpDb3VudE1hdGNoZXMoRXJyb3IsIENhbGxlcikNCgkJCQlpZiBDb3VudCA9PSAxOTYgdGhlbg0KCQkJCQlSZXNwb25jZVsyXSA9IGB7Q2FsbGVyfTp7TGluZX06IHtFcnJvcn1gDQoJCQkJZW5kDQoJCQllbmQNCg0KCQkJcmV0dXJuIFByb2Nlc3M6VW5wYWNrKFJlc3BvbmNlKQ0KCQllbmQsDQoJCVtnZXRmZW52XSA9IGZ1bmN0aW9uKE9sZEZ1bmMsIExldmVsOiBudW1iZXIsIC4uLikNCgkJCUxldmVsID0gTGV2ZWwgb3IgMQ0KDQoJCQktLS8vIFByZXZlbnQgY2F0cHVyZSBvZiBleGVjdXRvcidzIGVudg0KCQkJaWYgdHlwZShMZXZlbCkgPT0gIm51bWJlciIgdGhlbg0KCQkJCUxldmVsICs9IDINCgkJCWVuZA0KDQoJCQlsb2NhbCBSZXNwb25jZSA9IHtPbGRGdW5jKExldmVsLCAuLi4pfQ0KCQkJbG9jYWwgRU5WID0gUmVzcG9uY2VbMV0NCg0KCQkJLS0vLyBfX3Rvc3RyaW5nIEVOViBkZXRlY3Rpb24gcGF0Y2gNCgkJCWlmIG5vdCBjaGVja2NhbGxlcigpIGFuZCBFTlYgPT0gRXhlRU5WIHRoZW4NCgkJCQlyZXR1cm4gT2xkRnVuYyg5OTk5OTksIC4uLikNCgkJCWVuZA0KDQoJCQlyZXR1cm4gUHJvY2VzczpVbnBhY2soUmVzcG9uY2UpDQoJCWVuZA0KCX0NCg0KCS0tLy8gSG9vayBlYWNoIGZ1bmN0aW9uDQoJZm9yIEZ1bmMsIENhbGxCYWNrIGluIFBhdGNoZXMgZG8NCgkJbG9jYWwgT2xkRnVuYyA9IGNsb25lZnVuY3Rpb24oRnVuYykNCgkJaG9va2Z1bmN0aW9uKEZ1bmMsIG5ld2NjbG9zdXJlKGZ1bmN0aW9uKC4uLikNCgkJCXJldHVybiBDYWxsQmFjayhPbGRGdW5jLCAuLi4pDQoJCWVuZCkpDQoJZW5kDQplbmQNCg0KbG9jYWwgZnVuY3Rpb24gTWVyZ2UoQmFzZTogdGFibGUsIE5ldzogdGFibGUpDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgTmV3IGRvDQoJCUJhc2VbS2V5XSA9IFZhbHVlDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpSdW5PbkFjdG9ycyhDb2RlOiBzdHJpbmcsIENoYW5uZWxJZDogbnVtYmVyKQ0KCWlmIG5vdCBnZXRhY3RvcnMgdGhlbiByZXR1cm4gZW5kDQoJDQoJbG9jYWwgQWN0b3JzID0gZ2V0YWN0b3JzKCkNCglpZiBub3QgQWN0b3JzIHRoZW4gcmV0dXJuIGVuZA0KDQoJd3JpdGVmaWxlKCJBY3RvckNvZGUubHVhIiwgQ29kZSkNCgkNCglmb3IgXywgQWN0b3IgaW4gQWN0b3JzIGRvIA0KCQlydW5fb25fYWN0b3IoQWN0b3IsIENvZGUsIENoYW5uZWxJZCkNCgllbmQNCmVuZA0KDQpsb2NhbCBmdW5jdGlvbiBQcm9jZXNzUmVtb3RlKE9yaWdpbmFsRnVuYywgTWV0YU1ldGhvZDogc3RyaW5nLCBzZWxmLCBNZXRob2Q6IHN0cmluZywgLi4uKQ0KCXJldHVybiBQcm9jZXNzOlByb2Nlc3NSZW1vdGUoew0KCQlSZW1vdGUgPSBzZWxmLA0KCQlNZXRob2QgPSBNZXRob2QsDQoJCU9yaWdpbmFsRnVuYyA9IE9yaWdpbmFsRnVuYywNCgkJTWV0YU1ldGhvZCA9IE1ldGFNZXRob2QsDQoJCVRyYW5zZmVyVHlwZSA9ICJTZW5kIiwNCgkJSXNFeHBsb2l0ID0gY2hlY2tjYWxsZXIoKQ0KCX0sIC4uLikNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkhvb2tSZW1vdGVUeXBlSW5kZXgoQ2xhc3NOYW1lOiBzdHJpbmcsIEZ1bmNOYW1lOiBzdHJpbmcpDQoJbG9jYWwgUmVtb3RlID0gSW5zdGFuY2UubmV3KENsYXNzTmFtZSkNCglsb2NhbCBGdW5jID0gUmVtb3RlW0Z1bmNOYW1lXQ0KCWxvY2FsIE9yaWdpbmFsRnVuYw0KDQoJLS0vLyBSZW1vdGVzIHdpbGwgc2hhcmUgdGhlIHNhbWUgZnVuY3Rpb25zDQoJLS0vLyAJRm9yIGV4YW1wbGUgRmlyZVNlcnZlciB3aWxsIGJlIGlkZW50aWNhbA0KCS0tLy8gQWRkaW9uYWxseSwgdGhpcyBpcyBmb3IgX19pbmRleCBjYWxscy4NCgktLS8vIAlBIF9fbmFtZWNhbGwgaG9vayB3aWxsIG5vdCBkZXRlY3QgdGhpcw0KCU9yaWdpbmFsRnVuYyA9IHNlbGY6SG9va0Z1bmN0aW9uKEZ1bmMsIGZ1bmN0aW9uKHNlbGYsIC4uLikNCgkJLS0vLyBDaGVjayBpZiB0aGUgT2JqZWN0IGlzIGFsbG93ZWQgDQoJCWlmIG5vdCBQcm9jZXNzOlJlbW90ZUFsbG93ZWQoc2VsZiwgIlNlbmQiLCBGdW5jTmFtZSkgdGhlbiByZXR1cm4gZW5kDQoNCgkJLS0vLyBQcm9jZXNzIHRoZSByZW1vdGUgZGF0YQ0KCQlyZXR1cm4gUHJvY2Vzc1JlbW90ZShPcmlnaW5hbEZ1bmMsICJfX2luZGV4Iiwgc2VsZiwgRnVuY05hbWUsIC4uLikNCgllbmQpDQplbmQNCg0KZnVuY3Rpb24gSG9vazpIb29rUmVtb3RlSW5kZXhlcygpDQoJbG9jYWwgUmVtb3RlQ2xhc3NEYXRhID0gUHJvY2Vzcy5SZW1vdGVDbGFzc0RhdGENCglmb3IgQ2xhc3NOYW1lLCBEYXRhIGluIFJlbW90ZUNsYXNzRGF0YSBkbw0KCQlsb2NhbCBGdW5jTmFtZSA9IERhdGEuU2VuZFsxXQ0KCQlzZWxmOkhvb2tSZW1vdGVUeXBlSW5kZXgoQ2xhc3NOYW1lLCBGdW5jTmFtZSkNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkJlZ2luSG9va3MoKQ0KCS0tLy8gSG9vayBSZW1vdGUgZnVuY3Rpb25zDQoJc2VsZjpIb29rUmVtb3RlSW5kZXhlcygpDQoNCgktLS8vIE5hbWVjYWxsIGhvb2sNCglsb2NhbCBPcmlnaW5hbE5hbWVDYWxsDQoJT3JpZ2luYWxOYW1lQ2FsbCA9IHNlbGY6SG9va01ldGFNZXRob2QoZ2FtZSwgIl9fbmFtZWNhbGwiLCBmdW5jdGlvbihzZWxmLCAuLi4pDQoJCWxvY2FsIE1ldGhvZCA9IGdldG5hbWVjYWxsbWV0aG9kKCkNCgkJcmV0dXJuIFByb2Nlc3NSZW1vdGUoT3JpZ2luYWxOYW1lQ2FsbCwgIl9fbmFtZWNhbGwiLCBzZWxmLCBNZXRob2QsIC4uLikNCgllbmQpDQoNCglNZXJnZShzZWxmLCB7DQoJCU9yaWduYWxOYW1lY2FsbCA9IE9yaWdpbmFsTmFtZUNhbGwsDQoJCS0tT3JpZ25hbEluZGV4ID0gT2kNCgl9KQ0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6SW5kZXgoT2JqZWN0OiBJbnN0YW5jZSwgS2V5OiBzdHJpbmcpDQoJcmV0dXJuIE9iamVjdFtLZXldDQplbmQNCg0KZnVuY3Rpb24gSG9vazpQdXNoQ29uZmlnKE92ZXJ3cml0ZXMpDQogICAgTWVyZ2Uoc2VsZiwgT3ZlcndyaXRlcykNCmVuZA0KDQpmdW5jdGlvbiBIb29rOkhvb2tDbGllbnRJbnZva2UoUmVtb3RlLCBNZXRob2QsIENhbGxiYWNrKQ0KCWxvY2FsIFN1Y2Nlc3MsIEZ1bmN0aW9uID0gcGNhbGwoZnVuY3Rpb24oKQ0KCQlyZXR1cm4gZ2V0Y2FsbGJhY2t2YWx1ZShSZW1vdGUsIE1ldGhvZCkNCgllbmQpDQoNCgktLS8vIFNvbWUgZXhlY3V0b3JzIGxpa2UgUG90YXNzaXVtIHdpbGwgdGhyb3cgYSBlcnJvciBpZiB0aGUgQ2FsbGJhY2sgdmFsdWUgaXMgbmlsDQoJaWYgbm90IFN1Y2Nlc3MgdGhlbiByZXR1cm4gZW5kDQoJDQoJbG9jYWwgSG9va1N1Y2Nlc3MgPSBwY2FsbChmdW5jdGlvbigpDQoJCXNlbGY6SG9va0Z1bmN0aW9uKEZ1bmN0aW9uLCBmdW5jdGlvbihzZWxmLCAuLi4pDQoJCQlyZXR1cm4gQ2FsbGJhY2soLi4uKQ0KCQllbmQpDQoJZW5kKQ0KCQ0KCWlmIEhvb2tTdWNjZXNzIHRoZW4gcmV0dXJuIGVuZA0KCVJlbW90ZVtNZXRob2RdID0gQ2FsbGJhY2sNCmVuZA0KDQpmdW5jdGlvbiBIb29rOk11bHRpQ29ubmVjdChSZW1vdGVzKQ0KCWZvciBfLCBSZW1vdGUgaW4gbmV4dCwgUmVtb3RlcyBkbw0KCQlzZWxmOkNvbm5lY3RDbGllbnRSZWNpdmUoUmVtb3RlKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6Q29ubmVjdENsaWVudFJlY2l2ZShSZW1vdGUpDQoJLS0vLyBDaGVjayBpZiB0aGUgUmVtb3RlIGNsYXNzIGlzIGFsbG93ZWQgZm9yIHJlY2VpdmluZw0KCWxvY2FsIEFsbG93ZWQgPSBQcm9jZXNzOlJlbW90ZUFsbG93ZWQoUmVtb3RlLCAiUmVjZWl2ZSIpDQoJaWYgbm90IEFsbG93ZWQgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIENoZWNrIGlmIHRoZSBPYmplY3QgaGFzIFJlbW90ZSBjbGFzcyBkYXRhDQogICAgbG9jYWwgQ2xhc3NEYXRhID0gUHJvY2VzczpHZXRDbGFzc0RhdGEoUmVtb3RlKQ0KICAgIGxvY2FsIElzUmVtb3RlRnVuY3Rpb24gPSBDbGFzc0RhdGEuSXNSZW1vdGVGdW5jdGlvbg0KCWxvY2FsIE5vUmVjaXZlSG9vayA9IENsYXNzRGF0YS5Ob1JlY2l2ZUhvb2sNCiAgICBsb2NhbCBNZXRob2QgPSBDbGFzc0RhdGEuUmVjZWl2ZVsxXQ0KCWxvY2FsIFByZXZpb3VzRnVuY3Rpb24gPSBuaWwNCg0KCS0tLy8gQ2hlY2sgaWYgdGhlIFJlY2l2ZSBzaG91bGQgYmUgaG9va2VkDQoJaWYgTm9SZWNpdmVIb29rIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBOZXcgY2FsbGJhY2sgZnVuY3Rpb24NCglsb2NhbCBmdW5jdGlvbiBDYWxsYmFjayguLi4pDQogICAgICAgIHJldHVybiBQcm9jZXNzOlByb2Nlc3NSZW1vdGUoew0KICAgICAgICAgICAgUmVtb3RlID0gUmVtb3RlLA0KICAgICAgICAgICAgTWV0aG9kID0gTWV0aG9kLA0KICAgICAgICAgICAgT3JpZ2luYWxGdW5jID0gUHJldmlvdXNGdW5jdGlvbiwNCiAgICAgICAgICAgIElzUmVjZWl2ZSA9IHRydWUsDQogICAgICAgICAgICBNZXRhTWV0aG9kID0gIkNvbm5lY3QiLA0KCQkJSXNFeHBsb2l0ID0gY2hlY2tjYWxsZXIoKQ0KICAgICAgICB9LCAuLi4pDQoJZW5kDQoNCgktLS8vIENvbm5lY3QgcmVtb3RlDQoJaWYgbm90IElzUmVtb3RlRnVuY3Rpb24gdGhlbg0KICAgCQlSZW1vdGVbTWV0aG9kXTpDb25uZWN0KENhbGxiYWNrKQ0KCWVsc2UgLS0gUmVtb3RlIGZ1bmN0aW9ucw0KCQlzZWxmOkhvb2tDbGllbnRJbnZva2UoUmVtb3RlLCBNZXRob2QsIENhbGxiYWNrKQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEhvb2s6QmVnaW5TZXJ2aWNlKExpYnJhcmllcywgRXh0cmFEYXRhLCBDaGFubmVsSWQsIC4uLikNCgktLS8vIExpYnJhcmVpcw0KCWxvY2FsIFJldHVyblNwb29mcyA9IExpYnJhcmllcy5SZXR1cm5TcG9vZnMNCglsb2NhbCBQcm9jZXNzTGliID0gTGlicmFyaWVzLlByb2Nlc3MNCglsb2NhbCBDb21tdW5pY2F0aW9uID0gTGlicmFyaWVzLkNvbW11bmljYXRpb24NCglsb2NhbCBHZW5lcmF0aW9uID0gTGlicmFyaWVzLkdlbmVyYXRpb24NCglsb2NhbCBDb25maWcgPSBMaWJyYXJpZXMuQ29uZmlnDQoNCgktLS8vIENoZWNrIGZvciBjb25maWd1cmF0aW9uIG92ZXJ3cml0ZXMNCglQcm9jZXNzTGliOkNoZWNrQ29uZmlnKENvbmZpZykNCg0KCS0tLy8gSW5pdCBkYXRhDQoJbG9jYWwgSW5pdERhdGEgPSB7DQoJCU1vZHVsZXMgPSB7DQoJCQlSZXR1cm5TcG9vZnMgPSBSZXR1cm5TcG9vZnMsDQoJCQlHZW5lcmF0aW9uID0gR2VuZXJhdGlvbiwNCgkJCUNvbW11bmljYXRpb24gPSBDb21tdW5pY2F0aW9uLA0KCQkJUHJvY2VzcyA9IFByb2Nlc3NMaWIsDQoJCQlDb25maWcgPSBDb25maWcsDQoJCQlIb29rID0gc2VsZg0KCQl9LA0KCQlTZXJ2aWNlcyA9IHNldG1ldGF0YWJsZSh7fSwgew0KCQkJX19pbmRleCA9IGZ1bmN0aW9uKHNlbGYsIE5hbWU6IHN0cmluZyk6IEluc3RhbmNlDQoJCQkJbG9jYWwgU2VydmljZSA9IGdhbWU6R2V0U2VydmljZShOYW1lKQ0KCQkJCXJldHVybiBjbG9uZXJlZihTZXJ2aWNlKQ0KCQkJZW5kLA0KCQl9KQ0KCX0NCg0KCS0tLy8gSW5pdCBsaWJyYXJpZXMNCglDb21tdW5pY2F0aW9uOkluaXQoSW5pdERhdGEpDQoJUHJvY2Vzc0xpYjpJbml0KEluaXREYXRhKQ0KDQoJLS0vLyBDb21tdW5pY2F0aW9uIGNvbmZpZ3VyYXRpb24NCglsb2NhbCBDaGFubmVsLCBJc1dyYXBwZWQgPSBDb21tdW5pY2F0aW9uOkdldENvbW1DaGFubmVsKENoYW5uZWxJZCkNCglDb21tdW5pY2F0aW9uOlNldENoYW5uZWwoQ2hhbm5lbCkNCglDb21tdW5pY2F0aW9uOkFkZFR5cGVDYWxsYmFja3Moew0KCQlbIlJlbW90ZURhdGEiXSA9IGZ1bmN0aW9uKElkOiBzdHJpbmcsIFJlbW90ZURhdGEpDQoJCQlQcm9jZXNzTGliOlNldFJlbW90ZURhdGEoSWQsIFJlbW90ZURhdGEpDQoJCWVuZCwNCgkJWyJBbGxSZW1vdGVEYXRhIl0gPSBmdW5jdGlvbihLZXk6IHN0cmluZywgVmFsdWUpDQoJCQlQcm9jZXNzTGliOlNldEFsbFJlbW90ZURhdGEoS2V5LCBWYWx1ZSkNCgkJZW5kLA0KCQlbIlVwZGF0ZVNwb29mcyJdID0gZnVuY3Rpb24oQ29udGVudDogc3RyaW5nKQ0KCQkJbG9jYWwgU3Bvb2ZzID0gbG9hZHN0cmluZyhDb250ZW50KSgpDQoJCQlQcm9jZXNzTGliOlNldE5ld1JldHVyblNwb29mcyhTcG9vZnMpDQoJCWVuZA0KCX0pDQoJDQoJLS0vLyBQcm9jZXNzIGNvbmZpZ3VyYXRpb24NCglQcm9jZXNzTGliOlNldENoYW5uZWwoQ2hhbm5lbCwgSXNXcmFwcGVkKQ0KCVByb2Nlc3NMaWI6U2V0RXh0cmFEYXRhKEV4dHJhRGF0YSkNCg0KCS0tLy8gSG9vayBjb25maWd1cmF0aW9uDQoJc2VsZjpJbml0KEluaXREYXRhKQ0KCXNlbGY6UGF0Y2hGdW5jdGlvbnMoKQ0KCXNlbGY6QmVnaW5Ib29rcygpDQplbmQNCg0KZnVuY3Rpb24gSG9vazpMb2FkTWV0YUhvb2tzKEFjdG9yQ29kZTogc3RyaW5nLCBDaGFubmVsSWQ6IG51bWJlcikNCgktLS8vIEhvb2sgYWN0b3JzDQoJaWYgbm90IENvbmZpZ3VyYXRpb24uTm9BY3RvcnMgdGhlbg0KCQl3YWl0KCkNCgkJc2VsZjpSdW5PbkFjdG9ycyhBY3RvckNvZGUsIENoYW5uZWxJZCkNCgllbmQNCg0KCS0tLy8gSG9vayBjdXJyZW50IHRocmVhZA0KCXNlbGY6QmVnaW5TZXJ2aWNlKE1vZHVsZXMsIG5pbCwgQ2hhbm5lbElkKSANCmVuZA0KDQpmdW5jdGlvbiBIb29rOkxvYWRSZWNlaXZlSG9va3MoKQ0KCWxvY2FsIE5vUmVjZWl2ZUhvb2tpbmcgPSBDb25maWcuTm9SZWNlaXZlSG9va2luZw0KCWxvY2FsIEJsYWNrTGlzdGVkU2VydmljZXMgPSBDb25maWcuQmxhY2tMaXN0ZWRTZXJ2aWNlcw0KDQoJaWYgTm9SZWNlaXZlSG9va2luZyB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gUmVtb3RlIGFkZGVkDQoJZ2FtZS5EZXNjZW5kYW50QWRkZWQ6Q29ubmVjdChmdW5jdGlvbihSZW1vdGUpIC0tIFRPRE8NCgkJc2VsZjpDb25uZWN0Q2xpZW50UmVjaXZlKFJlbW90ZSkNCgllbmQpDQoNCgktLS8vIENvbGxlY3QgcmVtb3RlcyB3aXRoIG5pbCBwYXJlbnRzDQoJc2VsZjpNdWx0aUNvbm5lY3QoZ2V0bmlsaW5zdGFuY2VzKCkpDQoNCgktLS8vIFNlYXJjaCBmb3IgcmVtb3Rlcw0KCWZvciBfLCBTZXJ2aWNlIGluIG5leHQsIGdhbWU6R2V0Q2hpbGRyZW4oKSBkbw0KCQlpZiB0YWJsZS5maW5kKEJsYWNrTGlzdGVkU2VydmljZXMsIFNlcnZpY2UuQ2xhc3NOYW1lKSB0aGVuIGNvbnRpbnVlIGVuZA0KCQlzZWxmOk11bHRpQ29ubmVjdChTZXJ2aWNlOkdldERlc2NlbmRhbnRzKCkpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSG9vazpMb2FkSG9va3MoQWN0b3JDb2RlOiBzdHJpbmcsIENoYW5uZWxJZDogbnVtYmVyKQ0KCXNlbGY6TG9hZE1ldGFIb29rcyhBY3RvckNvZGUsIENoYW5uZWxJZCkNCglzZWxmOkxvYWRSZWNlaXZlSG9va3MoKQ0KZW5kDQoNCnJldHVybiBIb29rDQo=]]
},Flags={'base64',
[[dHlwZSBGbGFnVmFsdWUgPSBib29sZWFufG51bWJlcnxhbnkNCnR5cGUgRmxhZyA9IHsNCiAgICBWYWx1ZTogRmxhZ1ZhbHVlLA0KICAgIExhYmVsOiBzdHJpbmcsDQogICAgQ2F0ZWdvcnk6IHN0cmluZw0KfQ0KdHlwZSBGbGFncyA9IHsNCiAgICBbc3RyaW5nXTogRmxhZw0KfQ0KdHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCmxvY2FsIE1vZHVsZSA9IHsNCiAgICBGbGFncyA9IHsNCiAgICAgICAgUHJldmVudFJlbmFtaW5nID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIk5vIHJlbmFtaW5nIiwNCiAgICAgICAgfSwNCiAgICAgICAgUHJldmVudFBhcmVudGluZyA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJObyBwYXJlbnRpbmciLA0KICAgICAgICB9LA0KICAgICAgICBTZWxlY3ROZXdlc3QgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IGZhbHNlLA0KICAgICAgICAgICAgTGFiZWwgPSAiQXV0byBzZWxlY3QgbmV3ZXN0IiwNCiAgICAgICAgfSwNCiAgICAgICAgRGVjb21waWxlUG9wb3V0ID0geyAtLSBMb3ZyZSBTSFVTSA0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIlBvcC1vdXQgZGVjb21waWxlcyIsDQogICAgICAgIH0sDQogICAgICAgIElnbm9yZU5pbCA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gdHJ1ZSwNCiAgICAgICAgICAgIExhYmVsID0gIklnbm9yZSBuaWwgcGFyZW50cyIsDQogICAgICAgIH0sDQogICAgICAgIExvZ0V4cGxvaXQgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJMb2cgZXhwbG9pdCBjYWxscyIsDQogICAgICAgIH0sDQogICAgICAgIExvZ1JlY2l2ZXMgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJMb2cgcmVjZWl2ZXMiLA0KICAgICAgICB9LA0KICAgICAgICBQYXVzZWQgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IGZhbHNlLA0KICAgICAgICAgICAgTGFiZWwgPSAiUGF1c2VkIiwNCiAgICAgICAgICAgIEtleWJpbmQgPSBFbnVtLktleUNvZGUuUQ0KICAgICAgICB9LA0KICAgICAgICBLZXliaW5kc0VuYWJsZWQgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJLZXliaW5kcyBFbmFibGVkIg0KICAgICAgICB9LA0KICAgICAgICBGaW5kU3RyaW5nRm9yTmFtZSA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gdHJ1ZSwNCiAgICAgICAgICAgIExhYmVsID0gIkZpbmQgYXJnIGZvciBuYW1lIg0KICAgICAgICB9LA0KICAgICAgICBVaVZpc2libGUgPSB7DQogICAgICAgICAgICBWYWx1ZSA9IHRydWUsDQogICAgICAgICAgICBMYWJlbCA9ICJVSSBWaXNpYmxlIiwNCiAgICAgICAgICAgIEtleWJpbmQgPSBFbnVtLktleUNvZGUuUA0KICAgICAgICB9LA0KICAgICAgICBOb1RyZWVOb2RlcyA9IHsNCiAgICAgICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgICAgICBMYWJlbCA9ICJObyBncm91cGluZyINCiAgICAgICAgfSwNCiAgICAgICAgVGFibGVBcmdzID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIlRhYmxlIGFyZ3MiDQogICAgICAgIH0sDQogICAgICAgIE5vVmFyaWFibGVzID0gew0KICAgICAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgICAgIExhYmVsID0gIk5vIGNvbXByZXNzaW9uIg0KICAgICAgICB9DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0RmxhZ1ZhbHVlKE5hbWU6IHN0cmluZyk6IEZsYWdWYWx1ZQ0KICAgIGxvY2FsIEZsYWcgPSBzZWxmOkdldEZsYWcoTmFtZSkNCiAgICByZXR1cm4gRmxhZy5WYWx1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpTZXRGbGFnVmFsdWUoTmFtZTogc3RyaW5nLCBWYWx1ZTogRmxhZ1ZhbHVlKQ0KICAgIGxvY2FsIEZsYWcgPSBzZWxmOkdldEZsYWcoTmFtZSkNCiAgICBGbGFnLlZhbHVlID0gVmFsdWUNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6U2V0RmxhZ0NhbGxiYWNrKE5hbWU6IHN0cmluZywgQ2FsbGJhY2s6ICguLi5hbnkpIC0+IC4uLmFueSkNCiAgICBsb2NhbCBGbGFnID0gc2VsZjpHZXRGbGFnKE5hbWUpDQogICAgRmxhZy5DYWxsYmFjayA9IENhbGxiYWNrDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlNldEZsYWdDYWxsYmFja3MoRGljdDoge30pDQogICAgZm9yIE5hbWUsIENhbGxiYWNrOiAoLi4uYW55KSAtPiAuLi5hbnkgaW4gbmV4dCwgRGljdCBkbyANCiAgICAgICAgc2VsZjpTZXRGbGFnQ2FsbGJhY2soTmFtZSwgQ2FsbGJhY2spDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldEZsYWcoTmFtZTogc3RyaW5nKTogRmxhZw0KICAgIGxvY2FsIEFsbEZsYWdzID0gc2VsZjpHZXRGbGFncygpDQogICAgbG9jYWwgRmxhZyA9IEFsbEZsYWdzW05hbWVdDQogICAgYXNzZXJ0KEZsYWcsICJGbGFnIGRvZXMgbm90IGV4aXN0ISIpDQogICAgcmV0dXJuIEZsYWcNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6QWRkRmxhZyhOYW1lOiBzdHJpbmcsIEZsYWc6IEZsYWcpDQogICAgbG9jYWwgQWxsRmxhZ3MgPSBzZWxmOkdldEZsYWdzKCkNCiAgICBBbGxGbGFnc1tOYW1lXSA9IEZsYWcNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0RmxhZ3MoKTogRmxhZ3MNCiAgICByZXR1cm4gc2VsZi5GbGFncw0KZW5kDQoNCnJldHVybiBNb2R1bGU=]]
},Ui={'base64',
[[bG9jYWwgVWkgPSB7DQoJRGVmYXVsdEVkaXRvckNvbnRlbnQgPSBbPVstLVtbIA0KCVdlbGNvbWUgdG8gU2lnbWEgU3B5DQoJQ3JlYXRlZCBieSBkZXBzbyENCg0KCVRoYW5rcyBmb3IgY29weWluZyBteSB3b3JrIGd1eXMhDQpdXSBdPV0sDQoJTG9nTGltaXQgPSAxMDAsDQogICAgU2Vhc29uTGFiZWxzID0geyANCiAgICAgICAgSmFudWFyeSA9ICLim4Qlc+KbhCIsIA0KICAgICAgICBGZWJydWFyeSA9ICLwn4yo77iPJXPwn4+CIiwgDQogICAgICAgIE1hcmNoID0gIvCfjLklc/CfjLoiLCANCiAgICAgICAgQXByaWwgPSAi8J+QoyVz4pyd77iPIiwgDQogICAgICAgIE1heSA9ICLwn5CdJXPwn4yeIiwgDQogICAgICAgIEp1bmUgPSAi8J+MsiVz8J+llSIsIA0KICAgICAgICBKdWx5ID0gIvCfjIolc/CfjIUiLCANCiAgICAgICAgQXVndXN0ID0gIuKYgO+4jyVz8J+MniIsIA0KICAgICAgICBTZXB0ZW1iZXIgPSAi8J+NgSVz8J+NgSIsIA0KICAgICAgICBPY3RvYmVyID0gIvCfjoMlc/CfjoMiLCANCiAgICAgICAgTm92ZW1iZXIgPSAi8J+NgiVz8J+NgiIsIA0KICAgICAgICBEZWNlbWJlciA9ICLwn46EJXPwn46BIg0KICAgIH0sDQoJU2NhbGVzID0gew0KCQlbIk1vYmlsZSJdID0gVURpbTIuZnJvbU9mZnNldCg0ODAsIDI4MCksDQoJCVsiRGVza3RvcCJdID0gVURpbTIuZnJvbU9mZnNldCg2MDAsIDQwMCksDQoJfSwNCiAgICBCYXNlQ29uZmlnID0gew0KICAgICAgICBUaGVtZSA9ICJTaWdtYVNweSIsDQogICAgICAgIE5vU2Nyb2xsID0gdHJ1ZSwNCiAgICB9LA0KCU9wdGlvblR5cGVzID0gew0KCQlib29sZWFuID0gIkNoZWNrYm94IiwNCgl9LA0KCURpc3BsYXlSZW1vdGVJbmZvID0gew0KCQkiTWV0YU1ldGhvZCIsDQoJCSJNZXRob2QiLA0KCQkiUmVtb3RlIiwNCgkJIkNhbGxpbmdTY3JpcHQiLA0KCQkiSXNBY3RvciIsDQoJCSJJZCINCgl9LA0KDQogICAgV2luZG93ID0gbmlsLA0KICAgIFJhbmRvbVNlZWQgPSBSYW5kb20ubmV3KHRpY2soKSksDQoJTG9ncyA9IHNldG1ldGF0YWJsZSh7fSwge19fbW9kZSA9ICJrIn0pLA0KCUxvZ1F1ZXVlID0gc2V0bWV0YXRhYmxlKHt9LCB7X19tb2RlID0gInYifSksDQp9IA0KDQp0eXBlIHRhYmxlID0gew0KCVthbnldOiBhbnkNCn0NCg0KdHlwZSBMb2cgPSB7DQoJUmVtb3RlOiBJbnN0YW5jZSwNCglNZXRob2Q6IHN0cmluZywNCglBcmdzOiB0YWJsZSwNCglJc1JlY2VpdmU6IGJvb2xlYW4/LA0KCU1ldGFNZXRob2Q6IHN0cmluZz8sDQoJT3JpZ25hbEZ1bmM6ICgoLi4uYW55KSAtPiAuLi5hbnkpPywNCglDYWxsaW5nU2NyaXB0OiBJbnN0YW5jZT8sDQoJQ2FsbGluZ0Z1bmN0aW9uOiAoKC4uLmFueSkgLT4gLi4uYW55KT8sDQoJQ2xhc3NEYXRhOiB0YWJsZT8sDQoJUmV0dXJuVmFsdWVzOiB0YWJsZT8sDQoJUmVtb3RlRGF0YTogdGFibGU/LA0KCUlkOiBzdHJpbmcsDQoJU2VsZWN0YWJsZTogdGFibGUsDQoJSGVhZGVyRGF0YTogdGFibGUsDQoJVmFsdWVTd2FwczogdGFibGUsDQoJVGltZXN0YW1wOiBudW1iZXIsDQoJSXNFeHBsb2l0OiBib29sZWFuDQp9DQoNCi0tLy8gQ29tcGF0aWJpbGl0eQ0KbG9jYWwgU2V0Q2xpcGJvYXJkID0gc2V0Y2xpcGJvYXJkIG9yIHRvY2xpcGJvYXJkIG9yIHNldF9jbGlwYm9hcmQNCg0KLS0vLyBMaWJyYXJpZXMNCmxvY2FsIFJlR3VpID0gbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kZXB0aHNvL0RlYXItUmVHdWkvcmVmcy9oZWFkcy9tYWluL1JlR3VpLmx1YScpLCAiUmVHdWkiKSgpDQoNCi0tLy8gU2VydmljZXMNCmxvY2FsIEluc2VydFNlcnZpY2U6IEluc2VydFNlcnZpY2UNCg0KLS0vLyBNb2R1bGVzDQpsb2NhbCBGbGFncw0KbG9jYWwgR2VuZXJhdGlvbg0KbG9jYWwgUHJvY2Vzcw0KbG9jYWwgSG9vayANCmxvY2FsIENvbmZpZw0KbG9jYWwgQ29tbXVuaWNhdGlvbg0KbG9jYWwgRmlsZXMNCg0KbG9jYWwgQWN0aXZlRGF0YSA9IG5pbA0KbG9jYWwgUmVtb3Rlc0NvdW50ID0gMA0KDQpsb2NhbCBUZXh0Rm9udCA9IEZvbnQuZnJvbUVudW0oRW51bS5Gb250LkNvZGUpDQpsb2NhbCBGb250U3VjY2VzcyA9IGZhbHNlDQpsb2NhbCBDb21tQ2hhbm5lbA0KDQpmdW5jdGlvbiBVaTpJbml0KERhdGEpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KCWxvY2FsIFNlcnZpY2VzID0gRGF0YS5TZXJ2aWNlcw0KDQoJLS0vLyBTZXJ2aWNlcw0KCUluc2VydFNlcnZpY2UgPSBTZXJ2aWNlcy5JbnNlcnRTZXJ2aWNlDQoNCgktLS8vIE1vZHVsZXMNCglGbGFncyA9IE1vZHVsZXMuRmxhZ3MNCglHZW5lcmF0aW9uID0gTW9kdWxlcy5HZW5lcmF0aW9uDQoJUHJvY2VzcyA9IE1vZHVsZXMuUHJvY2Vzcw0KCUhvb2sgPSBNb2R1bGVzLkhvb2sNCglDb25maWcgPSBNb2R1bGVzLkNvbmZpZw0KCUNvbW11bmljYXRpb24gPSBNb2R1bGVzLkNvbW11bmljYXRpb24NCglGaWxlcyA9IE1vZHVsZXMuRmlsZXMNCg0KCS0tLy8gUmVHdWkNCglzZWxmOkNoZWNrU2NhbGUoKQ0KCXNlbGY6TG9hZEZvbnQoKQ0KCXNlbGY6TG9hZFJlR3VpKCkNCmVuZA0KDQpmdW5jdGlvbiBVaTpTZXRDb21tQ2hhbm5lbChOZXdDb21tQ2hhbm5lbDogQmluZGFibGVFdmVudCkNCglDb21tQ2hhbm5lbCA9IE5ld0NvbW1DaGFubmVsDQplbmQNCg0KZnVuY3Rpb24gVWk6Q2hlY2tTY2FsZSgpDQoJbG9jYWwgQmFzZUNvbmZpZyA9IHNlbGYuQmFzZUNvbmZpZw0KCWxvY2FsIFNjYWxlcyA9IHNlbGYuU2NhbGVzDQoNCglsb2NhbCBJc01vYmlsZSA9IFJlR3VpOklzTW9iaWxlRGV2aWNlKCkNCglsb2NhbCBEZXZpY2UgPSBJc01vYmlsZSBhbmQgIk1vYmlsZSIgb3IgIkRlc2t0b3AiDQoNCglCYXNlQ29uZmlnLlNpemUgPSBTY2FsZXNbRGV2aWNlXQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNldENsaXBib2FyZChDb250ZW50OiBzdHJpbmcpDQoJU2V0Q2xpcGJvYXJkKENvbnRlbnQpDQplbmQNCg0KZnVuY3Rpb24gVWk6VHVyblNlYXNvbmFsKFRleHQ6IHN0cmluZyk6IHN0cmluZw0KICAgIGxvY2FsIFNlYXNvbkxhYmVscyA9IHNlbGYuU2Vhc29uTGFiZWxzDQogICAgbG9jYWwgTW9udGggPSBvcy5kYXRlKCIlQiIpDQogICAgbG9jYWwgQmFzZSA9IFNlYXNvbkxhYmVsc1tNb250aF0NCg0KICAgIHJldHVybiBCYXNlOmZvcm1hdChUZXh0KQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkxvYWRGb250KCkNCglsb2NhbCBGb250RmlsZSA9IHNlbGYuRm9udEpzb25GaWxlDQoNCgktLS8vIEdldCBGb250RmFjZSBBc3NldElkDQoJbG9jYWwgQXNzZXRJZCA9IEZpbGVzOkxvYWRDdXN0b21hc3NldChGb250RmlsZSkNCglpZiBub3QgQXNzZXRJZCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gQ3JlYXRlIGN1c3RvbSBGb250RmFjZQ0KCWxvY2FsIE5ld0ZvbnQgPSBGb250Lm5ldyhBc3NldElkKQ0KCVRleHRGb250ID0gTmV3Rm9udA0KCUZvbnRTdWNjZXNzID0gdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNldEZvbnRGaWxlKEZvbnRGaWxlOiBzdHJpbmcpDQoJc2VsZi5Gb250SnNvbkZpbGUgPSBGb250RmlsZQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkZvbnRXYXNTdWNjZXNzZnVsKCkNCglpZiBGb250U3VjY2VzcyB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gRXJyb3IgbWVzc2FnZQ0KCXNlbGY6U2hvd01vZGFsKHsNCgkJIlVuZm9ydHVuYXRlbHkgeW91ciBleGVjdXRvciB3YXMgdW5hYmxlIHRvIGRvd25sb2FkIHRoZSBmb250IGFuZCB0aGVyZWZvcmUgc3dpdGNoZWQgdG8gdGhlIERhcmsgdGhlbWUiLA0KCQkiXG5JZiB5b3Ugd291bGQgbGlrZSB0byB1c2UgdGhlIEltR3VpIHRoZW1lLCBcbnBsZWFzZSBkb3dubG9hZCB0aGUgZm9udCAoYXNzZXRzL1Byb2dneUNsZWFuLnR0ZikiLA0KCQkiYW5kIHB1dCBwdXQgaXQgaW4geW91ciB3b3Jrc3BhY2UgZm9sZGVyXG4oU2lnbWEgU3B5L2Fzc2V0cykiDQoJfSkNCmVuZA0KDQpmdW5jdGlvbiBVaTpMb2FkUmVHdWkoKQ0KCWxvY2FsIFRoZW1lQ29uZmlnID0gQ29uZmlnLlRoZW1lQ29uZmlnDQoJVGhlbWVDb25maWcuVGV4dEZvbnQgPSBUZXh0Rm9udA0KDQoJLS0vLyBSZUd1aQ0KCVJlR3VpOkRlZmluZVRoZW1lKCJTaWdtYVNweSIsIFRoZW1lQ29uZmlnKQ0KZW5kDQoNCnR5cGUgQ3JlYXRlQnV0dG9ucyA9IHsNCglCYXNlOiB0YWJsZT8sDQoJQnV0dG9uczogdGFibGUsDQoJTm9UYWJsZTogYm9vbGVhbj8NCn0NCmZ1bmN0aW9uIFVpOkNyZWF0ZUJ1dHRvbnMoUGFyZW50LCBEYXRhOiBDcmVhdGVCdXR0b25zKQ0KCWxvY2FsIEJhc2UgPSBEYXRhLkJhc2Ugb3Ige30NCglsb2NhbCBCdXR0b25zID0gRGF0YS5CdXR0b25zDQoJbG9jYWwgTm9UYWJsZSA9IERhdGEuTm9UYWJsZQ0KDQoJLS0vLyBDcmVhdGUgdGFibGUgbGF5b3V0DQoJaWYgbm90IE5vVGFibGUgdGhlbg0KCQlQYXJlbnQgPSBQYXJlbnQ6VGFibGUoew0KCQkJTWF4Q29sdW1ucyA9IDMNCgkJfSk6TmV4dFJvdygpDQoJZW5kDQoNCgktLS8vIENyZWF0ZSBidXR0b25zDQoJZm9yIF8sIEJ1dHRvbiBpbiBuZXh0LCBCdXR0b25zIGRvDQoJCWxvY2FsIENvbnRhaW5lciA9IFBhcmVudA0KCQlpZiBub3QgTm9UYWJsZSB0aGVuDQoJCQlDb250YWluZXIgPSBQYXJlbnQ6TmV4dENvbHVtbigpDQoJCWVuZA0KDQoJCVJlR3VpOkNoZWNrQ29uZmlnKEJ1dHRvbiwgQmFzZSkNCgkJQ29udGFpbmVyOkJ1dHRvbihCdXR0b24pDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlV2luZG93KE92ZXJ3cml0ZXM6IHRhYmxlKQ0KICAgIGxvY2FsIEJhc2VDb25maWcgPSBzZWxmLkJhc2VDb25maWcNCglsb2NhbCBDb25maWcgPSBQcm9jZXNzOkRlZXBDbG9uZVRhYmxlKEJhc2VDb25maWcpDQoNCgktLS8vIE1lcmdlIG92ZXJ3cml0ZXMNCglpZiBPdmVyd3JpdGVzIHRoZW4NCgkJTWVyZ2UoQ29uZmlnLCBPdmVyd3JpdGVzKQ0KCWVuZA0KCQ0KCS0tLy8gQ3JlYXRlIFdpbmRvdw0KCWxvY2FsIFdpbmRvdyA9IFJlR3VpOldpbmRvdyhDb25maWcpDQoNCgktLS8vIFN3aXRjaCB0byBEYXJrVGhlbWUgaW5zdGVhZCBvZiB0aGUgSW1HdWkgdGhlbWUgaWYgdGhlIGZvbnQgY2Fubm90IGJlIGxvYWRlZA0KCWlmIG5vdCBGb250U3VjY2VzcyB0aGVuIA0KCQlXaW5kb3c6U2V0VGhlbWUoIkRhcmtUaGVtZSIpDQoJZW5kDQoJDQoJLS0vLyBDcmVhdGUgV2luZG93DQoJcmV0dXJuIFdpbmRvdw0KZW5kDQoNCmZ1bmN0aW9uIFVpOkNyZWF0ZU1haW5XaW5kb3coKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGY6Q3JlYXRlV2luZG93KCkNCglzZWxmLldpbmRvdyA9IFdpbmRvdw0KDQoJLS0vLyBDaGVjayBpZiB0aGUgZm9udCB3YXMgc3VjY2Vzc2Z1bGx5IGRvd25sb2FkZWQNCglzZWxmOkZvbnRXYXNTdWNjZXNzZnVsKCkNCglzZWxmOkF1cmFDb3VudGVyU2VydmljZSgpDQoNCgktLS8vIFVpVmlzaWJsZSBmbGFnIGNhbGxiYWNrDQoJRmxhZ3M6U2V0RmxhZ0NhbGxiYWNrKCJVaVZpc2libGUiLCBmdW5jdGlvbihzZWxmLCBWaXNpYmxlKQ0KCQlXaW5kb3c6U2V0VmlzaWJsZShWaXNpYmxlKQ0KCWVuZCkNCg0KCXJldHVybiBXaW5kb3cNCmVuZA0KDQpmdW5jdGlvbiBVaTpTaG93TW9kYWwoTGluZXM6IHRhYmxlKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGYuV2luZG93DQoJbG9jYWwgTWVzc2FnZSA9IHRhYmxlLmNvbmNhdChMaW5lcywgIlxuIikNCg0KCS0tLy8gTW9kYWwgV2luZG93DQoJbG9jYWwgTW9kYWxXaW5kb3cgPSBXaW5kb3c6UG9wdXBNb2RhbCh7DQoJCVRpdGxlID0gIlNpZ21hIFNweSINCgl9KQ0KCU1vZGFsV2luZG93OkxhYmVsKHsNCgkJVGV4dCA9IE1lc3NhZ2UsDQoJCVJpY2hUZXh0ID0gdHJ1ZSwNCgkJVGV4dFdyYXBwZWQgPSB0cnVlDQoJfSkNCglNb2RhbFdpbmRvdzpCdXR0b24oew0KCQlUZXh0ID0gIk9rYXkiLA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCU1vZGFsV2luZG93OkNsb3NlUG9wdXAoKQ0KCQllbmQsDQoJfSkNCmVuZA0KDQpmdW5jdGlvbiBVaTpTaG93VW5zdXBwb3J0ZWRFeGVjdXRvcihOYW1lOiBzdHJpbmcpDQoJVWk6U2hvd01vZGFsKHsNCgkJIlVuZm9ydHVuYXRlbHkgU2lnbWEgU3B5IGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBleGVjdXRvciIsDQoJCSJUaGUgYmVzdCBmcmVlIG9wdGlvbiBpcyBTd2lmdCAoZGlzY29yZC5nZy9nZXRzd2lmdGdnKSIsDQoJCWBcbllvdXIgZXhlY3V0b3I6IHtOYW1lfWANCgl9KQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNob3dVbnN1cHBvcnRlZChGdW5jTmFtZTogc3RyaW5nKQ0KCVVpOlNob3dNb2RhbCh7DQoJCSJVbmZvcnR1bmF0ZWx5IFNpZ21hIFNweSBpcyBub3Qgc3VwcG9ydGVkIG9uIHlvdXIgZXhlY3V0b3IiLA0KCQlgXG5NaXNzaW5nIGZ1bmN0aW9uOiB7RnVuY05hbWV9YA0KCX0pDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlT3B0aW9uc0ZvckRpY3QoUGFyZW50LCBEaWN0OiB0YWJsZSwgQ2FsbGJhY2spDQoJbG9jYWwgT3B0aW9ucyA9IHt9DQoNCgktLS8vIERpY3RvbmFyeSB3cmFwDQoJZm9yIEtleSwgVmFsdWUgaW4gbmV4dCwgRGljdCBkbw0KCQlPcHRpb25zW0tleV0gPSB7DQoJCQlWYWx1ZSA9IFZhbHVlLA0KCQkJTGFiZWwgPSBLZXksDQoJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKF8sIFZhbHVlKQ0KCQkJCURpY3RbS2V5XSA9IFZhbHVlDQoNCgkJCQktLS8vIEludm9rZSBjYWxsYmFjaw0KCQkJCWlmIG5vdCBDYWxsYmFjayB0aGVuIHJldHVybiBlbmQNCgkJCQlDYWxsYmFjaygpDQoJCQllbmQNCgkJfQ0KCWVuZA0KDQoJLS0vLyBDcmVhdGUgZWxlbWVudHMNCglzZWxmOkNyZWF0ZUVsZW1lbnRzKFBhcmVudCwgT3B0aW9ucykNCmVuZA0KDQpmdW5jdGlvbiBVaTpDaGVja0tleWJpbmRMYXlvdXQoQ29udGFpbmVyLCBLZXlDb2RlOiBFbnVtLktleUNvZGUsIENhbGxiYWNrKQ0KCWlmIG5vdCBLZXlDb2RlIHRoZW4gcmV0dXJuIENvbnRhaW5lciBlbmQNCg0KCS0tLy8gQ3JlYXRlIFJvdyBsYXlvdXQNCglDb250YWluZXIgPSBDb250YWluZXI6Um93KHsNCgkJSG9yaXpvbnRhbEZsZXggPSBFbnVtLlVJRmxleEFsaWdubWVudC5TcGFjZUJldHdlZW4NCgl9KQ0KDQoJLS0vLyBBZGQgS2V5YmluZCBlbGVtZW50DQoJQ29udGFpbmVyOktleWJpbmQoew0KCQlMYWJlbCA9ICIiLA0KCQlWYWx1ZSA9IEtleUNvZGUsDQoJCUxheW91dE9yZGVyID0gMiwNCgkJSWdub3JlR2FtZVByb2Nlc3NlZCA9IGZhbHNlLA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCS0tLy8gQ2hlY2sgaWYga2V5YmluZHMgYXJlIGVuYWJsZWQNCgkJCWxvY2FsIEVuYWJsZWQgPSBGbGFnczpHZXRGbGFnVmFsdWUoIktleWJpbmRzRW5hYmxlZCIpDQoJCQlpZiBub3QgRW5hYmxlZCB0aGVuIHJldHVybiBlbmQNCg0KCQkJLS0vLyBJbnZva2UgY2FsbGJhY2sNCgkJCUNhbGxiYWNrKCkNCgkJZW5kLA0KCX0pDQoNCglyZXR1cm4gQ29udGFpbmVyDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlRWxlbWVudHMoUGFyZW50LCBPcHRpb25zKQ0KCWxvY2FsIE9wdGlvblR5cGVzID0gc2VsZi5PcHRpb25UeXBlcw0KCQ0KCS0tLy8gQ3JlYXRlIHRhYmxlIGxheW91dA0KCWxvY2FsIFRhYmxlID0gUGFyZW50OlRhYmxlKHsNCgkJTWF4Q29sdW1ucyA9IDMNCgl9KTpOZXh0Um93KCkNCg0KCWZvciBOYW1lLCBEYXRhIGluIE9wdGlvbnMgZG8NCgkJbG9jYWwgVmFsdWUgPSBEYXRhLlZhbHVlDQoJCWxvY2FsIFR5cGUgPSB0eXBlb2YoVmFsdWUpDQoNCgkJLS0vLyBBZGQgbWlzc2luZyB2YWx1ZXMgaW50byBvcHRpb25zIHRhYmxlDQoJCVJlR3VpOkNoZWNrQ29uZmlnKERhdGEsIHsNCgkJCUNsYXNzID0gT3B0aW9uVHlwZXNbVHlwZV0sDQoJCQlMYWJlbCA9IE5hbWUsDQoJCX0pDQoJCQ0KCQktLS8vIENoZWNrIGlmIGEgZWxlbWVudCB0eXBlIGV4aXN0cyBmb3IgdmFsdWUgdHlwZQ0KCQlsb2NhbCBDbGFzcyA9IERhdGEuQ2xhc3MNCgkJYXNzZXJ0KENsYXNzLCBgTm8ge1R5cGV9IHR5cGUgZXhpc3RzIGZvciBvcHRpb25gKQ0KDQoJCWxvY2FsIENvbnRhaW5lciA9IFRhYmxlOk5leHRDb2x1bW4oKQ0KCQlsb2NhbCBDaGVja2JveCA9IG5pbA0KDQoJCS0tLy8gQ2hlY2sgZm9yIGEga2V5YmluZCBsYXlvdXQNCgkJbG9jYWwgS2V5YmluZCA9IERhdGEuS2V5YmluZA0KCQlDb250YWluZXIgPSBzZWxmOkNoZWNrS2V5YmluZExheW91dChDb250YWluZXIsIEtleWJpbmQsIGZ1bmN0aW9uKCkNCgkJCUNoZWNrYm94OlRvZ2dsZSgpDQoJCWVuZCkNCgkJDQoJCS0tLy8gQ3JlYXRlIGNvbHVtbiBhbmQgZWxlbWVudA0KCQlDaGVja2JveCA9IENvbnRhaW5lcltDbGFzc10oQ29udGFpbmVyLCBEYXRhKQ0KCWVuZA0KZW5kDQoNCi0tLy8gQm9paWlpIHdoYXQgZGlkIHlvdSBzYXkgYWJvdXQgU2lnbWEgU3B5IPCfkoDwn5KADQpmdW5jdGlvbiBVaTpEaXNwbGF5QXVyYSgpDQogICAgbG9jYWwgV2luZG93ID0gc2VsZi5XaW5kb3cNCiAgICBsb2NhbCBSYW5kID0gc2VsZi5SYW5kb21TZWVkDQoNCgktLS8vIEF1cmEgKGJvaWlpaWkpDQogICAgbG9jYWwgQVVSQSA9IFJhbmQ6TmV4dEludGVnZXIoMSwgOTk5OTk5OSkNCiAgICBsb2NhbCBBVVJBREVMQVkgPSBSYW5kOk5leHRJbnRlZ2VyKDEsIDUpDQoNCgktLS8vIFRpdGxlDQoJbG9jYWwgVGl0bGUgPSBgIFNpZ21hIFNweSAtIERlcHNvIHwgQVVSQToge0FVUkF9IGANCglsb2NhbCBTZWFzb25hbCA9IHNlbGY6VHVyblNlYXNvbmFsKFRpdGxlKQ0KICAgIFdpbmRvdzpTZXRUaXRsZShTZWFzb25hbCkNCg0KICAgIHdhaXQoQVVSQURFTEFZKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkF1cmFDb3VudGVyU2VydmljZSgpDQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgIHdoaWxlIHRydWUgZG8NCiAgICAgICAgICAgIHNlbGY6RGlzcGxheUF1cmEoKQ0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlV2luZG93Q29udGVudChXaW5kb3cpDQogICAgLS0vLyBXaW5kb3cgZ3JvdXANCiAgICBsb2NhbCBMYXlvdXQgPSBXaW5kb3c6TGlzdCh7DQogICAgICAgIFVpUGFkZGluZyA9IDIsDQogICAgICAgIEhvcml6b250YWxGbGV4ID0gRW51bS5VSUZsZXhBbGlnbm1lbnQuRmlsbCwNCiAgICAgICAgVmVydGljYWxGbGV4ID0gRW51bS5VSUZsZXhBbGlnbm1lbnQuRmlsbCwNCiAgICAgICAgRmlsbERpcmVjdGlvbiA9IEVudW0uRmlsbERpcmVjdGlvbi5WZXJ0aWNhbCwNCiAgICAgICAgRmlsbCA9IHRydWUNCiAgICB9KQ0KDQoJLS0vLyBSZW1vdGVzIGxpc3QNCiAgICBzZWxmLlJlbW90ZXNMaXN0ID0gTGF5b3V0OkNhbnZhcyh7DQogICAgICAgIFNjcm9sbCA9IHRydWUsDQogICAgICAgIFVpUGFkZGluZyA9IDUsDQogICAgICAgIEF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuTm9uZSwNCiAgICAgICAgRmxleE1vZGUgPSBFbnVtLlVJRmxleE1vZGUuTm9uZSwNCiAgICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxMzAsIDEsIDApDQogICAgfSkNCg0KCS0tLy8gVGFiIGJveA0KCWxvY2FsIEluZm9TZWxlY3RvciA9IExheW91dDpUYWJTZWxlY3Rvcih7DQogICAgICAgIE5vQW5pbWF0aW9uID0gdHJ1ZSwNCiAgICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTMwLCAwLjQsIDApLA0KICAgIH0pDQoNCglzZWxmLkluZm9TZWxlY3RvciA9IEluZm9TZWxlY3Rvcg0KCXNlbGYuQ2FudmFzTGF5b3V0ID0gTGF5b3V0DQoNCgktLS8vIE1ha2UgdGFicw0KCXNlbGY6TWFrZUVkaXRvclRhYihJbmZvU2VsZWN0b3IpDQoJc2VsZjpNYWtlT3B0aW9uc1RhYihJbmZvU2VsZWN0b3IpDQplbmQNCg0KZnVuY3Rpb24gVWk6TWFrZU9wdGlvbnNUYWIoSW5mb1NlbGVjdG9yKQ0KCS0tLy8gVGFiU2VsZWN0b3INCglsb2NhbCBPcHRpb25zVGFiID0gSW5mb1NlbGVjdG9yOkNyZWF0ZVRhYih7DQoJCU5hbWUgPSAiT3B0aW9ucyINCgl9KQ0KDQoJLS0vLyBBZGQgZ2xvYmFsIG9wdGlvbnMNCglPcHRpb25zVGFiOlNlcGFyYXRvcih7VGV4dD0iTG9ncyJ9KQ0KCXNlbGY6Q3JlYXRlQnV0dG9ucyhPcHRpb25zVGFiLCB7DQoJCUJhc2UgPSB7DQoJCQlTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwKSwNCgkJCUF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWSwNCgkJfSwNCgkJQnV0dG9ucyA9IHsNCgkJCXsNCgkJCQlUZXh0ID0gIkNsZWFyIGxvZ3MiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBUYWIgPSBBY3RpdmVEYXRhIGFuZCBBY3RpdmVEYXRhLlRhYiBvciBuaWwNCg0KCQkJCQktLS8vIFJlbW92ZSB0aGUgUmVtb3RlIHRhYg0KCQkJCQlpZiBUYWIgdGhlbg0KCQkJCQkJSW5mb1NlbGVjdG9yOlJlbW92ZVRhYihUYWIpDQoJCQkJCWVuZA0KDQoJCQkJCS0tLy8gQ2xlYXIgYWxsIGxvZyBlbGVtZW50cw0KCQkJCQlBY3RpdmVEYXRhID0gbmlsDQoJCQkJCXNlbGY6Q2xlYXJMb2dzKCkNCgkJCQllbmQsDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiQ2xlYXIgYmxvY2tzIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJUHJvY2VzczpVcGRhdGVBbGxSZW1vdGVEYXRhKCJCbG9ja2VkIiwgZmFsc2UpDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkNsZWFyIGV4Y2x1ZGVzIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJUHJvY2VzczpVcGRhdGVBbGxSZW1vdGVEYXRhKCJFeGNsdWRlZCIsIGZhbHNlKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IERpc2NvcmQiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlzZWxmOlNldENsaXBib2FyZCgiaHR0cHM6Ly9kaXNjb3JkLmdnL3M5bmdtVURXZ2IiKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IEdpdGh1YiIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCXNlbGY6U2V0Q2xpcGJvYXJkKCJodHRwczovL2dpdGh1Yi5jb20vZGVwdGhzby9TaWdtYS1TcHkiKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJFZGl0IFNwb29mcyIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCXNlbGY6RWRpdEZpbGUoIlJldHVybiBzcG9vZnMubHVhIiwgdHJ1ZSwgZnVuY3Rpb24oV2luZG93LCBDb250ZW50OiBzdHJpbmcpDQoJCQkJCQlXaW5kb3c6Q2xvc2UoKQ0KCQkJCQkJQ29tbUNoYW5uZWw6RmlyZSgiVXBkYXRlU3Bvb2ZzIiwgQ29udGVudCkNCgkJCQkJZW5kKQ0KCQkJCWVuZCwNCgkJCX0NCgkJfQ0KCX0pDQoNCgktLS8vIEZsYWcgb3B0aW9ucw0KCU9wdGlvbnNUYWI6U2VwYXJhdG9yKHtUZXh0PSJTZXR0aW5ncyJ9KQ0KCXNlbGY6Q3JlYXRlRWxlbWVudHMoT3B0aW9uc1RhYiwgRmxhZ3M6R2V0RmxhZ3MoKSkNCg0KCXNlbGY6QWRkRGV0YWlsc1NlY3Rpb24oT3B0aW9uc1RhYikNCmVuZA0KDQpmdW5jdGlvbiBVaTpBZGREZXRhaWxzU2VjdGlvbihPcHRpb25zVGFiKQ0KCU9wdGlvbnNUYWI6U2VwYXJhdG9yKHtUZXh0PSJJbmZvcm1hdGlvbiJ9KQ0KCU9wdGlvbnNUYWI6QnVsbGV0VGV4dCh7DQoJCVJvd3MgPSB7DQoJCQkiU2lnbWEgc3B5IC0gV3JpdHRlbiBieSBkZXBzbyEiLA0KCQkJIkxpYnJhcmllczogUm9ibG94LVBhcnNlciwgRGVhci1SZUd1aSIsDQoJCQkiVGhhbmsgeW91IHRvIHN5biBmb3IgeW91ciBzdWdnZXN0aW9ucyBhbmQgdGVzdGluZyINCgkJfQ0KCX0pDQplbmQNCg0KbG9jYWwgZnVuY3Rpb24gTWFrZUFjdGl2ZURhdGFDYWxsYmFjayhOYW1lOiBzdHJpbmcpDQoJcmV0dXJuIGZ1bmN0aW9uKC4uLikNCgkJaWYgbm90IEFjdGl2ZURhdGEgdGhlbiByZXR1cm4gZW5kDQoJCXJldHVybiBBY3RpdmVEYXRhW05hbWVdKEFjdGl2ZURhdGEsIC4uLikNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBVaTpNYWtlRWRpdG9yVGFiKEluZm9TZWxlY3RvcikNCglsb2NhbCBEZWZhdWx0ID0gc2VsZi5EZWZhdWx0RWRpdG9yQ29udGVudA0KCWxvY2FsIFdpbmRvdyA9IHNlbGYuV2luZG93DQoNCglsb2NhbCBTeW50YXhDb2xvcnMgPSBDb25maWcuU3ludGF4Q29sb3JzDQoNCgktLS8vIENyZWF0ZSB0YWINCglsb2NhbCBFZGl0b3JUYWIgPSBJbmZvU2VsZWN0b3I6Q3JlYXRlVGFiKHsNCgkJTmFtZSA9ICJFZGl0b3IiDQoJfSkNCg0KCS0tLy8gSURFDQoJbG9jYWwgQ29kZUVkaXRvciA9IEVkaXRvclRhYjpDb2RlRWRpdG9yKHsNCgkJRmlsbCA9IHRydWUsDQoJCUVkaXRhYmxlID0gdHJ1ZSwNCgkJRm9udFNpemUgPSAxMywNCgkJQ29sb3JzID0gU3ludGF4Q29sb3JzLA0KCQlGb250RmFjZSA9IFRleHRGb250LA0KCQlUZXh0ID0gRGVmYXVsdA0KCX0pDQoNCgktLS8vIEJ1dHRvbnMNCglsb2NhbCBCdXR0b25zUm93ID0gRWRpdG9yVGFiOlJvdygpDQoJc2VsZjpDcmVhdGVCdXR0b25zKEJ1dHRvbnNSb3csIHsNCgkJTm9UYWJsZSA9IHRydWUsDQoJCUJ1dHRvbnMgPSB7DQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJbG9jYWwgU2NyaXB0ID0gQ29kZUVkaXRvcjpHZXRUZXh0KCkNCgkJCQkJc2VsZjpTZXRDbGlwYm9hcmQoU2NyaXB0KQ0KCQkJCWVuZA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIlJ1biIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCWxvY2FsIFNjcmlwdCA9IENvZGVFZGl0b3I6R2V0VGV4dCgpDQoJCQkJCWxvY2FsIEZ1bmMsIEVycm9yID0gbG9hZHN0cmluZyhTY3JpcHQsICJTaWdtYVNweS1VU0VSU0NSSVBUIikNCg0KCQkJCQktLS8vIFN5bnRheCBjaGVjaw0KCQkJCQlpZiBub3QgRnVuYyB0aGVuDQoJCQkJCQlzZWxmOlNob3dNb2RhbCh7IkVycm9yIHJ1bm5pbmcgc2NyaXB0IVxuIiwgRXJyb3J9KQ0KCQkJCQkJcmV0dXJuDQoJCQkJCWVuZA0KDQoJCQkJCUZ1bmMoKQ0KCQkJCWVuZA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIkdldCByZXR1cm4iLA0KCQkJCUNhbGxiYWNrID0gTWFrZUFjdGl2ZURhdGFDYWxsYmFjaygiR2V0UmV0dXJuIikNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJTY3JpcHQiLA0KCQkJCUNhbGxiYWNrID0gTWFrZUFjdGl2ZURhdGFDYWxsYmFjaygiU2NyaXB0T3B0aW9ucyIpDQoJCQl9LA0KCQkJew0KCQkJCVRleHQgPSAiQnVpbGQiLA0KCQkJCUNhbGxiYWNrID0gTWFrZUFjdGl2ZURhdGFDYWxsYmFjaygiQnVpbGRTY3JpcHQiKQ0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIlBvcC1vdXQiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBTY3JpcHQgPSBDb2RlRWRpdG9yOkdldFRleHQoKQ0KCQkJCQlsb2NhbCBUaWxlID0gQWN0aXZlRGF0YSBhbmQgQWN0aXZlRGF0YS5UYXNrIG9yICJTaWdtYSBTcHkiDQoJCQkJCXNlbGY6TWFrZUVkaXRvclBvcG91dFdpbmRvdyhTY3JpcHQsIHsNCgkJCQkJCVRpdGxlID0gVGlsZQ0KCQkJCQl9KQ0KCQkJCWVuZA0KCQkJfSwNCgkJfQ0KCX0pDQoJDQoJc2VsZi5Db2RlRWRpdG9yID0gQ29kZUVkaXRvcg0KZW5kDQoNCmZ1bmN0aW9uIFVpOlNob3VsZEZvY3VzKFRhYik6IGJvb2xlYW4NCglsb2NhbCBJbmZvU2VsZWN0b3IgPSBzZWxmLkluZm9TZWxlY3Rvcg0KCWxvY2FsIEFjdGl2ZVRhYiA9IEluZm9TZWxlY3Rvci5BY3RpdmVUYWINCg0KCS0tLy8gSWYgdGhlcmUgaXMgYW4gZW1wdHkgdGFiDQoJaWYgbm90IEFjdGl2ZVRhYiB0aGVuDQoJCXJldHVybiB0cnVlDQoJZW5kDQoNCglyZXR1cm4gSW5mb1NlbGVjdG9yOkNvbXBhcmVUYWJzKEFjdGl2ZVRhYiwgVGFiKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOk1ha2VFZGl0b3JQb3BvdXRXaW5kb3coQ29udGVudDogc3RyaW5nLCBXaW5kb3dDb25maWc6IHRhYmxlKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGY6Q3JlYXRlV2luZG93KFdpbmRvd0NvbmZpZykNCglsb2NhbCBCdXR0b25zID0gV2luZG93Q29uZmlnLkJ1dHRvbnMgb3Ige30NCg0KCWxvY2FsIENvZGVFZGl0b3IgPSBXaW5kb3c6Q29kZUVkaXRvcih7DQoJCVRleHQgPSBDb250ZW50LA0KCQlFZGl0YWJsZSA9IHRydWUsDQoJCUZpbGwgPSB0cnVlLA0KCQlGb250U2l6ZSA9IDEzLA0KCQlDb2xvcnMgPSBTeW50YXhDb2xvcnMsDQoJCUZvbnRGYWNlID0gVGV4dEZvbnQNCgl9KQ0KDQoJLS0vLyBEZWZhdWx0IGJ1dHRvbnMNCgl0YWJsZS5pbnNlcnQoQnV0dG9ucywgew0KCQlUZXh0ID0gIkNvcHkiLA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCWxvY2FsIFNjcmlwdCA9IENvZGVFZGl0b3I6R2V0VGV4dCgpDQoJCQlzZWxmOlNldENsaXBib2FyZChTY3JpcHQpDQoJCWVuZA0KCX0pDQoNCgktLS8vIEJ1dHRvbnMNCglsb2NhbCBCdXR0b25zUm93ID0gV2luZG93OlJvdygpDQoJc2VsZjpDcmVhdGVCdXR0b25zKEJ1dHRvbnNSb3csIHsNCgkJTm9UYWJsZSA9IHRydWUsDQoJCUJ1dHRvbnMgPSBCdXR0b25zDQoJfSkNCg0KCVdpbmRvdzpDZW50ZXIoKQ0KCXJldHVybiBDb2RlRWRpdG9yDQplbmQNCg0KZnVuY3Rpb24gVWk6RWRpdEZpbGUoRmlsZVBhdGg6IHN0cmluZywgSW5Gb2xkZXI6IGJvb2xlYW4sIE9uU2F2ZUZ1bmM6ICgodGFibGUsIHN0cmluZykgLT4gbmlsKT8pDQoJbG9jYWwgRm9sZGVyID0gRmlsZXMuRm9sZGVyTmFtZQ0KDQoJLS0vLyBSZWxhdGl2ZSB0byBTaWdtYSBTcHkgZm9sZGVyDQoJaWYgSW5Gb2xkZXIgdGhlbg0KCQlGaWxlUGF0aCA9IGB7Rm9sZGVyfS97RmlsZVBhdGh9YA0KCWVuZA0KDQoJLS0vLyBHZXQgZmlsZSBjb250ZW50DQoJbG9jYWwgQ29udGVudCA9IHJlYWRmaWxlKEZpbGVQYXRoKQ0KCUNvbnRlbnQgPSBDb250ZW50OmdzdWIoIlxyXG4iLCAiXG4iKQ0KDQoJbG9jYWwgQ29kZUVkaXRvcg0KCWxvY2FsIEJ1dHRvbnMgPSB7DQoJCXsNCgkJCVRleHQgPSAiU2F2ZSIsDQoJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQlsb2NhbCBTY3JpcHQgPSBDb2RlRWRpdG9yOkdldFRleHQoKQ0KCQkJCWxvY2FsIFN1Y2Nlc3MsIEVycm9yID0gbG9hZHN0cmluZyhTY3JpcHQsICJTaWdtYVNweS1FZGl0b3IiKQ0KDQoJCQkJLS0vLyBTeW50YXggY2hlY2sNCgkJCQlpZiBub3QgU3VjY2VzcyB0aGVuDQoJCQkJCXNlbGY6U2hvd01vZGFsKHsiRXJyb3Igc2F2aW5nIGZpbGUhXG4iLCBFcnJvcn0pDQoJCQkJCXJldHVybg0KCQkJCWVuZA0KCQkJCQ0KCQkJCS0tLy8gU2F2ZSBjb250ZW50cw0KCQkJCXdyaXRlZmlsZShGaWxlUGF0aCwgU2NyaXB0KQ0KDQoJCQkJLS0vLyBJbnZva2Ugb24gc2F2ZSBmdW5jdGlvbg0KCQkJCWlmIE9uU2F2ZUZ1bmMgdGhlbg0KCQkJCQlPblNhdmVGdW5jKFdpbmRvdywgU2NyaXB0KQ0KCQkJCWVuZA0KCQkJZW5kDQoJCX0NCgl9DQoNCgktLS8vIENyZWF0ZSBFZGl0b3IgV2luZG93DQoJQ29kZUVkaXRvciA9IHNlbGY6TWFrZUVkaXRvclBvcG91dFdpbmRvdyhDb250ZW50LCB7DQoJCVRpdGxlID0gYEVkaXRpbmc6IHtGaWxlUGF0aH1gLA0KCQlCdXR0b25zID0gQnV0dG9ucw0KCX0pDQplbmQNCg0KdHlwZSBNZW51T3B0aW9ucyA9IHsNCglbc3RyaW5nXTogKEd1aUJ1dHRvbiwgLi4uYW55KSAtPiBuaWwNCn0NCmZ1bmN0aW9uIFVpOk1ha2VCdXR0b25NZW51KEJ1dHRvbjogSW5zdGFuY2UsIFVucGFjazogdGFibGUsIE9wdGlvbnM6IE1lbnVPcHRpb25zKQ0KCWxvY2FsIFdpbmRvdyA9IHNlbGYuV2luZG93DQoJbG9jYWwgUG9wdXAgPSBXaW5kb3c6UG9wdXBDYW52YXMoew0KCQlSZWxhdGl2ZVRvID0gQnV0dG9uLA0KCQlNYXhTaXplWCA9IDUwMCwNCgl9KQ0KDQoJLS0vLyBDcmVhdGUgU2VsZWN0YWJsZXMgZm9yIHN0cmluZywgZnVuY3Rpb24NCglmb3IgTmFtZSwgRnVuYyBpbiBPcHRpb25zIGRvDQoJCSBQb3B1cDpTZWxlY3RhYmxlKHsNCgkJCVRleHQgPSBOYW1lLA0KCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJRnVuYyhQcm9jZXNzOlVucGFjayhVbnBhY2spKQ0KCQkJZW5kLA0KCQl9KQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFVpOlJlbW92ZVByZXZpb3VzVGFiKFRpdGxlOiBzdHJpbmcpOiBib29sZWFuDQoJLS0vLyBObyBwcmV2aW91cyB0YWJzDQoJaWYgbm90IEFjdGl2ZURhdGEgdGhlbiANCgkJcmV0dXJuIGZhbHNlIA0KCWVuZA0KDQoJLS0vLyBUYWJTZWxlY3Rvcg0KCWxvY2FsIEluZm9TZWxlY3RvciA9IHNlbGYuSW5mb1NlbGVjdG9yDQoNCgktLS8vIFByZXZpb3VzIGVsZW1lbnRzDQoJbG9jYWwgUHJldmlvdXNUYWIgPSBBY3RpdmVEYXRhLlRhYg0KCWxvY2FsIFByZXZpb3VzU2VsZWN0YWJsZSA9IEFjdGl2ZURhdGEuU2VsZWN0YWJsZQ0KDQoJLS0vLyBSZW1vdmUgcHJldmlvdXMgdGFiIGFuZCBzZXQgc2VsZWN0YWJsZSBmb2N1cw0KCWxvY2FsIFRhYkZvY3VzZWQgPSBzZWxmOlNob3VsZEZvY3VzKFByZXZpb3VzVGFiKQ0KCUluZm9TZWxlY3RvcjpSZW1vdmVUYWIoUHJldmlvdXNUYWIpDQoJUHJldmlvdXNTZWxlY3RhYmxlOlNldFNlbGVjdGVkKGZhbHNlKQ0KDQoJLS0vLyBDcmVhdGUgbmV3IHRhYg0KCXJldHVybiBUYWJGb2N1c2VkDQplbmQNCg0KZnVuY3Rpb24gVWk6TWFrZVRhYmxlSGVhZGVycyhUYWJsZSwgUm93czogdGFibGUpDQoJbG9jYWwgSGVhZGVyUm93ID0gVGFibGU6SGVhZGVyUm93KCkNCglmb3IgXywgQ2F0YWdvcnkgaW4gUm93cyBkbw0KCQlsb2NhbCBDb2x1bW4gPSBIZWFkZXJSb3c6TmV4dENvbHVtbigpDQoJCUNvbHVtbjpMYWJlbCh7VGV4dD1DYXRhZ29yeX0pDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gVWk6RGVjb21waWxlKEVkaXRvcjogdGFibGUsIFNjcmlwdDogc2NyaXB0KQ0KCWxvY2FsIEhlYWRlciA9ICItLUJPT0lJSUkgVEhJUyBJUyBTTyBUVUZGIEZMSVBQWSBTS0lCSURJIEFVUkEgKFNJR01BIFNQWSkiDQoJRWRpdG9yOlNldFRleHQoIi0tRGVjb21waWxpbmcuLi4gKzk5OTk5OTkgQVVSQSAobWFuZ28gcGhvbmspIikNCg0KCS0tLy8gRGVjb21waWxlIHNjcmlwdA0KCWxvY2FsIERlY29tcGlsZWQsIElzRXJyb3IgPSBQcm9jZXNzOkRlY29tcGlsZShTY3JpcHQpDQoNCgktLS8vIEFkZCBoZWFkZXIgZm9yIHN1Y2Nlc3NmdWwgZGVjb21waWxhdGlvbnMNCglpZiBub3QgSXNFcnJvciB0aGVuDQoJCURlY29tcGlsZWQgPSBge0hlYWRlcn1cbntEZWNvbXBpbGVkfWANCgllbmQNCg0KCUVkaXRvcjpTZXRUZXh0KERlY29tcGlsZWQpDQplbmQNCg0KdHlwZSBEaXNwbGF5VGFibGVDb25maWcgPSB7DQoJUm93czogdGFibGUsDQoJRmxhZ3M6IHRhYmxlPywNCglUb0Rpc3BsYXk6IHRhYmxlLA0KCVRhYmxlOiB0YWJsZQ0KfQ0KZnVuY3Rpb24gVWk6RGlzcGxheVRhYmxlKFBhcmVudCwgQ29uZmlnOiBEaXNwbGF5VGFibGVDb25maWcpOiB0YWJsZQ0KCS0tLy8gQ29uZmlndXJhdGlvbg0KCWxvY2FsIFJvd3MgPSBDb25maWcuUm93cw0KCWxvY2FsIEZsYWdzID0gQ29uZmlnLkZsYWdzDQoJbG9jYWwgRGF0YVRhYmxlID0gQ29uZmlnLlRhYmxlDQoJbG9jYWwgVG9EaXNwbGF5ID0gQ29uZmlnLlRvRGlzcGxheQ0KDQoJRmxhZ3MuTWF4Q29sdW1ucyA9ICNSb3dzDQoNCgktLS8vIENyZWF0ZSB0YWJsZQ0KCWxvY2FsIFRhYmxlID0gUGFyZW50OlRhYmxlKEZsYWdzKQ0KDQoJLS0vLyBUYWJsZSBoZWFkZXJzDQoJc2VsZjpNYWtlVGFibGVIZWFkZXJzKFRhYmxlLCBSb3dzKQ0KDQoJLS0vLyBUYWJsZSBsYXlvdXQNCglmb3IgUm93SW5kZXgsIE5hbWUgaW4gVG9EaXNwbGF5IGRvDQoJCWxvY2FsIFJvdyA9IFRhYmxlOlJvdygpDQoJCQ0KCQktLS8vIENyZWF0ZSBDb2x1bW5zDQoJCWZvciBDb3VudCwgQ2F0YWdvcnkgaW4gUm93cyBkbw0KCQkJbG9jYWwgQ29sdW1uID0gUm93Ok5leHRDb2x1bW4oKQ0KCQkJDQoJCQktLS8vIFZhbHVlIHRleHQNCgkJCWxvY2FsIFZhbHVlID0gQ2F0YWdvcnkgPT0gIk5hbWUiIGFuZCBOYW1lIG9yIERhdGFUYWJsZVtOYW1lXQ0KCQkJaWYgbm90IFZhbHVlIHRoZW4gY29udGludWUgZW5kDQoNCgkJCS0tLy8gQ3JlYXRlIGZpbHRlcmVkIGxhYmVsDQoJCQlsb2NhbCBTdHJpbmcgPSBzZWxmOkZpbHRlck5hbWUoYHtWYWx1ZX1gLCAxNTApDQoJCQlDb2x1bW46TGFiZWwoe1RleHQ9U3RyaW5nfSkNCgkJZW5kDQoJZW5kDQoNCglyZXR1cm4gVGFibGUNCmVuZA0KDQpmdW5jdGlvbiBVaTpTZXRGb2N1c2VkUmVtb3RlKERhdGEpDQoJLS0vLyBVbnBhY2sgcmVtb3RlIGRhdGENCglsb2NhbCBSZW1vdGUgPSBEYXRhLlJlbW90ZQ0KCWxvY2FsIE1ldGhvZCA9IERhdGEuTWV0aG9kDQoJbG9jYWwgSXNSZWNlaXZlID0gRGF0YS5Jc1JlY2VpdmUNCglsb2NhbCBTY3JpcHQgPSBEYXRhLkNhbGxpbmdTY3JpcHQNCglsb2NhbCBTb3VyY2VTY3JpcHQgPSBEYXRhLlNvdXJjZVNjcmlwdA0KCWxvY2FsIENsYXNzRGF0YSA9IERhdGEuQ2xhc3NEYXRhDQoJbG9jYWwgSGVhZGVyRGF0YSA9IERhdGEuSGVhZGVyRGF0YQ0KCWxvY2FsIFZhbHVlU3dhcHMgPSBEYXRhLlZhbHVlU3dhcHMNCglsb2NhbCBBcmdzID0gRGF0YS5BcmdzDQoJbG9jYWwgSWQgPSBEYXRhLklkDQoNCgktLS8vIEZsYWdzDQoJbG9jYWwgVGFibGVBcmdzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJUYWJsZUFyZ3MiKQ0KCWxvY2FsIE5vVmFyaWFibGVzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJOb1ZhcmlhYmxlcyIpDQoNCgktLS8vIFVucGFjayBpbmZvDQoJbG9jYWwgUmVtb3RlRGF0YSA9IFByb2Nlc3M6R2V0UmVtb3RlRGF0YShJZCkNCglsb2NhbCBJc1JlbW90ZUZ1bmN0aW9uID0gQ2xhc3NEYXRhLklzUmVtb3RlRnVuY3Rpb24NCglsb2NhbCBSZW1vdGVOYW1lID0gc2VsZjpGaWx0ZXJOYW1lKGB7UmVtb3RlfWAsIDUwKQ0KDQoJLS0vLyBVSSBkYXRhDQoJbG9jYWwgQ29kZUVkaXRvciA9IHNlbGYuQ29kZUVkaXRvcg0KCWxvY2FsIFRvRGlzcGxheSA9IHNlbGYuRGlzcGxheVJlbW90ZUluZm8NCglsb2NhbCBJbmZvU2VsZWN0b3IgPSBzZWxmLkluZm9TZWxlY3Rvcg0KDQoJbG9jYWwgVGFiRm9jdXNlZCA9IHNlbGY6UmVtb3ZlUHJldmlvdXNUYWIoKQ0KCWxvY2FsIFRhYiA9IEluZm9TZWxlY3RvcjpDcmVhdGVUYWIoew0KCQlOYW1lID0gc2VsZjpGaWx0ZXJOYW1lKGBSZW1vdGU6IHtSZW1vdGVOYW1lfWAsIDUwKSwNCgkJRm9jdXNlZCA9IFRhYkZvY3VzZWQNCgl9KQ0KDQoJLS0vLyBDcmVhdGUgbmV3IHBhcnNlcg0KCWxvY2FsIE1vZHVsZSA9IEdlbmVyYXRpb246TmV3UGFyc2VyKHsNCgkJTm9WYXJpYWJsZXMgPSBOb1ZhcmlhYmxlcw0KCX0pDQoJbG9jYWwgUGFyc2VyID0gTW9kdWxlLlBhcnNlcg0KCWxvY2FsIEZvcm1hdHRlciA9IE1vZHVsZS5Gb3JtYXR0ZXINCglGb3JtYXR0ZXI6U2V0VmFsdWVTd2FwcyhWYWx1ZVN3YXBzKQ0KDQoJLS0vLyBTZXQgdGhpcyBsb2cgdG8gYmUgc2VsZWN0ZWQNCglBY3RpdmVEYXRhID0gRGF0YQ0KCURhdGEuVGFiID0gVGFiDQoJRGF0YS5TZWxlY3RhYmxlOlNldFNlbGVjdGVkKHRydWUpDQoNCglsb2NhbCBmdW5jdGlvbiBTZXRJREVUZXh0KENvbnRlbnQ6IHN0cmluZywgVGFzazogc3RyaW5nKQ0KCQlEYXRhLlRhc2sgPSBUYXNrIG9yICJTaWdtYSBTcHkiDQoJCUNvZGVFZGl0b3I6U2V0VGV4dChDb250ZW50KQ0KCWVuZA0KCWxvY2FsIGZ1bmN0aW9uIERhdGFDb25uZWN0aW9uKE5hbWUsIC4uLikNCgkJbG9jYWwgQXJncyA9IHsuLi59DQoJCXJldHVybiBmdW5jdGlvbigpDQoJCQlyZXR1cm4gRGF0YVtOYW1lXShEYXRhLCBQcm9jZXNzOlVucGFjayhBcmdzKSkNCgkJZW5kDQoJZW5kDQoJbG9jYWwgZnVuY3Rpb24gU2NyaXB0Q2hlY2soU2NyaXB0LCBOb01pc3NpbmdDaGVjazogYm9vbGVhbik6IGJvb2xlYW4NCgkJLS0vLyBSZWplY3QgY2xpZW50IGV2ZW50cw0KCQlpZiBJc1JlY2VpdmUgdGhlbiANCgkJCVVpOlNob3dNb2RhbCh7DQoJCQkJIlJlY2lldmVzIGRvIG5vdCBoYXZlIGEgc2NyaXB0IGJlY2F1c2UgaXQncyBhIENvbm5lY3Rpb24iDQoJCQl9KQ0KCQkJcmV0dXJuIA0KCQllbmQNCg0KCQktLS8vIENoZWNrIGlmIHNjcmlwdCBleGlzdHMNCgkJaWYgbm90IFNjcmlwdCBhbmQgbm90IE5vTWlzc2luZ0NoZWNrIHRoZW4gDQoJCQlVaTpTaG93TW9kYWwoeyJUaGUgU2NyaXB0IGhhcyBiZWVuIGRlc3Ryb3llZCBieSB0aGUgZ2FtZSAoLTk5OTk5OTkgQVVSQSkifSkNCgkJCXJldHVybg0KCQllbmQNCg0KCQlyZXR1cm4gdHJ1ZQ0KCWVuZA0KDQoJLS0vLyBGdW5jdGlvbnMNCglmdW5jdGlvbiBEYXRhOlNjcmlwdE9wdGlvbnMoQnV0dG9uOiBHdWlCdXR0b24pDQoJCVVpOk1ha2VCdXR0b25NZW51KEJ1dHRvbiwge3NlbGZ9LCB7DQoJCQlbIkNhbGxlciBJbmZvIl0gPSBEYXRhQ29ubmVjdGlvbigiR2VuZXJhdGVJbmZvIiksDQoJCQlbIkRlY29tcGlsZSJdID0gRGF0YUNvbm5lY3Rpb24oIkRlY29tcGlsZSIsICJTb3VyY2VTY3JpcHQiKSwNCgkJCVsiRGVjb21waWxlIENhbGxpbmciXSA9IERhdGFDb25uZWN0aW9uKCJEZWNvbXBpbGUiLCAiQ2FsbGluZ1NjcmlwdCIpLA0KCQkJWyJSZXBlYXQgQ2FsbCJdID0gRGF0YUNvbm5lY3Rpb24oIlJlcGVhdENhbGwiKSwNCgkJCVsiU2F2ZSBCeXRlY29kZSJdID0gRGF0YUNvbm5lY3Rpb24oIlNhdmVCeXRlY29kZSIpLA0KCQl9KQ0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6QnVpbGRTY3JpcHQoQnV0dG9uOiBHdWlCdXR0b24pDQoJCVVpOk1ha2VCdXR0b25NZW51KEJ1dHRvbiwge3NlbGZ9LCB7DQoJCQlbIkNhbGwgUmVtb3RlIl0gPSBEYXRhQ29ubmVjdGlvbigiTWFrZVNjcmlwdCIsICJSZW1vdGUiKSwNCgkJCVsiQmxvY2sgUmVtb3RlIl0gPSBEYXRhQ29ubmVjdGlvbigiTWFrZVNjcmlwdCIsICJCbG9jayIpLA0KCQkJWyJSZXBlYXQgRm9yIl0gPSBEYXRhQ29ubmVjdGlvbigiTWFrZVNjcmlwdCIsICJSZXBlYXQiKSwNCgkJCVsiU3BhbSBSZW1vdGUiXSA9IERhdGFDb25uZWN0aW9uKCJNYWtlU2NyaXB0IiwgIlNwYW0iKQ0KCQl9KQ0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6U2F2ZUJ5dGVjb2RlKCkNCgkJLS0vLyBQcm9ibGVtIGNoZWNrDQoJCWlmIG5vdCBTY3JpcHRDaGVjayhTY3JpcHQsIHRydWUpIHRoZW4gcmV0dXJuIGVuZA0KDQoJCS0tLy8gZ2V0c2NyaXB0Ynl0ZWNvZGUNCiAgICAJbG9jYWwgU3VjY2VzcywgQnl0ZWNvZGUgPSBwY2FsbChnZXRzY3JpcHRieXRlY29kZSwgU2NyaXB0KQ0KCQlpZiBub3QgU3VjY2VzcyB0aGVuDQoJCQlVaTpTaG93TW9kYWwoeyJGYWlsZWQgdG8gZ2V0IFNjcmlwdGUgYnl0ZWNvZGUgKC05OTk5OTk5IEFVUkEpIn0pDQoJCQlyZXR1cm4NCgkJZW5kDQoNCgkJLS0vLyBTYXZlIGZpbGUNCgkJbG9jYWwgUGF0aEJhc2UgPSBge1NjcmlwdH0gJXMudHh0YA0KCQlsb2NhbCBGaWxlUGF0aCA9IEdlbmVyYXRpb246VGltZVN0YW1wRmlsZShQYXRoQmFzZSkNCgkJd3JpdGVmaWxlKEZpbGVQYXRoLCBCeXRlY29kZSkNCg0KCQlVaTpTaG93TW9kYWwoeyJTYXZlZCBieXRlY29kZSB0byIsIEZpbGVQYXRofSkNCgllbmQNCglmdW5jdGlvbiBEYXRhOk1ha2VTY3JpcHQoU2NyaXB0VHlwZTogc3RyaW5nKQ0KCQlsb2NhbCBTY3JpcHQgPSBHZW5lcmF0aW9uOlJlbW90ZVNjcmlwdChNb2R1bGUsIHNlbGYsIFNjcmlwdFR5cGUpDQoJCVNldElERVRleHQoU2NyaXB0LCBgRWRpdGluZzoge1JlbW90ZU5hbWV9Lmx1YWApDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpSZXBlYXRDYWxsKCkNCgkJbG9jYWwgU2lnbmFsID0gSG9vazpJbmRleChSZW1vdGUsIE1ldGhvZCkNCg0KCQlpZiBJc1JlY2VpdmUgdGhlbg0KCQkJZmlyZXNpZ25hbChTaWduYWwsIFByb2Nlc3M6VW5wYWNrKEFyZ3MpKQ0KCQllbHNlDQoJCQlTaWduYWwoUmVtb3RlLCBQcm9jZXNzOlVucGFjayhBcmdzKSkNCgkJZW5kDQoJZW5kDQoJZnVuY3Rpb24gRGF0YTpHZXRSZXR1cm4oKQ0KCQlsb2NhbCBSZXR1cm5WYWx1ZXMgPSBzZWxmLlJldHVyblZhbHVlcw0KDQoJCS0tLy8gRXJyb3IgbWVzc2FnZXMNCgkJaWYgbm90IElzUmVtb3RlRnVuY3Rpb24gdGhlbg0KCQkJVWk6U2hvd01vZGFsKHsiVGhlIFJlbW90ZSBpcyBub3QgYSBSZW1vdGUgRnVuY3Rpb24gKC05OTk5OTk5IEFVUkEpIn0pDQoJCQlyZXR1cm4NCgkJZW5kDQoJCWlmIG5vdCBSZXR1cm5WYWx1ZXMgdGhlbg0KCQkJVWk6U2hvd01vZGFsKHsiTm8gcmV0dXJuIHZhbHVlcyAoLTk5OTk5OTkgQVVSQSkifSkNCgkJCXJldHVybg0KCQllbmQNCg0KCQktLS8vIEdlbmVyYXRlIHNjcmlwdA0KCQlsb2NhbCBTY3JpcHQgPSBHZW5lcmF0aW9uOlRhYmxlU2NyaXB0KE1vZHVsZSwgUmV0dXJuVmFsdWVzKQ0KCQlTZXRJREVUZXh0KFNjcmlwdCwgYFJldHVybiBWYWx1ZXMgZm9yOiB7UmVtb3RlTmFtZX1gKQ0KCWVuZA0KCWZ1bmN0aW9uIERhdGE6R2VuZXJhdGVJbmZvKCkNCgkJLS0vLyBQcm9ibGVtIGNoZWNrDQoJCWlmIG5vdCBTY3JpcHRDaGVjayhuaWwsIHRydWUpIHRoZW4gcmV0dXJuIGVuZA0KDQoJCS0tLy8gR2VuZXJhdGUgc2NyaXB0DQoJCWxvY2FsIFNjcmlwdCA9IEdlbmVyYXRpb246QWR2YW5jZWRJbmZvKE1vZHVsZSwgc2VsZikNCgkJU2V0SURFVGV4dChTY3JpcHQsIGBBZHZhbmNlZCBJbmZvIGZvcjoge1JlbW90ZU5hbWV9YCkNCgllbmQNCglmdW5jdGlvbiBEYXRhOkRlY29tcGlsZShXaGljaFNjcmlwdDogc3RyaW5nKQ0KCQlsb2NhbCBEZWNvbXBpbGVQb3BvdXQgPSBGbGFnczpHZXRGbGFnVmFsdWUoIkRlY29tcGlsZVBvcG91dCIpDQoJCWxvY2FsIFRvRGVjb21waWxlID0gRGF0YVtXaGljaFNjcmlwdF0NCgkJbG9jYWwgRWRpdG9yID0gQ29kZUVkaXRvcg0KDQoJCS0tLy8gUHJvYmxlbSBjaGVjaw0KCQlpZiBub3QgU2NyaXB0Q2hlY2soVG9EZWNvbXBpbGUsIHRydWUpIHRoZW4gcmV0dXJuIGVuZA0KDQoJCWxvY2FsIFRhc2sgPSBVaTpGaWx0ZXJOYW1lKGBWaWV3aW5nOiB7VG9EZWNvbXBpbGV9Lmx1YWAsIDIwMCkNCgkJDQoJCS0tLy8gQXV0b21hdGljYWxseSBQb3Atb3V0IHRoZSBlZGl0b3IgZm9yIGRlY29tcGlsaW5nIGlmIGVuYWJsZWQNCgkJaWYgRGVjb21waWxlUG9wb3V0IHRoZW4NCgkJCUVkaXRvciA9IFVpOk1ha2VFZGl0b3JQb3BvdXRXaW5kb3coRGVjb21waWxlZCwgew0KCQkJCVRpdGxlID0gVGFzaw0KCQkJfSkNCgkJZW5kDQoNCgkJVWk6RGVjb21waWxlKEVkaXRvciwgVG9EZWNvbXBpbGUpDQoJZW5kDQoJDQoJLS0vLyBSZW1vdGVPcHRpb25zDQoJc2VsZjpDcmVhdGVPcHRpb25zRm9yRGljdChUYWIsIFJlbW90ZURhdGEsIGZ1bmN0aW9uKCkNCgkJUHJvY2VzczpVcGRhdGVSZW1vdGVEYXRhKElkLCBSZW1vdGVEYXRhKQ0KCWVuZCkNCg0KCS0tLy8gSW5zdGFuY2Ugb3B0aW9ucw0KCXNlbGY6Q3JlYXRlQnV0dG9ucyhUYWIsIHsNCgkJQmFzZSA9IHsNCgkJCVNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjApLA0KCQkJQXV0b21hdGljU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5ZLA0KCQl9LA0KCQlCdXR0b25zID0gew0KCQkJew0KCQkJCVRleHQgPSAiQ29weSBzY3JpcHQgcGF0aCIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCVNldENsaXBib2FyZChQYXJzZXI6TWFrZVBhdGhTdHJpbmcoew0KCQkJCQkJT2JqZWN0ID0gU2NyaXB0LA0KCQkJCQkJTm9WYXJpYWJsZXMgPSB0cnVlDQoJCQkJCX0pKQ0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJDb3B5IHJlbW90ZSBwYXRoIiwNCgkJCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCQkJU2V0Q2xpcGJvYXJkKFBhcnNlcjpNYWtlUGF0aFN0cmluZyh7DQoJCQkJCQlPYmplY3QgPSBSZW1vdGUsDQoJCQkJCQlOb1ZhcmlhYmxlcyA9IHRydWUNCgkJCQkJfSkpDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIlJlbW92ZSBsb2ciLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlJbmZvU2VsZWN0b3I6UmVtb3ZlVGFiKFRhYikNCgkJCQkJRGF0YS5TZWxlY3RhYmxlOlJlbW92ZSgpDQoJCQkJCUhlYWRlckRhdGE6UmVtb3ZlKCkNCgkJCQkJQWN0aXZlRGF0YSA9IG5pbA0KCQkJCWVuZCwNCgkJCX0sDQoJCQl7DQoJCQkJVGV4dCA9ICJEdW1wIGxvZ3MiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBMb2dzID0gSGVhZGVyRGF0YS5FbnRyaWVzDQoJCQkJCWxvY2FsIEZpbGVQYXRoID0gR2VuZXJhdGlvbjpEdW1wTG9ncyhMb2dzKQ0KCQkJCQlzZWxmOlNob3dNb2RhbCh7IlNhdmVkIGR1bXAgdG8iLCBGaWxlUGF0aH0pDQoJCQkJZW5kLA0KCQkJfSwNCgkJCXsNCgkJCQlUZXh0ID0gIlZpZXcgQ29ubmVjdGlvbnMiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oKQ0KCQkJCQlsb2NhbCBNZXRob2QgPSBDbGFzc0RhdGEuUmVjZWl2ZVsxXQ0KCQkJCQlsb2NhbCBTaWduYWwgPSBSZW1vdGVbTWV0aG9kXQ0KCQkJCQlzZWxmOlZpZXdDb25uZWN0aW9ucyhSZW1vdGVOYW1lLCBTaWduYWwpDQoJCQkJZW5kLA0KCQkJfQ0KCQl9DQoJfSkNCg0KCS0tLy8gUmVtb3RlIGluZm9ybWF0aW9uIHRhYmxlDQoJc2VsZjpEaXNwbGF5VGFibGUoVGFiLCB7DQoJCVJvd3MgPSB7Ik5hbWUiLCAiVmFsdWUifSwNCgkJVGFibGUgPSBEYXRhLA0KCQlUb0Rpc3BsYXkgPSBUb0Rpc3BsYXksDQoJCUZsYWdzID0gew0KCQkJQm9yZGVyID0gdHJ1ZSwNCgkJCVJvd0JhY2tncm91bmQgPSB0cnVlLA0KCQkJTWF4Q29sdW1ucyA9IDINCgkJfQ0KCX0pDQoJDQoJLS0vLyBBcmd1bWVudHMgdGFibGUgc2NyaXB0DQoJaWYgVGFibGVBcmdzIHRoZW4NCgkJbG9jYWwgUGFyc2VkID0gR2VuZXJhdGlvbjpUYWJsZVNjcmlwdChNb2R1bGUsIEFyZ3MpDQoJCVNldElERVRleHQoUGFyc2VkKQ0KCQlyZXR1cm4NCgllbmQNCg0KCS0tLy8gUmVtb3RlIGNhbGwgc2NyaXB0DQoJRGF0YTpNYWtlU2NyaXB0KCJSZW1vdGUiKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOlZpZXdDb25uZWN0aW9ucyhSZW1vdGVOYW1lOiBzdHJpbmcsIFNpZ25hbDogUkJYU2NyaXB0Q29ubmVjdGlvbikNCglsb2NhbCBXaW5kb3cgPSBzZWxmOkNyZWF0ZVdpbmRvdyh7DQoJCVRpdGxlID0gYENvbm5lY3Rpb25zIGZvcjoge1JlbW90ZU5hbWV9YCwNCgkJU2l6ZSA9IFVEaW0yLmZyb21PZmZzZXQoNDUwLCAyNTApDQoJfSkNCg0KCWxvY2FsIFRvRGlzcGxheSA9IHsNCgkJIkVuYWJsZWQiLA0KCQkiTHVhQ29ubmVjdGlvbiIsDQoJCSJTY3JpcHQiDQoJfQ0KDQoJLS0vLyBHZXQgRmlsdGVyZWQgY29ubmVjdGlvbnMNCglsb2NhbCBDb25uZWN0aW9ucyA9IFByb2Nlc3M6RmlsdGVyQ29ubmVjdGlvbnMoU2lnbmFsLCBUb0Rpc3BsYXkpDQoNCgktLS8vIFRhYmxlDQoJbG9jYWwgVGFibGUgPSBXaW5kb3c6VGFibGUoew0KCQlCb3JkZXIgPSB0cnVlLA0KCQlSb3dCYWNrZ3JvdW5kID0gdHJ1ZSwNCgkJTWF4Q29sdW1ucyA9IDMNCgl9KQ0KDQoJbG9jYWwgQnV0dG9uc0ZvclZhbHVlcyA9IHsNCgkJWyJTY3JpcHQiXSA9IGZ1bmN0aW9uKFJvdywgVmFsdWUpDQoJCQlSb3c6QnV0dG9uKHsNCgkJCQlUZXh0ID0gIkRlY29tcGlsZSIsDQoJCQkJQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQoJCQkJCWxvY2FsIFRhc2sgPSBzZWxmOkZpbHRlck5hbWUoYFZpZXdpbmc6IHtWYWx1ZX0ubHVhYCwgMjAwKQ0KCQkJCQlsb2NhbCBFZGl0b3IgPSBzZWxmOk1ha2VFZGl0b3JQb3BvdXRXaW5kb3cobmlsLCB7DQoJCQkJCQlUaXRsZSA9IFRhc2sNCgkJCQkJfSkNCgkJCQkJc2VsZjpEZWNvbXBpbGUoRWRpdG9yLCBWYWx1ZSkNCgkJCQllbmQNCgkJCX0pDQoJCWVuZCwNCgkJWyJFbmFibGVkIl0gPSBmdW5jdGlvbihSb3csIEVuYWJsZWQsIENvbm5lY3Rpb24pDQoJCQlSb3c6QnV0dG9uKHsNCgkJCQlUZXh0ID0gRW5hYmxlZCBhbmQgIkRpc2FibGUiIG9yICJFbmFibGUiLA0KCQkJCUNhbGxiYWNrID0gZnVuY3Rpb24oc2VsZikNCgkJCQkJRW5hYmxlZCA9IG5vdCBFbmFibGVkDQoJCQkJCXNlbGYuVGV4dCA9IEVuYWJsZWQgYW5kICJEaXNhYmxlIiBvciAiRW5hYmxlIg0KDQoJCQkJCS0tLy8gRW5hYmxlIG9yIGRpc2FibGUgdGhlIGNvbm5lY3Rpb24NCgkJCQkJaWYgRW5hYmxlZCB0aGVuDQoJCQkJCQlDb25uZWN0aW9uOkVuYWJsZSgpDQoJCQkJCWVsc2UNCgkJCQkJCUNvbm5lY3Rpb246RGlzYWJsZSgpDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJfSkNCgkJZW5kDQoJfQ0KDQoJLS0vLyBNYWtlIGhlYWRlcnMgb24gdGhlIHRhYmxlDQoJc2VsZjpNYWtlVGFibGVIZWFkZXJzKFRhYmxlLCBUb0Rpc3BsYXkpDQoNCglmb3IgXywgQ29ubmVjdGlvbiBpbiBDb25uZWN0aW9ucyBkbw0KCQlsb2NhbCBSb3cgPSBUYWJsZTpSb3coKQ0KDQoJCWZvciBfLCBQcm9wZXJ0eSBpbiBUb0Rpc3BsYXkgZG8NCgkJCWxvY2FsIENvbHVtbiA9IFJvdzpOZXh0Q29sdW1uKCkNCgkJCWxvY2FsIENvbHVtblJvdyA9IENvbHVtbjpSb3coKQ0KDQoJCQlsb2NhbCBWYWx1ZSA9IENvbm5lY3Rpb25bUHJvcGVydHldDQoJCQlsb2NhbCBDYWxsYmFjayA9IEJ1dHRvbnNGb3JWYWx1ZXNbUHJvcGVydHldDQoNCgkJCS0tLy8gVmFsdWUgbGFiZWwNCgkJCUNvbHVtblJvdzpMYWJlbCh7VGV4dD1ge1ZhbHVlfWB9KQ0KDQoJCQktLS8vIEFkZCBidXR0b25zDQoJCQlpZiBDYWxsYmFjayB0aGVuDQoJCQkJQ2FsbGJhY2soQ29sdW1uUm93LCBWYWx1ZSwgQ29ubmVjdGlvbikNCgkJCWVuZA0KCQllbmQNCgllbmQNCg0KCS0tLy8gQ2VudGVyIFdpbmRvdw0KCVdpbmRvdzpDZW50ZXIoKQ0KZW5kDQoNCmZ1bmN0aW9uIFVpOkdldFJlbW90ZUhlYWRlcihEYXRhOiBMb2cpDQoJbG9jYWwgTG9nTGltaXQgPSBzZWxmLkxvZ0xpbWl0DQoJbG9jYWwgTG9ncyA9IHNlbGYuTG9ncw0KCWxvY2FsIFJlbW90ZXNMaXN0ID0gc2VsZi5SZW1vdGVzTGlzdA0KDQoJLS0vLyBSZW1vdGUgaW5mbw0KCWxvY2FsIElkID0gRGF0YS5JZA0KCWxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoJbG9jYWwgUmVtb3RlTmFtZSA9IHNlbGY6RmlsdGVyTmFtZShge1JlbW90ZX1gLCAzMCkNCg0KCS0tLy8gTm9UcmVlTm9kZXMNCglsb2NhbCBOb1RyZWVOb2RlcyA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiTm9UcmVlTm9kZXMiKQ0KDQoJLS0vLyBDaGVjayBmb3IgZXhpc3RpbmcgVHJlZU5vZGUNCglsb2NhbCBFeGlzdGluZyA9IExvZ3NbSWRdDQoJaWYgRXhpc3RpbmcgdGhlbiByZXR1cm4gRXhpc3RpbmcgZW5kDQoNCgktLS8vIEhlYWRlciBkYXRhDQoJbG9jYWwgSGVhZGVyRGF0YSA9IHsJDQoJCUxvZ0NvdW50ID0gMCwNCgkJRGF0YSA9IERhdGEsDQoJCUVudHJpZXMgPSB7fQ0KCX0NCg0KCS0tLy8gSW5jcmVtZW50IHRyZWVub2RlIGNvdW50DQoJUmVtb3Rlc0NvdW50ICs9IDENCg0KCS0tLy8gQ3JlYXRlIG5ldyB0cmVlbm9kZSBlbGVtZW50DQoJaWYgbm90IE5vVHJlZU5vZGVzIHRoZW4NCgkJSGVhZGVyRGF0YS5UcmVlTm9kZSA9IFJlbW90ZXNMaXN0OlRyZWVOb2RlKHsNCgkJCUxheW91dE9yZGVyID0gLTEgKiBSZW1vdGVzQ291bnQsDQoJCQlUaXRsZSA9IFJlbW90ZU5hbWUNCgkJfSkNCgllbmQNCg0KCWZ1bmN0aW9uIEhlYWRlckRhdGE6Q2hlY2tMaW1pdCgpDQoJCWxvY2FsIEVudHJpZXMgPSBzZWxmLkVudHJpZXMNCgkJaWYgI0VudHJpZXMgPCBMb2dMaW1pdCB0aGVuIHJldHVybiBlbmQNCgkJCQ0KCQktLS8vIEdldCBhbmQgcmVtb3ZlIGxhc3QgZWxlbWVudA0KCQlsb2NhbCBMb2cgPSB0YWJsZS5yZW1vdmUoRW50cmllcywgMSkNCgkJTG9nLlNlbGVjdGFibGU6UmVtb3ZlKCkNCgllbmQNCg0KCWZ1bmN0aW9uIEhlYWRlckRhdGE6TG9nQWRkZWQoRGF0YSkNCgkJLS0vLyBJbmNyZW1lbnQgbG9nIGNvdW50DQoJCXNlbGYuTG9nQ291bnQgKz0gMQ0KCQlzZWxmOkNoZWNrTGltaXQoKQ0KDQoJCS0tLy8gQWRkIGVudHJ5DQoJCWxvY2FsIEVudHJpZXMgPSBzZWxmLkVudHJpZXMNCgkJdGFibGUuaW5zZXJ0KEVudHJpZXMsIERhdGEpDQoJCQ0KCQlyZXR1cm4gc2VsZg0KCWVuZA0KDQoJZnVuY3Rpb24gSGVhZGVyRGF0YTpSZW1vdmUoKQ0KCQktLS8vIFJlbW92ZSBUcmVlTm9kZQ0KCQlsb2NhbCBUcmVlTm9kZSA9IHNlbGYuVHJlZU5vZGUNCgkJaWYgVHJlZU5vZGUgdGhlbg0KCQkJVHJlZU5vZGU6UmVtb3ZlKCkNCgkJZW5kDQoNCgkJLS0vLyBDbGVhciB0YWJsZXMgZnJvbSBtZW1vcnkNCgkJTG9nc1tJZF0gPSBuaWwNCgkJdGFibGUuY2xlYXIoSGVhZGVyRGF0YSkNCgllbmQNCg0KCUxvZ3NbSWRdID0gSGVhZGVyRGF0YQ0KCXJldHVybiBIZWFkZXJEYXRhDQplbmQNCg0KZnVuY3Rpb24gVWk6Q2xlYXJMb2dzKCkNCglsb2NhbCBMb2dzID0gc2VsZi5Mb2dzDQoJbG9jYWwgUmVtb3Rlc0xpc3QgPSBzZWxmLlJlbW90ZXNMaXN0DQoNCgktLS8vIENsZWFyIGFsbCBlbGVtZW50cw0KCVJlbW90ZXNDb3VudCA9IDANCglSZW1vdGVzTGlzdDpDbGVhckNoaWxkRWxlbWVudHMoKQ0KDQoJLS0vLyBDbGVhciBsb2dzIGZyb20gbWVtb3J5DQoJdGFibGUuY2xlYXIoTG9ncykNCmVuZA0KDQpmdW5jdGlvbiBVaTpRdWV1ZUxvZyhEYXRhKQ0KCWxvY2FsIExvZ1F1ZXVlID0gc2VsZi5Mb2dRdWV1ZQ0KICAgIHRhYmxlLmluc2VydChMb2dRdWV1ZSwgRGF0YSkNCmVuZA0KDQpmdW5jdGlvbiBVaTpQcm9jZXNzTG9nUXVldWUoKQ0KCWxvY2FsIFF1ZXVlID0gc2VsZi5Mb2dRdWV1ZQ0KICAgIGlmICNRdWV1ZSA8PSAwIHRoZW4gcmV0dXJuIGVuZA0KDQoJLS0vLyBDcmVhdGUgYSBsb2cgZWxlbWVudCBmb3IgZWFjaCBpbiB0aGUgUXVldWUNCiAgICBmb3IgSW5kZXgsIERhdGEgaW4gbmV4dCwgUXVldWUgZG8NCiAgICAgICAgc2VsZjpDcmVhdGVMb2coRGF0YSkNCiAgICAgICAgdGFibGUucmVtb3ZlKFF1ZXVlLCBJbmRleCkNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBVaTpCZWdpbkxvZ1NlcnZpY2UoKQ0KCWNvcm91dGluZS53cmFwKGZ1bmN0aW9uKCkNCgkJd2hpbGUgdHJ1ZSBkbw0KCQkJc2VsZjpQcm9jZXNzTG9nUXVldWUoKQ0KCQkJdGFzay53YWl0KCkNCgkJZW5kDQoJZW5kKSgpDQplbmQNCg0KZnVuY3Rpb24gVWk6RmlsdGVyTmFtZShOYW1lOiBzdHJpbmcsIENoYXJhY3RlckxpbWl0OiBudW1iZXI/KTogc3RyaW5nDQoJbG9jYWwgVHJpbW1lZCA9IE5hbWU6c3ViKDEsIENoYXJhY3RlckxpbWl0IG9yIDIwKQ0KCWxvY2FsIEZpbHRyZWQgPSBUcmltbWVkOmdzdWIoIltcblxyXSIsICIiKQ0KCUZpbHRyZWQgPSBHZW5lcmF0aW9uOk1ha2VQcmludGFibGUoRmlsdHJlZCkNCg0KCXJldHVybiBGaWx0cmVkDQplbmQNCg0KZnVuY3Rpb24gVWk6Q3JlYXRlTG9nKERhdGE6IExvZykNCgktLS8vIFVucGFjayBsb2cgZGF0YQ0KICAgIGxvY2FsIFJlbW90ZSA9IERhdGEuUmVtb3RlDQoJbG9jYWwgTWV0aG9kID0gRGF0YS5NZXRob2QNCiAgICBsb2NhbCBBcmdzID0gRGF0YS5BcmdzDQogICAgbG9jYWwgSXNSZWNlaXZlID0gRGF0YS5Jc1JlY2VpdmUNCglsb2NhbCBJZCA9IERhdGEuSWQNCglsb2NhbCBUaW1lc3RhbXAgPSBEYXRhLlRpbWVzdGFtcA0KCWxvY2FsIElzRXhwbG9pdCA9IERhdGEuSXNFeHBsb2l0DQoJDQoJbG9jYWwgSXNOaWxQYXJlbnQgPSBIb29rOkluZGV4KFJlbW90ZSwgIlBhcmVudCIpID09IG5pbA0KCWxvY2FsIFJlbW90ZURhdGEgPSBQcm9jZXNzOkdldFJlbW90ZURhdGEoSWQpDQoNCgktLS8vIFBhdXNlZA0KCWxvY2FsIFBhdXNlZCA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiUGF1c2VkIikNCglpZiBQYXVzZWQgdGhlbiByZXR1cm4gZW5kDQoNCgktLS8vIENoZWNrIGNhbGxlciAoSWdub3JlIGV4cGxvaXQgY2FsbHMpDQoJbG9jYWwgTG9nRXhwbG9pdCA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiTG9nRXhwbG9pdCIpDQoJaWYgbm90IExvZ0V4cGxvaXQgYW5kIElzRXhwbG9pdCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gSWdub3JlTmlsDQoJbG9jYWwgSWdub3JlTmlsID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJJZ25vcmVOaWwiKQ0KCWlmIElnbm9yZU5pbCBhbmQgSXNOaWxQYXJlbnQgdGhlbiByZXR1cm4gZW5kDQoNCiAgICAtLS8vIExvZ1JlY2l2ZXMgY2hlY2sNCglsb2NhbCBMb2dSZWNpdmVzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJMb2dSZWNpdmVzIikNCglpZiBub3QgTG9nUmVjaXZlcyBhbmQgSXNSZWNlaXZlIHRoZW4gcmV0dXJuIGVuZA0KDQoJbG9jYWwgU2VsZWN0TmV3ZXN0ID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJTZWxlY3ROZXdlc3QiKQ0KCWxvY2FsIE5vVHJlZU5vZGVzID0gRmxhZ3M6R2V0RmxhZ1ZhbHVlKCJOb1RyZWVOb2RlcyIpDQoNCiAgICAtLS8vIEV4Y2x1ZGVkIGNoZWNrDQogICAgaWYgUmVtb3RlRGF0YS5FeGNsdWRlZCB0aGVuIHJldHVybiBlbmQNCg0KCS0tLy8gRGVzZXJpYWxpemUgYXJndW1lbnRzDQoJQXJncyA9IENvbW11bmljYXRpb246RGVzZXJpYWxpemVUYWJsZShBcmdzKQ0KDQoJLS0vLyBEZWVwIGNsb25lIGRhdGENCglsb2NhbCBDbG9uZWRBcmdzID0gUHJvY2VzczpEZWVwQ2xvbmVUYWJsZShBcmdzKQ0KCURhdGEuQXJncyA9IENsb25lZEFyZ3MNCglEYXRhLlZhbHVlU3dhcHMgPSBHZW5lcmF0aW9uOk1ha2VWYWx1ZVN3YXBzVGFibGUoVGltZXN0YW1wKQ0KDQoJLS0vLyBHZW5lcmF0ZSBsb2cgdGl0bGUNCglsb2NhbCBDb2xvciA9IENvbmZpZy5NZXRob2RDb2xvcnNbTWV0aG9kOmxvd2VyKCldDQoJbG9jYWwgVGV4dCA9IE5vVHJlZU5vZGVzIGFuZCBge1JlbW90ZX0gfCB7TWV0aG9kfWAgb3IgTWV0aG9kDQoNCgktLS8vIEZpbmRTdHJpbmdGb3JOYW1lIGNoZWNrDQoJbG9jYWwgRmluZFN0cmluZyA9IEZsYWdzOkdldEZsYWdWYWx1ZSgiRmluZFN0cmluZ0Zvck5hbWUiKQ0KCWlmIEZpbmRTdHJpbmcgdGhlbg0KCQlmb3IgXywgQXJnIGluIG5leHQsIENsb25lZEFyZ3MgZG8NCgkJCWlmIHR5cGVvZihBcmcpID09ICJzdHJpbmciIHRoZW4NCgkJCQlsb2NhbCBGaWx0cmVkID0gc2VsZjpGaWx0ZXJOYW1lKEFyZykNCgkJCQlUZXh0ID0gYHtGaWx0cmVkfSB8IHtUZXh0fWANCgkJCQlicmVhaw0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KDQoJLS0vLyBGZXRjaCBIZWFkZXJEYXRhIGJ5IHRoZSBSZW1vdGVJRCB1c2VkIGZvciBzdGFja2luZw0KCWxvY2FsIEhlYWRlciA9IHNlbGY6R2V0UmVtb3RlSGVhZGVyKERhdGEpDQoJbG9jYWwgUmVtb3Rlc0xpc3QgPSBzZWxmLlJlbW90ZXNMaXN0DQoNCglsb2NhbCBMb2dDb3VudCA9IEhlYWRlci5Mb2dDb3VudA0KCWxvY2FsIFRyZWVOb2RlID0gSGVhZGVyLlRyZWVOb2RlIA0KCWxvY2FsIFBhcmVudCA9IFRyZWVOb2RlIG9yIFJlbW90ZXNMaXN0DQoNCgktLS8vIEluY3JlYXNlIGxvZyBjb3VudCAtIFRyZWVOb2RlcyBhcmUgaW4gR2V0UmVtb3RlSGVhZGVyIGZ1bmN0aW9uDQoJaWYgTm9UcmVlTm9kZXMgdGhlbg0KCQlSZW1vdGVzQ291bnQgKz0gMQ0KCQlMb2dDb3VudCA9IFJlbW90ZXNDb3VudA0KCWVuZA0KDQogICAgLS0vLyBDcmVhdGUgZm9jdXMgYnV0dG9uDQoJRGF0YS5IZWFkZXJEYXRhID0gSGVhZGVyDQoJRGF0YS5TZWxlY3RhYmxlID0gUGFyZW50OlNlbGVjdGFibGUoew0KCQlUZXh0ID0gVGV4dCwNCiAgICAgICAgTGF5b3V0T3JkZXIgPSAtMSAqIExvZ0NvdW50LA0KCQlUZXh0Q29sb3IzID0gQ29sb3IsDQoJCVRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0LA0KCQlDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCgkJCXNlbGY6U2V0Rm9jdXNlZFJlbW90ZShEYXRhKQ0KCQllbmQsDQogICAgfSkNCg0KCUhlYWRlcjpMb2dBZGRlZChEYXRhKQ0KDQoJLS0vLyBBdXRvIHNlbGVjdCBjaGVjaw0KCWxvY2FsIEdyb3VwU2VsZWN0ZWQgPSBBY3RpdmVEYXRhIGFuZCBBY3RpdmVEYXRhLkhlYWRlckRhdGEgPT0gSGVhZGVyDQoJaWYgU2VsZWN0TmV3ZXN0IGFuZCBHcm91cFNlbGVjdGVkIHRoZW4NCgkJc2VsZjpTZXRGb2N1c2VkUmVtb3RlKERhdGEpDQoJZW5kDQplbmQNCg0KcmV0dXJuIFVp]]
},Generation={'base64',
[[dHlwZSB0YWJsZSA9IHsNCglbYW55XTogYW55DQp9DQoNCnR5cGUgUmVtb3RlRGF0YSA9IHsNCglSZW1vdGU6IEluc3RhbmNlLA0KCUlzUmVjZWl2ZTogYm9vbGVhbj8sDQoJQXJnczogdGFibGUsDQoJTWV0aG9kOiBzdHJpbmcsDQogICAgVHJhbnNmZXJUeXBlOiBzdHJpbmcsDQoJVmFsdWVSZXBsYWNlbWVudHM6IHRhYmxlLA0KCU5vVmFyaWFibGVzOiBib29sZWFuPw0KfQ0KDQotLS8vIE1vZHVsZQ0KbG9jYWwgR2VuZXJhdGlvbiA9IHsNCglEdW1wQmFzZU5hbWUgPSAiU2lnbWFTcHktRHVtcCAlcy5sdWEiLA0KCVNjcmlwdFRlbXBsYXRlcyA9IHsNCgkJWyJSZW1vdGUiXSA9IHsNCgkJCXsiJVJlbW90ZUNhbGwlIn0NCgkJfSwNCgkJWyJTcGFtIl0gPSB7DQoJCQl7IndoaWxlIHdhaXQoKSBkbyJ9LA0KCQkJeyIlUmVtb3RlQ2FsbCUiLCAyfSwNCgkJCXsiZW5kIn0NCgkJfSwNCgkJWyJSZXBlYXQiXSA9IHsNCgkJCXsiZm9yIEluZGV4ID0gMSwgMTAgZG8ifSwNCgkJCXsiJVJlbW90ZUNhbGwlIiwgMn0sDQoJCQl7ImVuZCJ9DQoJCX0sDQoJCVsiQmxvY2siXSA9IHsNCgkJCVsiX19pbmRleCJdID0gew0KCQkJCXsibG9jYWwgT2xkOyBPbGQgPSBob29rZnVuY3Rpb24oJVNpZ25hbCUsIGZ1bmN0aW9uKHNlbGYsIC4uLikifSwNCgkJCQl7ImlmIHNlbGYgPT0gJVJlbW90ZSUgdGhlbiIsIDJ9LA0KCQkJCXsicmV0dXJuIiwgM30sDQoJCQkJeyJlbmQiLCAyfSwNCgkJCQl7InJldHVybiBPbGQoc2VsZiwgLi4uKSIsIDJ9LA0KCQkJCXsiZW5kKSJ9DQoJCQl9LA0KCQkJWyJfX25hbWVjYWxsIl0gPSB7DQoJCQkJeyJsb2NhbCBPbGQ7IE9sZCA9IGhvb2ttZXRhbWV0aG9kKGdhbWUsIFwiX19uYW1lY2FsbFwiLCBmdW5jdGlvbihzZWxmLCAuLi4pIn0sDQoJCQkJeyJsb2NhbCBNZXRob2QgPSBnZXRuYW1lY2FsbG1ldGhvZCgpIiwgMn0sDQoJCQkJeyJpZiBzZWxmID09ICVSZW1vdGUlIGFuZCBNZXRob2QgPT0gXCIlTWV0aG9kJVwiIHRoZW4iLCAyfSwNCgkJCQl7InJldHVybiIsIDN9LA0KCQkJCXsiZW5kIiwgMn0sDQoJCQkJeyJyZXR1cm4gT2xkKHNlbGYsIC4uLikiLCAyfSwNCgkJCQl7ImVuZCkifQ0KCQkJfSwNCgkJCVsiQ29ubmVjdCJdID0gew0KCQkJCXsiZm9yIF8sIENvbm5lY3Rpb24gaW4gZ2V0Y29ubmVjdGlvbnMoJVNpZ25hbCUpIGRvIn0sDQoJCQkJeyJDb25uZWN0aW9uOkRpc2FibGUoKSIsIDJ9LA0KCQkJCXsiZW5kIn0NCgkJCX0NCgkJfQ0KCX0NCn0NCg0KLS0vLyBNb2R1bGVzDQpsb2NhbCBDb25maWcNCmxvY2FsIEhvb2sNCmxvY2FsIFBhcnNlck1vZHVsZQ0KbG9jYWwgVGhpc1NjcmlwdCA9IHNjcmlwdA0KDQpsb2NhbCBmdW5jdGlvbiBNZXJnZShCYXNlOiB0YWJsZSwgTmV3OiB0YWJsZSkNCglmb3IgS2V5LCBWYWx1ZSBpbiBuZXh0LCBOZXcgZG8NCgkJQmFzZVtLZXldID0gVmFsdWUNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkluaXQoRGF0YTogdGFibGUpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KCWxvY2FsIENvbmZpZ3VyYXRpb24gPSBNb2R1bGVzLkNvbmZpZ3VyYXRpb24NCg0KCS0tLy8gTW9kdWxlcw0KCUNvbmZpZyA9IE1vZHVsZXMuQ29uZmlnDQoJSG9vayA9IE1vZHVsZXMuSG9vaw0KCQ0KCS0tLy8gSW1wb3J0IHBhcnNlcg0KCWxvY2FsIFBhcnNlclVybCA9IENvbmZpZ3VyYXRpb24uUGFyc2VyVXJsDQoJc2VsZjpMb2FkUGFyc2VyKFBhcnNlclVybCkNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOk1ha2VQcmludGFibGUoU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcNCglsb2NhbCBGb3JtYXR0ZXIgPSBQYXJzZXJNb2R1bGUuTW9kdWxlcy5Gb3JtYXR0ZXINCglyZXR1cm4gRm9ybWF0dGVyOk1ha2VQcmludGFibGUoU3RyaW5nKQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246VGltZVN0YW1wRmlsZShGaWxlUGF0aDogc3RyaW5nKTogc3RyaW5nDQoJbG9jYWwgVGltZVN0YW1wID0gb3MuZGF0ZSgiJVktJW0tJWRfJUgtJU0tJVMiKQ0KCWxvY2FsIEZvcm1hdHRlZCA9IEZpbGVQYXRoOmZvcm1hdChUaW1lU3RhbXApDQoJcmV0dXJuIEZvcm1hdHRlZA0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246V3JpdGVEdW1wKENvbnRlbnQ6IHN0cmluZyk6IHN0cmluZw0KCWxvY2FsIER1bXBCYXNlTmFtZSA9IHNlbGYuRHVtcEJhc2VOYW1lDQoJbG9jYWwgRmlsZVBhdGggPSBzZWxmOlRpbWVTdGFtcEZpbGUoRHVtcEJhc2VOYW1lKQ0KDQoJLS0vLyBXcml0ZSB0byBmaWxlDQoJd3JpdGVmaWxlKEZpbGVQYXRoLCBDb250ZW50KQ0KDQoJcmV0dXJuIEZpbGVQYXRoDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpMb2FkUGFyc2VyKE1vZHVsZVVybDogc3RyaW5nKQ0KCVBhcnNlck1vZHVsZSA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KE1vZHVsZVVybCksICJQYXJzZXIiKSgpDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpNYWtlVmFsdWVTd2Fwc1RhYmxlKCk6IHRhYmxlDQoJbG9jYWwgRm9ybWF0dGVyID0gUGFyc2VyTW9kdWxlLk1vZHVsZXMuRm9ybWF0dGVyDQoJcmV0dXJuIEZvcm1hdHRlcjpNYWtlUmVwbGFjZW1lbnRzKCkNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOlNldFN3YXBzQ2FsbGJhY2soQ2FsbGJhY2s6IChJbnRlcmZhY2U6IHRhYmxlKSAtPiAoKSkNCglzZWxmLlN3YXBzQ2FsbGJhY2sgPSBDYWxsYmFjaw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246R2V0QmFzZShNb2R1bGUpOiAoc3RyaW5nLCBib29sZWFuKQ0KCS0tbG9jYWwgQ29kZSA9ICItLSBHZW5lcmF0ZWQgd2l0aCBzaWdtYSBzcHkgQk9JSUlJSUlJSUkgKCs5OTk5OTk5IEFVUkEpXG4iDQoJbG9jYWwgQ29kZSA9ICItLSBHZW5lcmF0ZWQgd2l0aCBTaWdtYSBTcHkgR2l0aHViOiBodHRwczovL2dpdGh1Yi5jb20vZGVwdGhzby9TaWdtYS1TcHlcbiINCg0KCS0tLy8gR2VuZXJhdGUgdmFyaWFibGVzIGNvZGUNCglsb2NhbCBWYXJpYWJsZXMgPSBNb2R1bGUuUGFyc2VyOk1ha2VWYXJpYWJsZUNvZGUoew0KCQkiU2VydmljZXMiLCAiUmVtb3RlIiwgIlZhcmlhYmxlcyINCgl9KQ0KDQoJbG9jYWwgTm9WYXJpYWJsZXMgPSBWYXJpYWJsZXMgPT0gIiINCglDb2RlIC4uPSBWYXJpYWJsZXMNCg0KCXJldHVybiBDb2RlLCBOb1ZhcmlhYmxlcw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246R2V0U3dhcHMoKQ0KCWxvY2FsIEZ1bmMgPSBzZWxmLlN3YXBzQ2FsbGJhY2sNCglsb2NhbCBTd2FwcyA9IHt9DQoNCglsb2NhbCBJbnRlcmZhY2UgPSB7fQ0KCWZ1bmN0aW9uIEludGVyZmFjZTpBZGRTd2FwKE9iamVjdDogSW5zdGFuY2UsIERhdGE6IHRhYmxlKQ0KCQlpZiBub3QgT2JqZWN0IHRoZW4gcmV0dXJuIGVuZA0KCQlTd2Fwc1tPYmplY3RdID0gRGF0YQ0KCWVuZA0KDQoJLS0vLyBJbnZva2UgR2V0U3dhcHMgZnVuY3Rpb24NCglGdW5jKEludGVyZmFjZSkNCg0KCXJldHVybiBTd2Fwcw0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246UGlja1ZhcmlhYmxlTmFtZSgpOiBzdHJpbmcNCglsb2NhbCBOYW1lcyA9IENvbmZpZy5WYXJpYWJsZU5hbWVzDQoJcmV0dXJuIE5hbWVzW21hdGgucmFuZG9tKDEsICNOYW1lcyldDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpOZXdQYXJzZXIoRXh0cmE6IHRhYmxlKQ0KCWxvY2FsIFZhcmlhYmxlTmFtZSA9IHNlbGY6UGlja1ZhcmlhYmxlTmFtZSgpDQoJbG9jYWwgU3dhcHMgPSBzZWxmOkdldFN3YXBzKCkNCg0KCWxvY2FsIENvbmZpZ3VyYXRpb24gPSB7DQoJCVZhcmlhYmxlQmFzZSA9IFZhcmlhYmxlTmFtZSwNCgkJU3dhcHMgPSBTd2FwcywNCgkJSW5kZXhGdW5jID0gZnVuY3Rpb24oLi4uKQ0KCQkJcmV0dXJuIEhvb2s6SW5kZXgoLi4uKQ0KCQllbmQsDQoJfQ0KDQoJLS0vLyBNZXJnZSBleHRyYSBjb25maWd1cmF0aW9uDQoJTWVyZ2UoQ29uZmlndXJhdGlvbiwgRXh0cmEpDQoNCgktLS8vIENyZWF0ZSBuZXcgcGFyc2VyIGluc3RhbmNlDQoJcmV0dXJuIFBhcnNlck1vZHVsZTpOZXcoQ29uZmlndXJhdGlvbikNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkluZGVudChJbmRlbnRTdHJpbmc6IHN0cmluZywgTGluZTogc3RyaW5nKQ0KCXJldHVybiBge0luZGVudFN0cmluZ317TGluZX1gDQplbmQNCg0KdHlwZSBDYWxsSW5mbyA9IHsNCglBcmd1bWVudHM6IHRhYmxlLA0KCUluZGVudDogbnVtYmVyLA0KCVJlbW90ZVZhcmlhYmxlOiBzdHJpbmcNCn0NCmZ1bmN0aW9uIEdlbmVyYXRpb246Q2FsbFJlbW90ZVNjcmlwdChEYXRhLCBJbmZvOiBDYWxsSW5mbyk6IHN0cmluZw0KCWxvY2FsIElzUmVjZWl2ZSA9IERhdGEuSXNSZWNlaXZlDQoJbG9jYWwgTWV0aG9kID0gRGF0YS5NZXRob2QNCglsb2NhbCBBcmdzID0gRGF0YS5BcmdzDQoNCglsb2NhbCBSZW1vdGVWYXJpYWJsZSA9IEluZm8uUmVtb3RlVmFyaWFibGUNCglsb2NhbCBJbmRlbnQgPSBJbmZvLkluZGVudCBvciAwDQoJbG9jYWwgTW9kdWxlID0gSW5mby5Nb2R1bGUNCg0KCWxvY2FsIFZhcmlhYmxlcyA9IE1vZHVsZS5WYXJpYWJsZXMNCglsb2NhbCBQYXJzZXIgPSBNb2R1bGUuUGFyc2VyDQoJbG9jYWwgTm9WYXJpYWJsZXMgPSBEYXRhLk5vVmFyaWFibGVzDQoNCglsb2NhbCBJbmRlbnRTdHJpbmcgPSBzZWxmOk1ha2VJbmRlbnQoSW5kZW50KQ0KDQoJLS0vLyBQYXJzZSBhcmd1bWVudHMNCglsb2NhbCBQYXJzZWRBcmdzLCBJdGVtc0NvdW50LCBJc0FycmF5ID0gUGFyc2VyOlBhcnNlVGFibGVJbnRvU3RyaW5nKHsNCgkJTm9CcmFja2V0cyA9IHRydWUsDQoJCU5vVmFyaWFibGVzID0gTm9WYXJpYWJsZXMsDQoJCVRhYmxlID0gQXJncywNCgkJSW5kZW50ID0gSW5kZW50DQoJfSkNCg0KCS0tLy8gQ3JlYXRlIHRhYmxlIHZhcmlhYmxlIGlmIG5vdCBhbiBhcnJheQ0KCWlmIG5vdCBJc0FycmF5IG9yIE5vVmFyaWFibGVzIHRoZW4NCgkJUGFyc2VkQXJncyA9IFZhcmlhYmxlczpNYWtlVmFyaWFibGUoew0KCQkJVmFsdWUgPSAoInslc30iKTpmb3JtYXQoUGFyc2VkQXJncyksDQoJCQlDb21tZW50ID0gbm90IElzQXJyYXkgYW5kICJBcmd1bWVudHMgYXJlbid0IG9yZGVyZWQiIG9yIG5pbCwNCgkJCU5hbWUgPSAiUmVtb3RlQXJncyIsDQoJCQlDbGFzcyA9ICJSZW1vdGUiDQoJCX0pDQoJZW5kDQoNCgktLS8vIFdyYXAgaW4gYSB1bnBhY2sgaWYgdGhlIHRhYmxlIGlzIGEgZGljdA0KCWlmIEl0ZW1zQ291bnQgPiAwIGFuZCBub3QgSXNBcnJheSB0aGVuDQoJCVBhcnNlZEFyZ3MgPSBgdW5wYWNrKHtQYXJzZWRBcmdzfSwgMSwgdGFibGUubWF4bih7UGFyc2VkQXJnc30pKWANCgllbmQNCg0KCS0tLy8gRmlyZXNpZ25hbCBzY3JpcHQgZm9yIGNsaWVudCByZWNpZXZlcw0KCWlmIElzUmVjZWl2ZSB0aGVuDQoJCWxvY2FsIFNlY29uZCA9IEl0ZW1zQ291bnQgPD0gMCBhbmQgIiIgb3IgYCwge1BhcnNlZEFyZ3N9YA0KCQlsb2NhbCBTaWduYWwgPSBge1JlbW90ZVZhcmlhYmxlfS57TWV0aG9kfWANCg0KCQlsb2NhbCBDb2RlID0gYC0tIFRoaXMgZGF0YSB3YXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyYA0KCQlQYXJzZWRBcmdzID0gc2VsZjpJbmRlbnQoSW5kZW50U3RyaW5nLCBDb2RlKQ0KCQlDb2RlIC4uPSBgXG57SW5kZW50U3RyaW5nfWZpcmVzaWduYWwoe1NpZ25hbH17U2Vjb25kfSlgDQoJCQ0KCQlyZXR1cm4gQ29kZQ0KCWVuZA0KCQ0KCS0tLy8gUmVtb3RlIGludm9rZSBzY3JpcHQNCglyZXR1cm4gYHtSZW1vdGVWYXJpYWJsZX06e01ldGhvZH0oe1BhcnNlZEFyZ3N9KWANCmVuZA0KDQotLS8vIFZhcmlhYmxlczogJVZhcmlhYmxlTmFtZSUNCmZ1bmN0aW9uIEdlbmVyYXRpb246QXBwbHlWYXJpYWJsZXMoU3RyaW5nOiBzdHJpbmcsIFZhcmlhYmxlczogdGFibGUsIC4uLik6IHN0cmluZw0KCWZvciBWYXJpYWJsZSwgVmFsdWUgaW4gVmFyaWFibGVzIGRvDQoJCS0tLy8gSW52b2tlIHZhbHVlIGZ1bmN0aW9uDQoJCWlmIHR5cGVvZihWYWx1ZSkgPT0gImZ1bmN0aW9uIiB0aGVuDQoJCQlWYWx1ZSA9IFZhbHVlKC4uLikNCgkJZW5kDQoNCgkJU3RyaW5nID0gU3RyaW5nOmdzdWIoYCUle1ZhcmlhYmxlfSUlYCwgZnVuY3Rpb24oKQ0KCQkJcmV0dXJuIFZhbHVlDQoJCWVuZCkNCgllbmQNCglyZXR1cm4gU3RyaW5nDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpNYWtlSW5kZW50KEluZGVudDogbnVtYmVyKQ0KCXJldHVybiBzdHJpbmcucmVwKCIJIiwgSW5kZW50KQ0KZW5kDQoNCnR5cGUgU2NyaXB0RGF0YSA9IHsNCglWYXJpYWJsZXM6IHRhYmxlLA0KCU1ldGFNZXRob2Q6IHN0cmluZw0KfQ0KZnVuY3Rpb24gR2VuZXJhdGlvbjpNYWtlQ2FsbENvZGUoU2NyaXB0VHlwZTogc3RyaW5nLCBEYXRhOiBTY3JpcHREYXRhKTogc3RyaW5nDQoJbG9jYWwgU2NyaXB0VGVtcGxhdGVzID0gc2VsZi5TY3JpcHRUZW1wbGF0ZXMNCglsb2NhbCBUZW1wbGF0ZSA9IFNjcmlwdFRlbXBsYXRlc1tTY3JpcHRUeXBlXQ0KDQoJYXNzZXJ0KFRlbXBsYXRlLCBge1NjcmlwdFR5cGV9IGlzIG5vdCBhIHZhbGlkIHNjcmlwdCB0eXBlIWApDQoNCglsb2NhbCBWYXJpYWJsZXMgPSBEYXRhLlZhcmlhYmxlcw0KCWxvY2FsIE1ldGFNZXRob2QgPSBEYXRhLk1ldGFNZXRob2QNCglsb2NhbCBNZXRhTWV0aG9kcyA9IHsiX19pbmRleCIsICJfX25hbWVjYWxsIiwgIkNvbm5lY3QifQ0KDQoJbG9jYWwgZnVuY3Rpb24gQ29tcGlsZShUZW1wbGF0ZTogdGFibGUpOiBzdHJpbmcNCgkJbG9jYWwgT3V0ID0gIiINCg0KCQlmb3IgS2V5LCBWYWx1ZSBpbiBuZXh0LCBUZW1wbGF0ZSBkbw0KCQkJLS0vLyBNZXRhTWV0aG9kIGNoZWNrDQoJCQlsb2NhbCBJc01ldGFUeXBlT25seSA9IHRhYmxlLmZpbmQoTWV0YU1ldGhvZHMsIEtleSkNCgkJCWlmIElzTWV0YVR5cGVPbmx5IHRoZW4NCgkJCQlpZiBLZXkgPT0gTWV0YU1ldGhvZCB0aGVuDQoJCQkJCWxvY2FsIExpbmUgPSBDb21waWxlKFZhbHVlKQ0KCQkJCQlPdXQgLi49IExpbmUNCgkJCQllbmQNCgkJCQljb250aW51ZQ0KCQkJZW5kDQoNCgkJCS0tLy8gSW5mb3JtYXRpb24NCgkJCWxvY2FsIENvbnRlbnQsIEluZGVudCA9IFZhbHVlWzFdLCBWYWx1ZVsyXSBvciAwDQoJCQlJbmRlbnQgPSBtYXRoLmNsYW1wKEluZGVudC0xLCAwLCA5OTk5KQ0KDQoJCQktLS8vIE1ha2UgbGluZQ0KCQkJbG9jYWwgTGluZSA9IHNlbGY6QXBwbHlWYXJpYWJsZXMoQ29udGVudCwgVmFyaWFibGVzLCBJbmRlbnQpDQoJCQlsb2NhbCBJbmRlbnRTdHJpbmcgPSBzZWxmOk1ha2VJbmRlbnQoSW5kZW50KQ0KDQoJCQktLS8vIEFwcGVuZCB0byBjb2RlDQoJCQlPdXQgLi49IGB7SW5kZW50U3RyaW5nfXtMaW5lfVxuYA0KCQllbmQNCg0KCQlyZXR1cm4gT3V0DQoJZW5kDQoJDQoJcmV0dXJuIENvbXBpbGUoVGVtcGxhdGUpDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpSZW1vdGVTY3JpcHQoTW9kdWxlLCBEYXRhOiBSZW1vdGVEYXRhLCBTY3JpcHRUeXBlOiBzdHJpbmcpOiBzdHJpbmcNCgktLS8vIFVucGFjayBkYXRhDQoJbG9jYWwgUmVtb3RlID0gRGF0YS5SZW1vdGUNCglsb2NhbCBBcmdzID0gRGF0YS5BcmdzDQoJbG9jYWwgTWV0aG9kID0gRGF0YS5NZXRob2QNCglsb2NhbCBNZXRhTWV0aG9kID0gRGF0YS5NZXRhTWV0aG9kDQoNCgktLS8vIFJlbW90ZSBpbmZvDQoJbG9jYWwgQ2xhc3NOYW1lID0gSG9vazpJbmRleChSZW1vdGUsICJDbGFzc05hbWUiKQ0KCWxvY2FsIElzTmlsUGFyZW50ID0gSG9vazpJbmRleChSZW1vdGUsICJQYXJlbnQiKSA9PSBuaWwNCgkNCglsb2NhbCBWYXJpYWJsZXMgPSBNb2R1bGUuVmFyaWFibGVzDQoJbG9jYWwgRm9ybWF0dGVyID0gTW9kdWxlLkZvcm1hdHRlcg0KCQ0KCS0tLy8gUHJlLXJlbmRlciB2YXJpYWJsZXMNCglWYXJpYWJsZXM6UHJlcmVuZGVyVmFyaWFibGVzKEFyZ3MsIHsiSW5zdGFuY2UifSkNCg0KCS0tLy8gQ3JlYXRlIHJlbW90ZSB2YXJpYWJsZQ0KCWxvY2FsIFJlbW90ZVZhcmlhYmxlID0gVmFyaWFibGVzOk1ha2VWYXJpYWJsZSh7DQoJCVZhbHVlID0gRm9ybWF0dGVyOkZvcm1hdChSZW1vdGUsIHsNCgkJCU5vVmFyaWFibGVzID0gdHJ1ZQ0KCQl9KSwNCgkJQ29tbWVudCA9IGB7Q2xhc3NOYW1lfSB7SXNOaWxQYXJlbnQgYW5kICJ8IFJlbW90ZSBwYXJlbnQgaXMgbmlsIiBvciAiIn1gLA0KCQlOYW1lID0gRm9ybWF0dGVyOk1ha2VOYW1lKFJlbW90ZSksDQoJCUxvb2t1cCA9IFJlbW90ZSwNCgkJQ2xhc3MgPSAiUmVtb3RlIg0KCX0pDQoNCgktLS8vIEdlbmVyYXRlIGNhbGwgc2NyaXB0DQoJbG9jYWwgQ2FsbENvZGUgPSBzZWxmOk1ha2VDYWxsQ29kZShTY3JpcHRUeXBlLCB7DQoJCVZhcmlhYmxlcyA9IHsNCgkJCVsiUmVtb3RlQ2FsbCJdID0gZnVuY3Rpb24oSW5kZW50OiBudW1iZXIpDQoJCQkJcmV0dXJuIHNlbGY6Q2FsbFJlbW90ZVNjcmlwdChEYXRhLCB7DQoJCQkJCVJlbW90ZVZhcmlhYmxlID0gUmVtb3RlVmFyaWFibGUsDQoJCQkJCUluZGVudCA9IEluZGVudCwNCgkJCQkJTW9kdWxlID0gTW9kdWxlDQoJCQkJfSkNCgkJCWVuZCwNCgkJCVsiUmVtb3RlIl0gPSBSZW1vdGVWYXJpYWJsZSwNCgkJCVsiTWV0aG9kIl0gPSBNZXRob2QsDQoJCQlbIlNpZ25hbCJdID0gYHtSZW1vdGVWYXJpYWJsZX0ue01ldGhvZH1gDQoJCX0sDQoJCU1ldGFNZXRob2QgPSBNZXRhTWV0aG9kDQoJfSkNCgkNCgktLS8vIE1ha2UgY29kZQ0KCWxvY2FsIENvZGUgPSBzZWxmOkdldEJhc2UoTW9kdWxlKQ0KCXJldHVybiBge0NvZGV9XG57Q2FsbENvZGV9YA0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246Q29ubmVjdGlvbnNUYWJsZShTaWduYWw6IFJCWFNjcmlwdFNpZ25hbCk6IHRhYmxlDQoJbG9jYWwgQ29ubmVjdGlvbnMgPSBnZXRjb25uZWN0aW9ucyhTaWduYWwpDQoJbG9jYWwgRGF0YUFycmF5ID0ge30NCg0KCWZvciBfLCBDb25uZWN0aW9uIGluIG5leHQsIENvbm5lY3Rpb25zIGRvDQoJCWxvY2FsIEZ1bmN0aW9uID0gQ29ubmVjdGlvbi5GdW5jdGlvbg0KCQlsb2NhbCBTY3JpcHQgPSByYXdnZXQoZ2V0ZmVudihGdW5jdGlvbiksICJzY3JpcHQiKQ0KDQoJCS0tLy8gU2tpcCBpZiBzZWxmDQoJCWlmIFNjcmlwdCA9PSBUaGlzU2NyaXB0IHRoZW4gY29udGludWUgZW5kDQoNCgkJLS0vLyBDb25uZWN0aW9uIGRhdGENCgkJbG9jYWwgRGF0YSA9IHsNCgkJCUZ1bmN0aW9uID0gRnVuY3Rpb24sDQoJCQlTdGF0ZSA9IENvbm5lY3Rpb24uU3RhdGUsDQoJCQlTY3JpcHQgPSBTY3JpcHQNCgkJfQ0KDQoJCXRhYmxlLmluc2VydChEYXRhQXJyYXksIERhdGEpDQoJZW5kDQoNCglyZXR1cm4gRGF0YUFycmF5DQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpUYWJsZVNjcmlwdChNb2R1bGUsIFRhYmxlOiB0YWJsZSk6IHN0cmluZw0KCS0tLy8gUHJlLXJlbmRlciB2YXJpYWJsZXMNCglNb2R1bGUuVmFyaWFibGVzOlByZXJlbmRlclZhcmlhYmxlcyhUYWJsZSwgeyJJbnN0YW5jZSJ9KQ0KDQoJLS0vLyBQYXJzZSBhcmd1bWVudHMNCglsb2NhbCBQYXJzZWRUYWJsZSA9IE1vZHVsZS5QYXJzZXI6UGFyc2VUYWJsZUludG9TdHJpbmcoew0KCQlUYWJsZSA9IFRhYmxlDQoJfSkNCg0KCS0tLy8gR2VuZXJhdGUgc2NyaXB0DQoJbG9jYWwgQ29kZSwgTm9WYXJpYWJsZXMgPSBzZWxmOkdldEJhc2UoTW9kdWxlKQ0KCWxvY2FsIFNlcGVyYXRvciA9IE5vVmFyaWFibGVzIGFuZCAiIiBvciAiXG4iDQoJQ29kZSAuLj0gYHtTZXBlcmF0b3J9cmV0dXJuIHtQYXJzZWRUYWJsZX1gDQoNCglyZXR1cm4gQ29kZQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246TWFrZVR5cGVzVGFibGUoVGFibGU6IHRhYmxlKTogdGFibGUNCglsb2NhbCBUeXBlcyA9IHt9DQoNCglmb3IgS2V5LCBWYWx1ZSBpbiBuZXh0LCBUYWJsZSBkbw0KCQlsb2NhbCBUeXBlID0gdHlwZW9mKFZhbHVlKQ0KCQlpZiBUeXBlID09ICJ0YWJsZSIgdGhlbg0KCQkJVHlwZSA9IHNlbGY6TWFrZVR5cGVzVGFibGUoVmFsdWUpDQoJCWVuZA0KDQoJCVR5cGVzW0tleV0gPSBUeXBlDQoJZW5kDQoNCglyZXR1cm4gVHlwZXMNCmVuZA0KDQpmdW5jdGlvbiBHZW5lcmF0aW9uOkNvbm5lY3Rpb25JbmZvKFJlbW90ZTogSW5zdGFuY2UsIENsYXNzRGF0YTogdGFibGUpOiB0YWJsZT8NCglsb2NhbCBSZWNlaXZlTWV0aG9kcyA9IENsYXNzRGF0YS5SZWNlaXZlDQoJaWYgbm90IFJlY2VpdmVNZXRob2RzIHRoZW4gcmV0dXJuIGVuZA0KDQoJbG9jYWwgQ29ubmVjdGlvbnMgPSB7fQ0KCWZvciBfLCBNZXRob2Q6IHN0cmluZyBpbiBuZXh0LCBSZWNlaXZlTWV0aG9kcyBkbw0KCQlwY2FsbChmdW5jdGlvbigpIC0tIFRPRE86IEdFVENBTExCQUNLVkFMVUUNCgkJCWxvY2FsIFNpZ25hbCA9IEhvb2s6SW5kZXgoUmVtb3RlLCBNZXRob2QpDQoJCQlDb25uZWN0aW9uc1tNZXRob2RdID0gc2VsZjpDb25uZWN0aW9uc1RhYmxlKFNpZ25hbCkNCgkJZW5kKQ0KCWVuZA0KDQoJcmV0dXJuIENvbm5lY3Rpb25zDQplbmQNCg0KZnVuY3Rpb24gR2VuZXJhdGlvbjpBZHZhbmNlZEluZm8oTW9kdWxlLCBEYXRhOiB0YWJsZSk6IHN0cmluZw0KCS0tLy8gVW5wYWNrIHJlbW90ZSBkYXRhDQoJbG9jYWwgTWV0YU1ldGhvZCA9IERhdGEuTWV0YU1ldGhvZA0KCWxvY2FsIEZ1bmN0aW9uID0gRGF0YS5DYWxsaW5nRnVuY3Rpb24NCglsb2NhbCBDbGFzc0RhdGEgPSBEYXRhLkNsYXNzRGF0YQ0KCWxvY2FsIE1ldGhvZCA9IERhdGEuTWV0aG9kDQoJbG9jYWwgUmVtb3RlID0gRGF0YS5SZW1vdGUNCglsb2NhbCBTY3JpcHQgPSBEYXRhLkNhbGxpbmdTY3JpcHQNCglsb2NhbCBTb3VyY2VTY3JpcHQgPSBEYXRhLlNvdXJjZVNjcmlwdA0KCWxvY2FsIElkID0gRGF0YS5JZA0KCWxvY2FsIEFyZ3MgPSBEYXRhLkFyZ3MNCgkNCgktLS8vIEFkdmFuY2VkIGluZm8gdGFibGUgYmFzZQ0KCWxvY2FsIEZ1bmN0aW9uSW5mbyA9IHsNCgkJWyJDYWxsZXIiXSA9IHsNCgkJCVsiU291cmNlU2NyaXB0Il0gPSBTb3VyY2VTY3JpcHQsDQoJCQlbIkNhbGxpbmdTY3JpcHQiXSA9IFNjcmlwdCwNCgkJCVsiQ2FsbGluZ0Z1bmN0aW9uIl0gPSBGdW5jdGlvbg0KCQl9LA0KCQlbIlJlbW90ZSJdID0gew0KCQkJWyJSZW1vdGUiXSA9IFJlbW90ZSwNCgkJCVsiUmVtb3RlSUQiXSA9IElkLA0KCQkJWyJNZXRob2QiXSA9IE1ldGhvZCwNCgkJCVsiQ29ubmVjdGlvbnMiXSA9IHNlbGY6Q29ubmVjdGlvbkluZm8oUmVtb3RlLCBDbGFzc0RhdGEpDQoJCX0sDQoJCVsiQXJndW1lbnRzIl0gPSB7DQoJCQlbIkxlbmd0aCJdID0gI0FyZ3MsDQoJCQlbIlR5cGVzIl0gPSBzZWxmOk1ha2VUeXBlc1RhYmxlKEFyZ3MpLA0KCQl9LA0KCQlbIk1ldGFNZXRob2QiXSA9IE1ldGFNZXRob2QsDQoJCVsiSXNBY3RvciJdID0gRGF0YS5Jc0FjdG9yLA0KCX0NCg0KCS0tLy8gU29tZSBjbG9zdXJlcyBtYXkgbm90IGJlIGx1YQ0KCWlmIGlzbGNsb3N1cmUoRnVuY3Rpb24pIHRoZW4NCgkJRnVuY3Rpb25JbmZvWyJVcFZhbHVlcyJdID0gZGVidWcuZ2V0dXB2YWx1ZXMoRnVuY3Rpb24pDQoJCUZ1bmN0aW9uSW5mb1siQ29uc3RhbnRzIl0gPSBkZWJ1Zy5nZXRjb25zdGFudHMoRnVuY3Rpb24pDQoJZW5kDQoNCgktLS8vIEdlbmVyYXRlIHNjcmlwdA0KCXJldHVybiBzZWxmOlRhYmxlU2NyaXB0KE1vZHVsZSwgRnVuY3Rpb25JbmZvKQ0KZW5kDQoNCmZ1bmN0aW9uIEdlbmVyYXRpb246RHVtcExvZ3MoTG9nczogdGFibGUpOiBzdHJpbmcNCglsb2NhbCBCYXNlRGF0YQ0KCWxvY2FsIFBhcnNlZCA9IHsNCgkJUmVtb3RlID0gbmlsLA0KCQlDYWxscyA9IHt9DQoJfQ0KDQoJLS0vLyBDcmVhdGUgbmV3IHBhcnNlciBpbnN0YW5jZQ0KCWxvY2FsIE1vZHVsZSA9IEdlbmVyYXRpb246TmV3UGFyc2VyKCkNCg0KCWZvciBfLCBEYXRhIGluIExvZ3MgZG8NCgkJbG9jYWwgQ2FsbHMgPSBQYXJzZWQuQ2FsbHMNCgkJbG9jYWwgVGFibGUgPSB7DQoJCQlBcmdzID0gRGF0YS5BcmdzLA0KCQkJVGltZXN0YW1wID0gRGF0YS5UaW1lc3RhbXAsDQoJCQlSZXR1cm5WYWx1ZXMgPSBEYXRhLlJldHVyblZhbHVlcywNCgkJCU1ldGhvZCA9IERhdGEuTWV0aG9kLA0KCQkJTWV0YU1ldGhvZCA9IERhdGEuTWV0YU1ldGhvZCwNCgkJCUNhbGxpbmdTY3JpcHQgPSBEYXRhLkNhbGxpbmdTY3JpcHQsDQoJCX0NCg0KCQktLS8vIEFwcGVuZA0KCQl0YWJsZS5pbnNlcnQoQ2FsbHMsIFRhYmxlKQ0KDQoJCS0tLy8gU2V0IEJhc2VEYXRhDQoJCWlmIG5vdCBCYXNlRGF0YSB0aGVuDQoJCQlCYXNlRGF0YSA9IERhdGENCgkJZW5kDQoJZW5kDQoNCgktLS8vIEJhc2VkYXRhIG1lcmdlDQoJUGFyc2VkLlJlbW90ZSA9IEJhc2VEYXRhLlJlbW90ZQ0KDQoJLS0vLyBDb21waWxlIGFuZCBzYXZlDQoJbG9jYWwgT3V0cHV0ID0gc2VsZjpUYWJsZVNjcmlwdChNb2R1bGUsIFBhcnNlZCkNCglsb2NhbCBGaWxlUGF0aCA9IHNlbGY6V3JpdGVEdW1wKE91dHB1dCkNCgkNCglyZXR1cm4gRmlsZVBhdGgNCmVuZA0KDQpyZXR1cm4gR2VuZXJhdGlvbg0K]]
},Communication={'base64',
[[dHlwZSB0YWJsZSA9IHsNCiAgICBbYW55XTogYW55DQp9DQoNCi0tLy8gTW9kdWxlDQpsb2NhbCBNb2R1bGUgPSB7DQogICAgQ29tbUNhbGxiYWNrcyA9IHt9DQp9DQoNCmxvY2FsIENvbW1XcmFwcGVyID0ge30NCkNvbW1XcmFwcGVyLl9faW5kZXggPSBDb21tV3JhcHBlcg0KDQotLS8vIFNlcnZpY2VzDQpsb2NhbCBDb3JlR3VpDQoNCi0tLy8gTW9kdWxlcw0KbG9jYWwgSG9vaw0KbG9jYWwgQ2hhbm5lbA0KbG9jYWwgQ29uZmlnDQpsb2NhbCBQcm9jZXNzDQoNCmZ1bmN0aW9uIE1vZHVsZTpJbml0KERhdGEpDQogICAgbG9jYWwgTW9kdWxlcyA9IERhdGEuTW9kdWxlcw0KICAgIGxvY2FsIFNlcnZpY2VzID0gRGF0YS5TZXJ2aWNlcw0KDQogICAgSG9vayA9IE1vZHVsZXMuSG9vaw0KICAgIFByb2Nlc3MgPSBNb2R1bGVzLlByb2Nlc3MNCiAgICBDb25maWcgPSBNb2R1bGVzLkNvbmZpZyBvciBDb25maWcNCiAgICBDb3JlR3VpID0gU2VydmljZXMuQ29yZUd1aQ0KZW5kDQoNCmZ1bmN0aW9uIENvbW1XcmFwcGVyOkZpcmUoLi4uKQ0KICAgIGxvY2FsIFF1ZXVlID0gc2VsZi5RdWV1ZQ0KICAgIHRhYmxlLmluc2VydChRdWV1ZSwgey4uLn0pDQplbmQNCg0KZnVuY3Rpb24gQ29tbVdyYXBwZXI6UHJvY2Vzc0FyZ3VtZW50cyhBcmd1bWVudHMpIA0KICAgIGxvY2FsIENoYW5uZWwgPSBzZWxmLkNoYW5uZWwNCiAgICBDaGFubmVsOkZpcmUoUHJvY2VzczpVbnBhY2soQXJndW1lbnRzKSkNCmVuZA0KDQpmdW5jdGlvbiBDb21tV3JhcHBlcjpQcm9jZXNzUXVldWUoKQ0KICAgIGxvY2FsIFF1ZXVlID0gc2VsZi5RdWV1ZQ0KDQogICAgZm9yIEluZGV4ID0gMSwgI1F1ZXVlIGRvDQogICAgICAgIGxvY2FsIEFyZ3VtZW50cyA9IHRhYmxlLnJlbW92ZShRdWV1ZSkNCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgc2VsZjpQcm9jZXNzQXJndW1lbnRzKEFyZ3VtZW50cykgDQogICAgICAgIGVuZCkNCiAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBDb21tV3JhcHBlcjpCZWdpblF1ZXVlU2VydmljZSgpDQogICAgY29yb3V0aW5lLndyYXAoZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSB3YWl0KCkgZG8NCiAgICAgICAgICAgIHNlbGY6UHJvY2Vzc1F1ZXVlKCkNCiAgICAgICAgZW5kDQogICAgZW5kKSgpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk5ld0NvbW1XcmFwKENoYW5uZWw6IEJpbmRhYmxlRXZlbnQpDQogICAgbG9jYWwgQmFzZSA9IHsNCiAgICAgICAgUXVldWUgPSBzZXRtZXRhdGFibGUoe30sIHtfX21vZGUgPSAidiJ9KSwNCiAgICAgICAgQ2hhbm5lbCA9IENoYW5uZWwsDQogICAgICAgIEV2ZW50ID0gQ2hhbm5lbC5FdmVudA0KICAgIH0NCg0KICAgIC0tLy8gQ3JlYXRlIG5ldyB3cmFwcGVyIGNsYXNzDQogICAgbG9jYWwgV3JhcHBlZCA9IHNldG1ldGF0YWJsZShCYXNlLCBDb21tV3JhcHBlcikNCiAgICBXcmFwcGVkOkJlZ2luUXVldWVTZXJ2aWNlKCkNCg0KICAgIHJldHVybiBXcmFwcGVkDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk1ha2VEZWJ1Z0lkSGFuZGxlcigpOiBCaW5kYWJsZUZ1bmN0aW9uDQogICAgLS0vLyBVc2luZyBCaW5kYWJsZUZ1bmN0aW9uIGFzIGl0IGRvZXMgbm90IHJlcXVpcmUgYSB0aHJlYWQgcGVybWlzc2lvbiBjaGFuZ2UNCiAgICBsb2NhbCBSZW1vdGUgPSBJbnN0YW5jZS5uZXcoIkJpbmRhYmxlRnVuY3Rpb24iKQ0KICAgIGZ1bmN0aW9uIFJlbW90ZS5Pbkludm9rZShPYmplY3Q6IEluc3RhbmNlKTogc3RyaW5nDQogICAgICAgIHJldHVybiBPYmplY3Q6R2V0RGVidWdJZCgpDQogICAgZW5kDQoNCiAgICBzZWxmLkRlYnVnSWRSZW1vdGUgPSBSZW1vdGUNCiAgICBzZWxmLkRlYnVnSWRJbnZva2UgPSBSZW1vdGUuSW52b2tlDQoNCiAgICByZXR1cm4gUmVtb3RlDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldERlYnVnSWQoT2JqZWN0OiBJbnN0YW5jZSk6IHN0cmluZw0KICAgIGxvY2FsIEludm9rZSA9IHNlbGYuRGVidWdJZEludm9rZQ0KICAgIGxvY2FsIFJlbW90ZSA9IHNlbGYuRGVidWdJZFJlbW90ZQ0KCXJldHVybiBJbnZva2UoUmVtb3RlLCBPYmplY3QpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkdldEhpZGRlblBhcmVudCgpOiBJbnN0YW5jZQ0KICAgIC0tLy8gVXNlIGdldGh1aSBpZiBpdCBleGlzdHMNCiAgICBpZiBnZXRodWkgdGhlbiByZXR1cm4gZ2V0aHVpKCkgZW5kDQogICAgcmV0dXJuIENvcmVHdWkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6Q3JlYXRlQ29tbUNoYW5uZWwoKTogKG51bWJlciwgQmluZGFibGVFdmVudCkNCiAgICAtLS8vIFVzZSBuYXRpdmUgaWYgaXQgZXhpc3RzDQogICAgbG9jYWwgRm9yY2UgPSBDb25maWcuRm9yY2VVc2VDdXN0b21Db21tDQogICAgaWYgY3JlYXRlX2NvbW1fY2hhbm5lbCBhbmQgbm90IEZvcmNlIHRoZW4NCiAgICAgICAgcmV0dXJuIGNyZWF0ZV9jb21tX2NoYW5uZWwoKQ0KICAgIGVuZA0KDQogICAgbG9jYWwgUGFyZW50ID0gc2VsZjpHZXRIaWRkZW5QYXJlbnQoKQ0KICAgIGxvY2FsIENoYW5uZWxJZCA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDAwKQ0KDQogICAgLS0vLyBCaW5kYWJsZUV2ZW50DQogICAgbG9jYWwgQ2hhbm5lbCA9IEluc3RhbmNlLm5ldygiQmluZGFibGVFdmVudCIsIFBhcmVudCkNCiAgICBDaGFubmVsLk5hbWUgPSBDaGFubmVsSWQNCg0KICAgIHJldHVybiBDaGFubmVsSWQsIENoYW5uZWwNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0Q29tbUNoYW5uZWwoQ2hhbm5lbElkOiBudW1iZXIpOiBCaW5kYWJsZUV2ZW50Pw0KICAgIC0tLy8gVXNlIG5hdGl2ZSBpZiBpdCBleGlzdHMNCiAgICBsb2NhbCBGb3JjZSA9IENvbmZpZy5Gb3JjZVVzZUN1c3RvbUNvbW0NCiAgICBpZiBnZXRfY29tbV9jaGFubmVsIGFuZCBub3QgRm9yY2UgdGhlbg0KICAgICAgICBsb2NhbCBDaGFubmVsID0gZ2V0X2NvbW1fY2hhbm5lbChDaGFubmVsSWQpDQogICAgICAgIHJldHVybiBDaGFubmVsLCBmYWxzZQ0KICAgIGVuZA0KDQogICAgbG9jYWwgUGFyZW50ID0gc2VsZjpHZXRIaWRkZW5QYXJlbnQoKQ0KICAgIGxvY2FsIENoYW5uZWwgPSBQYXJlbnQ6RmluZEZpcnN0Q2hpbGQoQ2hhbm5lbElkKQ0KDQogICAgLS0vLyBXcmFwIHRoZSBjaGFubmVsIChQcmV2ZW50cyB0aHJlYWQgcGVybWlzc2lvbiBlcnJvcnMpDQogICAgbG9jYWwgV3JhcHBlZCA9IHNlbGY6TmV3Q29tbVdyYXAoQ2hhbm5lbCkNCiAgICByZXR1cm4gV3JhcHBlZCwgdHJ1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpDaGVja1ZhbHVlKFZhbHVlLCBJbmJvdW5kOiBib29sZWFuPykNCiAgICAgLS0vLyBObyBzZXJpYWxpemluZyAgbmVlZGVkDQogICAgaWYgdHlwZW9mKFZhbHVlKSB+PSAidGFibGUiIHRoZW4gDQogICAgICAgIHJldHVybiBWYWx1ZSANCiAgICBlbmQNCiAgIA0KICAgIC0tLy8gRGVzZXJpYWxpemUNCiAgICBpZiBJbmJvdW5kIHRoZW4NCiAgICAgICAgcmV0dXJuIHNlbGY6RGVzZXJpYWxpemVUYWJsZShWYWx1ZSkNCiAgICBlbmQNCg0KICAgIC0tLy8gU2VyaWFsaXplDQogICAgcmV0dXJuIHNlbGY6U2VyaWFsaXplVGFibGUoVmFsdWUpDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOk1ha2VQYWNrZXQoSW5kZXgsIFZhbHVlKTogdGFibGUNCiAgICByZXR1cm4gew0KICAgICAgICBJbmRleCA9IHNlbGY6Q2hlY2tWYWx1ZShJbmRleCksIA0KICAgICAgICBWYWx1ZSA9IHNlbGY6Q2hlY2tWYWx1ZShWYWx1ZSkNCiAgICB9DQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlJlYWRQYWNrZXQoUGFja2V0OiB0YWJsZSk6IChhbnksIGFueSkNCiAgICBsb2NhbCBLZXkgPSBzZWxmOkNoZWNrVmFsdWUoUGFja2V0LkluZGV4LCB0cnVlKQ0KICAgIGxvY2FsIFZhbHVlID0gc2VsZjpDaGVja1ZhbHVlKFBhY2tldC5WYWx1ZSwgdHJ1ZSkNCiAgICByZXR1cm4gS2V5LCBWYWx1ZQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpTZXJpYWxpemVUYWJsZShUYWJsZTogdGFibGUpOiB0YWJsZQ0KICAgIGxvY2FsIFNlcmlhbGl6ZWQgPSB7fQ0KICAgIGZvciBJbmRleCwgVmFsdWUgaW4gbmV4dCwgVGFibGUgZG8NCiAgICAgICAgbG9jYWwgUGFja2V0ID0gc2VsZjpNYWtlUGFja2V0KEluZGV4LCBWYWx1ZSkNCiAgICAgICAgdGFibGUuaW5zZXJ0KFNlcmlhbGl6ZWQsIFBhY2tldCkNCiAgICBlbmQNCiAgICByZXR1cm4gU2VyaWFsaXplZA0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpEZXNlcmlhbGl6ZVRhYmxlKFNlcmlhbGl6ZWQ6IHRhYmxlKTogdGFibGUNCiAgICBsb2NhbCBUYWJsZSA9IHt9DQogICAgZm9yIF8sIFBhY2tldCBpbiBuZXh0LCBTZXJpYWxpemVkIGRvDQogICAgICAgIGxvY2FsIEluZGV4LCBWYWx1ZSA9IHNlbGY6UmVhZFBhY2tldChQYWNrZXQpDQogICAgICAgIGlmIG5vdCBJbmRleCB0aGVuIGNvbnRpbnVlIGVuZA0KDQogICAgICAgIFRhYmxlW0luZGV4XSA9IFZhbHVlDQogICAgZW5kDQogICAgcmV0dXJuIFRhYmxlDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlNldENoYW5uZWwoTmV3Q2hhbm5lbDogbnVtYmVyKQ0KICAgIENoYW5uZWwgPSBOZXdDaGFubmVsDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOldhcm4oLi4uKQ0KICAgIHNlbGY6Q29tbXVuaWNhdGUoIldhcm4iLCAuLi4pDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOlF1ZXVlTG9nKERhdGEpDQogICAgc2VsZjpDb21tdW5pY2F0ZSgiUXVldWVMb2ciLCBEYXRhKQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpBZGRDb21tQ2FsbGJhY2soVHlwZTogc3RyaW5nLCBDYWxsYmFjazogKC4uLmFueSkgLT4gLi4uYW55KQ0KICAgIGxvY2FsIENvbW1DYWxsYmFja3MgPSBzZWxmLkNvbW1DYWxsYmFja3MNCiAgICBDb21tQ2FsbGJhY2tzW1R5cGVdID0gQ2FsbGJhY2sNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6R2V0Q29tbUNhbGxiYWNrKFR5cGU6IHN0cmluZyk6ICguLi5hbnkpIC0+IC4uLmFueQ0KICAgIGxvY2FsIENvbW1DYWxsYmFja3MgPSBzZWxmLkNvbW1DYWxsYmFja3MNCiAgICByZXR1cm4gQ29tbUNhbGxiYWNrc1tUeXBlXQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgUHJvcGVydHk6IHN0cmluZykNCiAgICBpZiB0eXBlb2YoQ2hhbm5lbCkgPT0gIkluc3RhbmNlIiB0aGVuDQogICAgICAgIHJldHVybiBIb29rOkluZGV4KENoYW5uZWwsIFByb3BlcnR5KQ0KICAgIGVuZA0KDQogICAgLS0vLyBTb21lIGV4ZWN1dG9ycyByZXR1cm4gYSBVc2VyRGF0YSB0eXBlDQogICAgcmV0dXJuIENoYW5uZWxbUHJvcGVydHldDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkNvbW11bmljYXRlKC4uLikNCiAgICBsb2NhbCBGaXJlID0gc2VsZjpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgIkZpcmUiKQ0KICAgIEZpcmUoQ2hhbm5lbCwgLi4uKQ0KZW5kDQoNCmZ1bmN0aW9uIE1vZHVsZTpBZGRDb25uZWN0aW9uKENhbGxiYWNrKTogUkJYU2NyaXB0Q29ubmVjdGlvbg0KICAgIGxvY2FsIEV2ZW50ID0gc2VsZjpDaGFubmVsSW5kZXgoQ2hhbm5lbCwgIkV2ZW50IikNCiAgICByZXR1cm4gRXZlbnQ6Q29ubmVjdChDYWxsYmFjaykNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6QWRkVHlwZUNhbGxiYWNrKFR5cGU6IHN0cmluZywgQ2FsbGJhY2spOiBSQlhTY3JpcHRDb25uZWN0aW9uDQogICAgbG9jYWwgRXZlbnQgPSBzZWxmOkNoYW5uZWxJbmRleChDaGFubmVsLCAiRXZlbnQiKQ0KICAgIHJldHVybiBFdmVudDpDb25uZWN0KGZ1bmN0aW9uKFJlY2l2ZWRUeXBlOiBzdHJpbmcsIC4uLikNCiAgICAgICAgaWYgUmVjaXZlZFR5cGUgfj0gVHlwZSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgQ2FsbGJhY2soLi4uKQ0KICAgIGVuZCkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6QWRkVHlwZUNhbGxiYWNrcyhUeXBlczogdGFibGUpDQogICAgZm9yIFR5cGU6IHN0cmluZywgQ2FsbGJhY2sgaW4gbmV4dCwgVHlwZXMgZG8NCiAgICAgICAgc2VsZjpBZGRUeXBlQ2FsbGJhY2soVHlwZSwgQ2FsbGJhY2spDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gTW9kdWxlOkFkZERlZmF1bHRDYWxsYmFja3MoRXZlbnQ6IEJpbmRhYmxlRXZlbnQpDQogICAgc2VsZjpBZGRDb21tQ2FsbGJhY2soIldhcm4iLCBmdW5jdGlvbiguLi4pDQogICAgICAgIHdhcm4oLi4uKQ0KICAgIGVuZCkNCmVuZA0KDQpmdW5jdGlvbiBNb2R1bGU6Q3JlYXRlQ2hhbm5lbCgpOiBudW1iZXINCiAgICBsb2NhbCBDaGFubmVsSUQsIEV2ZW50ID0gc2VsZjpDcmVhdGVDb21tQ2hhbm5lbCgpDQoNCiAgICAtLS8vIENvbm5lY3QgR2V0Q29tbUNhbGxiYWNrIGZ1bmN0aW9uDQogICAgRXZlbnQuRXZlbnQ6Q29ubmVjdChmdW5jdGlvbihUeXBlOiBzdHJpbmcsIC4uLikNCiAgICAgICAgbG9jYWwgQ2FsbGJhY2sgPSBzZWxmOkdldENvbW1DYWxsYmFjayhUeXBlKQ0KICAgICAgICBpZiBDYWxsYmFjayB0aGVuDQogICAgICAgICAgICBDYWxsYmFjayguLi4pDQogICAgICAgIGVuZA0KICAgIGVuZCkNCg0KICAgIC0tLy8gQWRkIGRlZmF1bHQgY29tbXVuaWNhdGlvbiBjYWxsYmFja3MNCiAgICBzZWxmOkFkZERlZmF1bHRDYWxsYmFja3MoRXZlbnQpDQoNCiAgICByZXR1cm4gQ2hhbm5lbElELCBFdmVudA0KZW5kDQoNCk1vZHVsZTpNYWtlRGVidWdJZEhhbmRsZXIoKQ0KDQpyZXR1cm4gTW9kdWxl]]
}},d.Players local i=e:LoadLibraries(g)local j,k,l,m,n,o,p=i.Process,i.Hook,i.Ui
,i.Generation,i.Communication,i.Config,e:GetAsset('ProggyClean.ttf',true)local q
=e:CreateFont('ProggyClean',p)l:SetFontFile(q)j:CheckConfig(o)e:LoadModules(i,{
Modules=i,Services=d})local r,s=l:CreateMainWindow(),j:CheckIsSupported()if not
s then r:Close()return end local t,u=n:CreateChannel()n:AddCommCallback(
'QueueLog',function(...)l:QueueLog(...)end)local v=h.LocalPlayer m:
SetSwapsCallback(function(w)w:AddSwap(v,{String='LocalPlayer'})w:AddSwap(v.
Character,{String='Character',NextParent=v})end)l:CreateWindowContent(r)l:
SetCommChannel(u)l:BeginLogService()local w=e:MakeActorScript(g,t)k:LoadHooks(w,
t)
